import{j as t}from"./ui-DmaJfU4R.js";import{r as i,L as x}from"./router-YsGj19cs.js";import{c as u,A as f}from"./index-Czdh4XVO.js";import{U as j}from"./user-photo-upload-BobMTl5d.js";import{C as g,d as y}from"./card-hWJdfOrY.js";import"./vendor-BtP0CW_r.js";import"./button-CEL2MslA.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./use-toast-BimaNeed.js";import"./x-DBAcYj4I.js";import"./createLucideIcon-BcwDLXBm.js";import"./upload-CEja7h-0.js";import"./user-BuBPZYTe.js";const C=async(n,a)=>{const e=new FormData;return e.append("file",n),a&&e.append("user_profile",JSON.stringify(a)),(await u.post("/api/items/search-by-photo",e,{headers:{"Content-Type":"multipart/form-data"}})).data},F=()=>{const[n,a]=i.useState(),[e,c]=i.useState([]),[m,p]=i.useState(!1),o=i.useContext(f),s=o&&typeof o=="object"&&o!==null&&"user"in o?o.user:void 0,h=async(r,d)=>{if(a(r),d){p(!0);const l=await C(d,s);c(l),p(!1)}};return t.jsxs("div",{className:"container mx-auto px-4 py-8",children:[t.jsx("h1",{className:"mb-4 text-2xl font-bold",children:"Поиск по фото"}),s&&t.jsxs("div",{className:"mb-2 text-xs text-muted-foreground",children:["Рекомендации будут персонализированы под ваши параметры: рост ",s.height||"-"," см, вес ",s.weight||"-"," кг, грудь ",s.chest||"-"," см, талия ",s.waist||"-"," см, бёдра ",s.hips||"-"," см"]}),t.jsx(j,{onPhotoSelected:h,currentPhoto:n}),m&&t.jsx("div",{children:"Загрузка..."}),t.jsx("div",{className:"grid grid-cols-2 gap-4 mt-4",children:e.map(r=>t.jsx(x,{to:`/items/${r.id}`,className:"block",children:t.jsx(g,{children:t.jsx(y,{children:t.jsx("div",{children:r.name})})})},r.id))})]})};export{F as default};
