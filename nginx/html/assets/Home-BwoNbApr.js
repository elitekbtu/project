import{j as e}from"./ui-DmaJfU4R.js";import{u as S,W as I,c as P}from"./index-dk87i_EB.js";import{r as d,L as v}from"./router-YsGj19cs.js";import{C as T,d as k}from"./card-hWJdfOrY.js";import{B as g}from"./button-CEL2MslA.js";import{B as h}from"./badge-CMy5sMNA.js";import{I as L}from"./ItemImage-C9AFigSL.js";import{C as B}from"./constants-BN7_l00R.js";import{C as R}from"./chevron-left-DxwJ_0o2.js";import{C as D}from"./chevron-right-CLAbP_dx.js";import{S as j}from"./shopping-bag-Din1qLo_.js";import{S as E}from"./store-CkQQwr-5.js";import{S as z}from"./sparkles-Dhcxexd3.js";import{H as _}from"./heart-DyjZq6UA.js";import"./vendor-BtP0CW_r.js";import"./utils-CytzSlOG.js";import"./index-BwobEAja.js";import"./createLucideIcon-BcwDLXBm.js";const b=4,N=({items:s,getDisplayPrice:r,getDiscountInfo:a,title:i,showIndexBadge:m})=>{const[o,n]=d.useState(0),l=o>0,f=o+b<s.length,y=()=>{l&&n(o-1)},w=()=>{f&&n(o+1)};return e.jsxs("div",{className:"mb-12",children:[i&&e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsx("h2",{className:"font-display text-2xl font-semibold flex items-center gap-2",children:i}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{size:"icon",variant:"outline",onClick:y,disabled:!l,children:e.jsx(R,{})}),e.jsx(g,{size:"icon",variant:"outline",onClick:w,disabled:!f,children:e.jsx(D,{})})]})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"flex gap-4 overflow-x-auto scrollbar-hide",children:s.slice(o,o+b).map((t,C)=>e.jsx(T,{className:"group overflow-hidden transition-all hover:shadow-lg min-w-[220px] max-w-[260px] flex-1",children:e.jsxs(v,{to:`/items/${t.id}`,children:[e.jsxs("div",{className:"relative aspect-square md:aspect-[3/4] overflow-hidden",children:[e.jsx(L,{src:t.image_url,alt:t.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105",fallbackClassName:"h-full w-full"}),(()=>{const c=a(t);return c.hasDiscount?e.jsx("div",{className:"absolute top-3 left-3 z-10",children:e.jsxs(h,{className:"bg-red-500 text-white text-xs font-bold",children:["-",c.discountPercent,"%"]})}):null})(),m&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs(h,{variant:"secondary",className:"bg-background/80 backdrop-blur-sm",children:["#",o+C+1]})})]}),e.jsxs(k,{className:"p-4",children:[e.jsxs("div",{className:"mb-2",children:[t.category&&e.jsx(h,{variant:"outline",className:"mb-2 text-xs capitalize",children:B[t.category]??t.category}),e.jsx("h3",{className:"font-medium leading-tight",title:t.name,children:t.name}),t.brand&&e.jsx("p",{className:"text-sm text-muted-foreground",children:t.brand})]}),(()=>{const c=r(t),x=a(t);return c===void 0?null:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"font-semibold",children:[c.toLocaleString()," ₸"]}),x.hasDiscount&&x.originalPrice&&e.jsxs("p",{className:"text-sm text-muted-foreground line-through",children:[x.originalPrice.toLocaleString()," ₸"]})]})})()]})]})},t.id))})})]})},p=s=>{if(s.variants&&s.variants.length>0){const r=s.variants.map(a=>a.price).filter(a=>typeof a=="number"&&a!==null);if(r.length>0)return Math.min(...r)}return s.price??void 0},u=s=>{if(!s.price||typeof s.price!="number")return{hasDiscount:!1};const r=p(s);if(!r||r>=s.price)return{hasDiscount:!1};const a=Math.round((s.price-r)/s.price*100);return{hasDiscount:!0,originalPrice:s.price,discountPercent:a}},se=()=>{const{user:s}=S(),[r,a]=d.useState([]),[i,m]=d.useState(!0);d.useEffect(()=>{(async()=>{try{const l=await P.get("/api/items/trending");a(l.data)}catch(l){console.error(l)}finally{m(!1)}})()},[]);const o=r.filter(n=>u(n).hasDiscount);return e.jsxs(e.Fragment,{children:[e.jsxs(I,{children:[e.jsx("title",{children:"TRC — Современная мода, стиль, образы, покупки"}),e.jsx("meta",{name:"description",content:"TRC — платформа для создания стильных образов, покупки одежды и вдохновения."}),e.jsx("meta",{name:"keywords",content:"мода, стиль, образы, одежда, покупки, тренды, TRC"}),e.jsx("meta",{property:"og:title",content:"TRC — Современная мода и стиль"}),e.jsx("meta",{property:"og:description",content:"Создавайте образы, покупайте одежду, вдохновляйтесь модой на TRC."})]}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("section",{className:"mb-12 text-center",children:e.jsxs("div",{className:"mx-auto max-w-3xl",children:[e.jsxs("h1",{className:"mb-4 font-display text-4xl font-bold tracking-tight lg:text-5xl",children:["Добро пожаловать, ",(s==null?void 0:s.first_name)||"стилист","!"]}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Откройте для себя новые тренды и создайте уникальные образы"})]})}),e.jsx("section",{className:"mb-12",children:e.jsx("div",{className:"grid gap-4 grid-cols-2 sm:grid-cols-4 md:grid-cols-4",children:[{to:"/items",icon:e.jsx(j,{className:"h-6 w-6 text-primary"}),label:"Каталог",sub:"Все товары"},{to:"/shops",icon:e.jsx(E,{className:"h-6 w-6 text-primary"}),label:"Магазины",sub:"Модераторы"},{to:"/outfits/new",icon:e.jsx(z,{className:"h-6 w-6 text-primary"}),label:"Создать образ",sub:"Новый лук"},{to:"/favorites",icon:e.jsx(_,{className:"h-6 w-6 text-primary"}),label:"Избранное",sub:"Любимые"}].map(n=>e.jsx(v,{to:n.to,className:"group",children:e.jsxs("button",{type:"button",className:"w-full h-28 sm:h-32 flex flex-col items-center justify-center gap-2 rounded-xl border border-border/60 bg-card transition-all hover:shadow-md active:scale-[.97]",children:[e.jsx("div",{className:"rounded-full bg-primary/10 p-3 group-hover:scale-110 transition-transform",children:n.icon}),e.jsx("span",{className:"text-sm font-semibold leading-none",children:n.label}),e.jsx("span",{className:"text-xs text-muted-foreground",children:n.sub})]})},n.to))})}),!i&&r.length>0&&e.jsx(N,{items:r,getDisplayPrice:p,getDiscountInfo:u,title:"Популярные товары",showIndexBadge:!0}),!i&&o.length>0&&e.jsx(N,{items:o,getDisplayPrice:p,getDiscountInfo:u,title:"Товары со скидкой"}),!i&&r.length===0&&e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(j,{className:"mx-auto mb-4 h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mb-2 font-semibold",children:"Пока нет популярных товаров"}),e.jsx("p",{className:"text-muted-foreground",children:"Начните добавлять товары в избранное, чтобы увидеть тренды"})]})]})]})};export{se as default};
