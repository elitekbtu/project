var Zm=Object.defineProperty;var Qm=(e,t,a)=>t in e?Zm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var Wr=(e,t,a)=>Qm(e,typeof t!="symbol"?t+"":t,a);import{j as s,S as ep,a as mc,b as pc,P as tp,C as hc,I as fc,c as xc,d as gc,R as yc,L as vc,e as bc,f as sp,T as ap,g as jc,h as wc,F as Nc,i as kc,k as np,l as ip,m as Sc,V as rp,n as Cc,o as Pc,p as op,q as lp,r as Tc,s as cp,t as dp,u as Ac,v as up,w as mp,x as Rc,y as pp,z as Ec,A as Oc,B as hp,D as fp,E as xp,G as ks,H as gp,J as yp,K as vp,M as bp,N as jp,O as wp,Q as Np,U as Lc,W as _c,X as kp,_ as $t}from"./ui-9Jqw0cF7.js";import{r as h,L as H,O as Bi,u as rs,d as dt,N as Xs,e as kt,b as Sp,B as Cp,f as Pp,g as de}from"./router-BaKb0mPD.js";import{a as Tp,g as Dc}from"./vendor-BtP0CW_r.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=a(i);fetch(i.href,r)}})();var ma={},Kr;function Ap(){if(Kr)return ma;Kr=1;var e=Tp();return ma.createRoot=e.createRoot,ma.hydrateRoot=e.hydrateRoot,ma}var Rp=Ap();function Mc(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ep}=Object.prototype,{getPrototypeOf:Ui}=Object,{iterator:sn,toStringTag:Ic}=Symbol,an=(e=>t=>{const a=Ep.call(t);return e[a]||(e[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Qe=e=>(e=e.toLowerCase(),t=>an(t)===e),nn=e=>t=>typeof t===e,{isArray:os}=Array,Ds=nn("undefined");function Op(e){return e!==null&&!Ds(e)&&e.constructor!==null&&!Ds(e.constructor)&&ze(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Fc=Qe("ArrayBuffer");function Lp(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Fc(e.buffer),t}const _p=nn("string"),ze=nn("function"),Vc=nn("number"),rn=e=>e!==null&&typeof e=="object",Dp=e=>e===!0||e===!1,ja=e=>{if(an(e)!=="object")return!1;const t=Ui(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Ic in e)&&!(sn in e)},Mp=Qe("Date"),Ip=Qe("File"),Fp=Qe("Blob"),Vp=Qe("FileList"),zp=e=>rn(e)&&ze(e.pipe),$p=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ze(e.append)&&((t=an(e))==="formdata"||t==="object"&&ze(e.toString)&&e.toString()==="[object FormData]"))},Bp=Qe("URLSearchParams"),[Up,qp,Hp,Wp]=["ReadableStream","Request","Response","Headers"].map(Qe),Kp=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ys(e,t,{allOwnKeys:a=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),os(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const r=a?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let l;for(n=0;n<o;n++)l=r[n],t.call(null,e[l],l,e)}}function zc(e,t){t=t.toLowerCase();const a=Object.keys(e);let n=a.length,i;for(;n-- >0;)if(i=a[n],t===i.toLowerCase())return i;return null}const Rt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,$c=e=>!Ds(e)&&e!==Rt;function ti(){const{caseless:e}=$c(this)&&this||{},t={},a=(n,i)=>{const r=e&&zc(t,i)||i;ja(t[r])&&ja(n)?t[r]=ti(t[r],n):ja(n)?t[r]=ti({},n):os(n)?t[r]=n.slice():t[r]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Ys(arguments[n],a);return t}const Gp=(e,t,a,{allOwnKeys:n}={})=>(Ys(t,(i,r)=>{a&&ze(i)?e[r]=Mc(i,a):e[r]=i},{allOwnKeys:n}),e),Jp=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Xp=(e,t,a,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),a&&Object.assign(e.prototype,a)},Yp=(e,t,a,n)=>{let i,r,o;const l={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),r=i.length;r-- >0;)o=i[r],(!n||n(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=a!==!1&&Ui(e)}while(e&&(!a||a(e,t))&&e!==Object.prototype);return t},Zp=(e,t,a)=>{e=String(e),(a===void 0||a>e.length)&&(a=e.length),a-=t.length;const n=e.indexOf(t,a);return n!==-1&&n===a},Qp=e=>{if(!e)return null;if(os(e))return e;let t=e.length;if(!Vc(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=e[t];return a},eh=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ui(Uint8Array)),th=(e,t)=>{const n=(e&&e[sn]).call(e);let i;for(;(i=n.next())&&!i.done;){const r=i.value;t.call(e,r[0],r[1])}},sh=(e,t)=>{let a;const n=[];for(;(a=e.exec(t))!==null;)n.push(a);return n},ah=Qe("HTMLFormElement"),nh=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,n,i){return n.toUpperCase()+i}),Gr=(({hasOwnProperty:e})=>(t,a)=>e.call(t,a))(Object.prototype),ih=Qe("RegExp"),Bc=(e,t)=>{const a=Object.getOwnPropertyDescriptors(e),n={};Ys(a,(i,r)=>{let o;(o=t(i,r,e))!==!1&&(n[r]=o||i)}),Object.defineProperties(e,n)},rh=e=>{Bc(e,(t,a)=>{if(ze(e)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const n=e[a];if(ze(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},oh=(e,t)=>{const a={},n=i=>{i.forEach(r=>{a[r]=!0})};return os(e)?n(e):n(String(e).split(t)),a},lh=()=>{},ch=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function dh(e){return!!(e&&ze(e.append)&&e[Ic]==="FormData"&&e[sn])}const uh=e=>{const t=new Array(10),a=(n,i)=>{if(rn(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;const r=os(n)?[]:{};return Ys(n,(o,l)=>{const c=a(o,i+1);!Ds(c)&&(r[l]=c)}),t[i]=void 0,r}}return n};return a(e,0)},mh=Qe("AsyncFunction"),ph=e=>e&&(rn(e)||ze(e))&&ze(e.then)&&ze(e.catch),Uc=((e,t)=>e?setImmediate:t?((a,n)=>(Rt.addEventListener("message",({source:i,data:r})=>{i===Rt&&r===a&&n.length&&n.shift()()},!1),i=>{n.push(i),Rt.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",ze(Rt.postMessage)),hh=typeof queueMicrotask<"u"?queueMicrotask.bind(Rt):typeof process<"u"&&process.nextTick||Uc,fh=e=>e!=null&&ze(e[sn]),I={isArray:os,isArrayBuffer:Fc,isBuffer:Op,isFormData:$p,isArrayBufferView:Lp,isString:_p,isNumber:Vc,isBoolean:Dp,isObject:rn,isPlainObject:ja,isReadableStream:Up,isRequest:qp,isResponse:Hp,isHeaders:Wp,isUndefined:Ds,isDate:Mp,isFile:Ip,isBlob:Fp,isRegExp:ih,isFunction:ze,isStream:zp,isURLSearchParams:Bp,isTypedArray:eh,isFileList:Vp,forEach:Ys,merge:ti,extend:Gp,trim:Kp,stripBOM:Jp,inherits:Xp,toFlatObject:Yp,kindOf:an,kindOfTest:Qe,endsWith:Zp,toArray:Qp,forEachEntry:th,matchAll:sh,isHTMLForm:ah,hasOwnProperty:Gr,hasOwnProp:Gr,reduceDescriptors:Bc,freezeMethods:rh,toObjectSet:oh,toCamelCase:nh,noop:lh,toFiniteNumber:ch,findKey:zc,global:Rt,isContextDefined:$c,isSpecCompliantForm:dh,toJSONObject:uh,isAsyncFn:mh,isThenable:ph,setImmediate:Uc,asap:hh,isIterable:fh};function re(e,t,a,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}I.inherits(re,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:I.toJSONObject(this.config),code:this.code,status:this.status}}});const qc=re.prototype,Hc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Hc[e]={value:e}});Object.defineProperties(re,Hc);Object.defineProperty(qc,"isAxiosError",{value:!0});re.from=(e,t,a,n,i,r)=>{const o=Object.create(qc);return I.toFlatObject(e,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),re.call(o,e.message,t,a,n,i),o.cause=e,o.name=e.name,r&&Object.assign(o,r),o};const xh=null;function si(e){return I.isPlainObject(e)||I.isArray(e)}function Wc(e){return I.endsWith(e,"[]")?e.slice(0,-2):e}function Jr(e,t,a){return e?e.concat(t).map(function(i,r){return i=Wc(i),!a&&r?"["+i+"]":i}).join(a?".":""):t}function gh(e){return I.isArray(e)&&!e.some(si)}const yh=I.toFlatObject(I,{},null,function(t){return/^is[A-Z]/.test(t)});function on(e,t,a){if(!I.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,a=I.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,g){return!I.isUndefined(g[v])});const n=a.metaTokens,i=a.visitor||d,r=a.dots,o=a.indexes,c=(a.Blob||typeof Blob<"u"&&Blob)&&I.isSpecCompliantForm(t);if(!I.isFunction(i))throw new TypeError("visitor must be a function");function u(f){if(f===null)return"";if(I.isDate(f))return f.toISOString();if(I.isBoolean(f))return f.toString();if(!c&&I.isBlob(f))throw new re("Blob is not supported. Use a Buffer instead.");return I.isArrayBuffer(f)||I.isTypedArray(f)?c&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function d(f,v,g){let S=f;if(f&&!g&&typeof f=="object"){if(I.endsWith(v,"{}"))v=n?v:v.slice(0,-2),f=JSON.stringify(f);else if(I.isArray(f)&&gh(f)||(I.isFileList(f)||I.endsWith(v,"[]"))&&(S=I.toArray(f)))return v=Wc(v),S.forEach(function(C,_){!(I.isUndefined(C)||C===null)&&t.append(o===!0?Jr([v],_,r):o===null?v:v+"[]",u(C))}),!1}return si(f)?!0:(t.append(Jr(g,v,r),u(f)),!1)}const m=[],p=Object.assign(yh,{defaultVisitor:d,convertValue:u,isVisitable:si});function x(f,v){if(!I.isUndefined(f)){if(m.indexOf(f)!==-1)throw Error("Circular reference detected in "+v.join("."));m.push(f),I.forEach(f,function(S,k){(!(I.isUndefined(S)||S===null)&&i.call(t,S,I.isString(k)?k.trim():k,v,p))===!0&&x(S,v?v.concat(k):[k])}),m.pop()}}if(!I.isObject(e))throw new TypeError("data must be an object");return x(e),t}function Xr(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function qi(e,t){this._pairs=[],e&&on(e,this,t)}const Kc=qi.prototype;Kc.append=function(t,a){this._pairs.push([t,a])};Kc.toString=function(t){const a=t?function(n){return t.call(this,n,Xr)}:Xr;return this._pairs.map(function(i){return a(i[0])+"="+a(i[1])},"").join("&")};function vh(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Gc(e,t,a){if(!t)return e;const n=a&&a.encode||vh;I.isFunction(a)&&(a={serialize:a});const i=a&&a.serialize;let r;if(i?r=i(t,a):r=I.isURLSearchParams(t)?t.toString():new qi(t,a).toString(n),r){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}class Yr{constructor(){this.handlers=[]}use(t,a,n){return this.handlers.push({fulfilled:t,rejected:a,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){I.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Jc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},bh=typeof URLSearchParams<"u"?URLSearchParams:qi,jh=typeof FormData<"u"?FormData:null,wh=typeof Blob<"u"?Blob:null,Nh={isBrowser:!0,classes:{URLSearchParams:bh,FormData:jh,Blob:wh},protocols:["http","https","file","blob","url","data"]},Hi=typeof window<"u"&&typeof document<"u",ai=typeof navigator=="object"&&navigator||void 0,kh=Hi&&(!ai||["ReactNative","NativeScript","NS"].indexOf(ai.product)<0),Sh=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ch=Hi&&window.location.href||"http://localhost",Ph=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Hi,hasStandardBrowserEnv:kh,hasStandardBrowserWebWorkerEnv:Sh,navigator:ai,origin:Ch},Symbol.toStringTag,{value:"Module"})),_e={...Ph,...Nh};function Th(e,t){return on(e,new _e.classes.URLSearchParams,Object.assign({visitor:function(a,n,i,r){return _e.isNode&&I.isBuffer(a)?(this.append(n,a.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function Ah(e){return I.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Rh(e){const t={},a=Object.keys(e);let n;const i=a.length;let r;for(n=0;n<i;n++)r=a[n],t[r]=e[r];return t}function Xc(e){function t(a,n,i,r){let o=a[r++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=r>=a.length;return o=!o&&I.isArray(i)?i.length:o,c?(I.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!l):((!i[o]||!I.isObject(i[o]))&&(i[o]=[]),t(a,n,i[o],r)&&I.isArray(i[o])&&(i[o]=Rh(i[o])),!l)}if(I.isFormData(e)&&I.isFunction(e.entries)){const a={};return I.forEachEntry(e,(n,i)=>{t(Ah(n),i,a,0)}),a}return null}function Eh(e,t,a){if(I.isString(e))try{return(t||JSON.parse)(e),I.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(a||JSON.stringify)(e)}const Zs={transitional:Jc,adapter:["xhr","http","fetch"],transformRequest:[function(t,a){const n=a.getContentType()||"",i=n.indexOf("application/json")>-1,r=I.isObject(t);if(r&&I.isHTMLForm(t)&&(t=new FormData(t)),I.isFormData(t))return i?JSON.stringify(Xc(t)):t;if(I.isArrayBuffer(t)||I.isBuffer(t)||I.isStream(t)||I.isFile(t)||I.isBlob(t)||I.isReadableStream(t))return t;if(I.isArrayBufferView(t))return t.buffer;if(I.isURLSearchParams(t))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Th(t,this.formSerializer).toString();if((l=I.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return on(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return r||i?(a.setContentType("application/json",!1),Eh(t)):t}],transformResponse:[function(t){const a=this.transitional||Zs.transitional,n=a&&a.forcedJSONParsing,i=this.responseType==="json";if(I.isResponse(t)||I.isReadableStream(t))return t;if(t&&I.isString(t)&&(n&&!this.responseType||i)){const o=!(a&&a.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?re.from(l,re.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_e.classes.FormData,Blob:_e.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};I.forEach(["delete","get","head","post","put","patch"],e=>{Zs.headers[e]={}});const Oh=I.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Lh=e=>{const t={};let a,n,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),a=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!a||t[a]&&Oh[a])&&(a==="set-cookie"?t[a]?t[a].push(n):t[a]=[n]:t[a]=t[a]?t[a]+", "+n:n)}),t},Zr=Symbol("internals");function gs(e){return e&&String(e).trim().toLowerCase()}function wa(e){return e===!1||e==null?e:I.isArray(e)?e.map(wa):String(e)}function _h(e){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=a.exec(e);)t[n[1]]=n[2];return t}const Dh=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Rn(e,t,a,n,i){if(I.isFunction(n))return n.call(this,t,a);if(i&&(t=a),!!I.isString(t)){if(I.isString(n))return t.indexOf(n)!==-1;if(I.isRegExp(n))return n.test(t)}}function Mh(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,a,n)=>a.toUpperCase()+n)}function Ih(e,t){const a=I.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+a,{value:function(i,r,o){return this[n].call(this,t,i,r,o)},configurable:!0})})}let $e=class{constructor(t){t&&this.set(t)}set(t,a,n){const i=this;function r(l,c,u){const d=gs(c);if(!d)throw new Error("header name must be a non-empty string");const m=I.findKey(i,d);(!m||i[m]===void 0||u===!0||u===void 0&&i[m]!==!1)&&(i[m||c]=wa(l))}const o=(l,c)=>I.forEach(l,(u,d)=>r(u,d,c));if(I.isPlainObject(t)||t instanceof this.constructor)o(t,a);else if(I.isString(t)&&(t=t.trim())&&!Dh(t))o(Lh(t),a);else if(I.isObject(t)&&I.isIterable(t)){let l={},c,u;for(const d of t){if(!I.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[u=d[0]]=(c=l[u])?I.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}o(l,a)}else t!=null&&r(a,t,n);return this}get(t,a){if(t=gs(t),t){const n=I.findKey(this,t);if(n){const i=this[n];if(!a)return i;if(a===!0)return _h(i);if(I.isFunction(a))return a.call(this,i,n);if(I.isRegExp(a))return a.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,a){if(t=gs(t),t){const n=I.findKey(this,t);return!!(n&&this[n]!==void 0&&(!a||Rn(this,this[n],n,a)))}return!1}delete(t,a){const n=this;let i=!1;function r(o){if(o=gs(o),o){const l=I.findKey(n,o);l&&(!a||Rn(n,n[l],l,a))&&(delete n[l],i=!0)}}return I.isArray(t)?t.forEach(r):r(t),i}clear(t){const a=Object.keys(this);let n=a.length,i=!1;for(;n--;){const r=a[n];(!t||Rn(this,this[r],r,t,!0))&&(delete this[r],i=!0)}return i}normalize(t){const a=this,n={};return I.forEach(this,(i,r)=>{const o=I.findKey(n,r);if(o){a[o]=wa(i),delete a[r];return}const l=t?Mh(r):String(r).trim();l!==r&&delete a[r],a[l]=wa(i),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const a=Object.create(null);return I.forEach(this,(n,i)=>{n!=null&&n!==!1&&(a[i]=t&&I.isArray(n)?n.join(", "):n)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,a])=>t+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...a){const n=new this(t);return a.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[Zr]=this[Zr]={accessors:{}}).accessors,i=this.prototype;function r(o){const l=gs(o);n[l]||(Ih(i,o),n[l]=!0)}return I.isArray(t)?t.forEach(r):r(t),this}};$e.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);I.reduceDescriptors($e.prototype,({value:e},t)=>{let a=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[a]=n}}});I.freezeMethods($e);function En(e,t){const a=this||Zs,n=t||a,i=$e.from(n.headers);let r=n.data;return I.forEach(e,function(l){r=l.call(a,r,i.normalize(),t?t.status:void 0)}),i.normalize(),r}function Yc(e){return!!(e&&e.__CANCEL__)}function ls(e,t,a){re.call(this,e??"canceled",re.ERR_CANCELED,t,a),this.name="CanceledError"}I.inherits(ls,re,{__CANCEL__:!0});function Zc(e,t,a){const n=a.config.validateStatus;!a.status||!n||n(a.status)?e(a):t(new re("Request failed with status code "+a.status,[re.ERR_BAD_REQUEST,re.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function Fh(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Vh(e,t){e=e||10;const a=new Array(e),n=new Array(e);let i=0,r=0,o;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),d=n[r];o||(o=u),a[i]=c,n[i]=u;let m=r,p=0;for(;m!==i;)p+=a[m++],m=m%e;if(i=(i+1)%e,i===r&&(r=(r+1)%e),u-o<t)return;const x=d&&u-d;return x?Math.round(p*1e3/x):void 0}}function zh(e,t){let a=0,n=1e3/t,i,r;const o=(u,d=Date.now())=>{a=d,i=null,r&&(clearTimeout(r),r=null),e.apply(null,u)};return[(...u)=>{const d=Date.now(),m=d-a;m>=n?o(u,d):(i=u,r||(r=setTimeout(()=>{r=null,o(i)},n-m)))},()=>i&&o(i)]}const Aa=(e,t,a=3)=>{let n=0;const i=Vh(50,250);return zh(r=>{const o=r.loaded,l=r.lengthComputable?r.total:void 0,c=o-n,u=i(c),d=o<=l;n=o;const m={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-o)/u:void 0,event:r,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(m)},a)},Qr=(e,t)=>{const a=e!=null;return[n=>t[0]({lengthComputable:a,total:e,loaded:n}),t[1]]},eo=e=>(...t)=>I.asap(()=>e(...t)),$h=_e.hasStandardBrowserEnv?((e,t)=>a=>(a=new URL(a,_e.origin),e.protocol===a.protocol&&e.host===a.host&&(t||e.port===a.port)))(new URL(_e.origin),_e.navigator&&/(msie|trident)/i.test(_e.navigator.userAgent)):()=>!0,Bh=_e.hasStandardBrowserEnv?{write(e,t,a,n,i,r){const o=[e+"="+encodeURIComponent(t)];I.isNumber(a)&&o.push("expires="+new Date(a).toGMTString()),I.isString(n)&&o.push("path="+n),I.isString(i)&&o.push("domain="+i),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Uh(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function qh(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Qc(e,t,a){let n=!Uh(t);return e&&(n||a==!1)?qh(e,t):t}const to=e=>e instanceof $e?{...e}:e;function It(e,t){t=t||{};const a={};function n(u,d,m,p){return I.isPlainObject(u)&&I.isPlainObject(d)?I.merge.call({caseless:p},u,d):I.isPlainObject(d)?I.merge({},d):I.isArray(d)?d.slice():d}function i(u,d,m,p){if(I.isUndefined(d)){if(!I.isUndefined(u))return n(void 0,u,m,p)}else return n(u,d,m,p)}function r(u,d){if(!I.isUndefined(d))return n(void 0,d)}function o(u,d){if(I.isUndefined(d)){if(!I.isUndefined(u))return n(void 0,u)}else return n(void 0,d)}function l(u,d,m){if(m in t)return n(u,d);if(m in e)return n(void 0,u)}const c={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,d,m)=>i(to(u),to(d),m,!0)};return I.forEach(Object.keys(Object.assign({},e,t)),function(d){const m=c[d]||i,p=m(e[d],t[d],d);I.isUndefined(p)&&m!==l||(a[d]=p)}),a}const ed=e=>{const t=It({},e);let{data:a,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:r,headers:o,auth:l}=t;t.headers=o=$e.from(o),t.url=Gc(Qc(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(I.isFormData(a)){if(_e.hasStandardBrowserEnv||_e.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[u,...d]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...d].join("; "))}}if(_e.hasStandardBrowserEnv&&(n&&I.isFunction(n)&&(n=n(t)),n||n!==!1&&$h(t.url))){const u=i&&r&&Bh.read(r);u&&o.set(i,u)}return t},Hh=typeof XMLHttpRequest<"u",Wh=Hh&&function(e){return new Promise(function(a,n){const i=ed(e);let r=i.data;const o=$e.from(i.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=i,d,m,p,x,f;function v(){x&&x(),f&&f(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let g=new XMLHttpRequest;g.open(i.method.toUpperCase(),i.url,!0),g.timeout=i.timeout;function S(){if(!g)return;const C=$e.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),T={data:!l||l==="text"||l==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:C,config:e,request:g};Zc(function(N){a(N),v()},function(N){n(N),v()},T),g=null}"onloadend"in g?g.onloadend=S:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(S)},g.onabort=function(){g&&(n(new re("Request aborted",re.ECONNABORTED,e,g)),g=null)},g.onerror=function(){n(new re("Network Error",re.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let _=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const T=i.transitional||Jc;i.timeoutErrorMessage&&(_=i.timeoutErrorMessage),n(new re(_,T.clarifyTimeoutError?re.ETIMEDOUT:re.ECONNABORTED,e,g)),g=null},r===void 0&&o.setContentType(null),"setRequestHeader"in g&&I.forEach(o.toJSON(),function(_,T){g.setRequestHeader(T,_)}),I.isUndefined(i.withCredentials)||(g.withCredentials=!!i.withCredentials),l&&l!=="json"&&(g.responseType=i.responseType),u&&([p,f]=Aa(u,!0),g.addEventListener("progress",p)),c&&g.upload&&([m,x]=Aa(c),g.upload.addEventListener("progress",m),g.upload.addEventListener("loadend",x)),(i.cancelToken||i.signal)&&(d=C=>{g&&(n(!C||C.type?new ls(null,e,g):C),g.abort(),g=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const k=Fh(i.url);if(k&&_e.protocols.indexOf(k)===-1){n(new re("Unsupported protocol "+k+":",re.ERR_BAD_REQUEST,e));return}g.send(r||null)})},Kh=(e,t)=>{const{length:a}=e=e?e.filter(Boolean):[];if(t||a){let n=new AbortController,i;const r=function(u){if(!i){i=!0,l();const d=u instanceof Error?u:this.reason;n.abort(d instanceof re?d:new ls(d instanceof Error?d.message:d))}};let o=t&&setTimeout(()=>{o=null,r(new re(`timeout ${t} of ms exceeded`,re.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(r):u.removeEventListener("abort",r)}),e=null)};e.forEach(u=>u.addEventListener("abort",r));const{signal:c}=n;return c.unsubscribe=()=>I.asap(l),c}},Gh=function*(e,t){let a=e.byteLength;if(a<t){yield e;return}let n=0,i;for(;n<a;)i=n+t,yield e.slice(n,i),n=i},Jh=async function*(e,t){for await(const a of Xh(e))yield*Gh(a,t)},Xh=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:a,value:n}=await t.read();if(a)break;yield n}}finally{await t.cancel()}},so=(e,t,a,n)=>{const i=Jh(e,t);let r=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await i.next();if(u){l(),c.close();return}let m=d.byteLength;if(a){let p=r+=m;a(p)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),i.return()}},{highWaterMark:2})},ln=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",td=ln&&typeof ReadableStream=="function",Yh=ln&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),sd=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Zh=td&&sd(()=>{let e=!1;const t=new Request(_e.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),ao=64*1024,ni=td&&sd(()=>I.isReadableStream(new Response("").body)),Ra={stream:ni&&(e=>e.body)};ln&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Ra[t]&&(Ra[t]=I.isFunction(e[t])?a=>a[t]():(a,n)=>{throw new re(`Response type '${t}' is not supported`,re.ERR_NOT_SUPPORT,n)})})})(new Response);const Qh=async e=>{if(e==null)return 0;if(I.isBlob(e))return e.size;if(I.isSpecCompliantForm(e))return(await new Request(_e.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(I.isArrayBufferView(e)||I.isArrayBuffer(e))return e.byteLength;if(I.isURLSearchParams(e)&&(e=e+""),I.isString(e))return(await Yh(e)).byteLength},ef=async(e,t)=>{const a=I.toFiniteNumber(e.getContentLength());return a??Qh(t)},tf=ln&&(async e=>{let{url:t,method:a,data:n,signal:i,cancelToken:r,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:d,withCredentials:m="same-origin",fetchOptions:p}=ed(e);u=u?(u+"").toLowerCase():"text";let x=Kh([i,r&&r.toAbortSignal()],o),f;const v=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let g;try{if(c&&Zh&&a!=="get"&&a!=="head"&&(g=await ef(d,n))!==0){let T=new Request(t,{method:"POST",body:n,duplex:"half"}),V;if(I.isFormData(n)&&(V=T.headers.get("content-type"))&&d.setContentType(V),T.body){const[N,y]=Qr(g,Aa(eo(c)));n=so(T.body,ao,N,y)}}I.isString(m)||(m=m?"include":"omit");const S="credentials"in Request.prototype;f=new Request(t,{...p,signal:x,method:a.toUpperCase(),headers:d.normalize().toJSON(),body:n,duplex:"half",credentials:S?m:void 0});let k=await fetch(f,p);const C=ni&&(u==="stream"||u==="response");if(ni&&(l||C&&v)){const T={};["status","statusText","headers"].forEach(w=>{T[w]=k[w]});const V=I.toFiniteNumber(k.headers.get("content-length")),[N,y]=l&&Qr(V,Aa(eo(l),!0))||[];k=new Response(so(k.body,ao,N,()=>{y&&y(),v&&v()}),T)}u=u||"text";let _=await Ra[I.findKey(Ra,u)||"text"](k,e);return!C&&v&&v(),await new Promise((T,V)=>{Zc(T,V,{data:_,headers:$e.from(k.headers),status:k.status,statusText:k.statusText,config:e,request:f})})}catch(S){throw v&&v(),S&&S.name==="TypeError"&&/Load failed|fetch/i.test(S.message)?Object.assign(new re("Network Error",re.ERR_NETWORK,e,f),{cause:S.cause||S}):re.from(S,S&&S.code,e,f)}}),ii={http:xh,xhr:Wh,fetch:tf};I.forEach(ii,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const no=e=>`- ${e}`,sf=e=>I.isFunction(e)||e===null||e===!1,ad={getAdapter:e=>{e=I.isArray(e)?e:[e];const{length:t}=e;let a,n;const i={};for(let r=0;r<t;r++){a=e[r];let o;if(n=a,!sf(a)&&(n=ii[(o=String(a)).toLowerCase()],n===void 0))throw new re(`Unknown adapter '${o}'`);if(n)break;i[o||"#"+r]=n}if(!n){const r=Object.entries(i).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?r.length>1?`since :
`+r.map(no).join(`
`):" "+no(r[0]):"as no adapter specified";throw new re("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:ii};function On(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ls(null,e)}function io(e){return On(e),e.headers=$e.from(e.headers),e.data=En.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ad.getAdapter(e.adapter||Zs.adapter)(e).then(function(n){return On(e),n.data=En.call(e,e.transformResponse,n),n.headers=$e.from(n.headers),n},function(n){return Yc(n)||(On(e),n&&n.response&&(n.response.data=En.call(e,e.transformResponse,n.response),n.response.headers=$e.from(n.response.headers))),Promise.reject(n)})}const nd="1.10.0",cn={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{cn[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const ro={};cn.transitional=function(t,a,n){function i(r,o){return"[Axios v"+nd+"] Transitional option '"+r+"'"+o+(n?". "+n:"")}return(r,o,l)=>{if(t===!1)throw new re(i(o," has been removed"+(a?" in "+a:"")),re.ERR_DEPRECATED);return a&&!ro[o]&&(ro[o]=!0,console.warn(i(o," has been deprecated since v"+a+" and will be removed in the near future"))),t?t(r,o,l):!0}};cn.spelling=function(t){return(a,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function af(e,t,a){if(typeof e!="object")throw new re("options must be an object",re.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const r=n[i],o=t[r];if(o){const l=e[r],c=l===void 0||o(l,r,e);if(c!==!0)throw new re("option "+r+" must be "+c,re.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new re("Unknown option "+r,re.ERR_BAD_OPTION)}}const Na={assertOptions:af,validators:cn},tt=Na.validators;let Lt=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Yr,response:new Yr}}async request(t,a){try{return await this._request(t,a)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?r&&!String(n.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+r):n.stack=r}catch{}}throw n}}_request(t,a){typeof t=="string"?(a=a||{},a.url=t):a=t||{},a=It(this.defaults,a);const{transitional:n,paramsSerializer:i,headers:r}=a;n!==void 0&&Na.assertOptions(n,{silentJSONParsing:tt.transitional(tt.boolean),forcedJSONParsing:tt.transitional(tt.boolean),clarifyTimeoutError:tt.transitional(tt.boolean)},!1),i!=null&&(I.isFunction(i)?a.paramsSerializer={serialize:i}:Na.assertOptions(i,{encode:tt.function,serialize:tt.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Na.assertOptions(a,{baseUrl:tt.spelling("baseURL"),withXsrfToken:tt.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let o=r&&I.merge(r.common,r[a.method]);r&&I.forEach(["delete","get","head","post","put","patch","common"],f=>{delete r[f]}),a.headers=$e.concat(o,r);const l=[];let c=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(a)===!1||(c=c&&v.synchronous,l.unshift(v.fulfilled,v.rejected))});const u=[];this.interceptors.response.forEach(function(v){u.push(v.fulfilled,v.rejected)});let d,m=0,p;if(!c){const f=[io.bind(this),void 0];for(f.unshift.apply(f,l),f.push.apply(f,u),p=f.length,d=Promise.resolve(a);m<p;)d=d.then(f[m++],f[m++]);return d}p=l.length;let x=a;for(m=0;m<p;){const f=l[m++],v=l[m++];try{x=f(x)}catch(g){v.call(this,g);break}}try{d=io.call(this,x)}catch(f){return Promise.reject(f)}for(m=0,p=u.length;m<p;)d=d.then(u[m++],u[m++]);return d}getUri(t){t=It(this.defaults,t);const a=Qc(t.baseURL,t.url,t.allowAbsoluteUrls);return Gc(a,t.params,t.paramsSerializer)}};I.forEach(["delete","get","head","options"],function(t){Lt.prototype[t]=function(a,n){return this.request(It(n||{},{method:t,url:a,data:(n||{}).data}))}});I.forEach(["post","put","patch"],function(t){function a(n){return function(r,o,l){return this.request(It(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}Lt.prototype[t]=a(),Lt.prototype[t+"Form"]=a(!0)});let nf=class id{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(r){a=r});const n=this;this.promise.then(i=>{if(!n._listeners)return;let r=n._listeners.length;for(;r-- >0;)n._listeners[r](i);n._listeners=null}),this.promise.then=i=>{let r;const o=new Promise(l=>{n.subscribe(l),r=l}).then(i);return o.cancel=function(){n.unsubscribe(r)},o},t(function(r,o,l){n.reason||(n.reason=new ls(r,o,l),a(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const a=this._listeners.indexOf(t);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const t=new AbortController,a=n=>{t.abort(n)};return this.subscribe(a),t.signal.unsubscribe=()=>this.unsubscribe(a),t.signal}static source(){let t;return{token:new id(function(i){t=i}),cancel:t}}};function rf(e){return function(a){return e.apply(null,a)}}function of(e){return I.isObject(e)&&e.isAxiosError===!0}const ri={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ri).forEach(([e,t])=>{ri[t]=e});function rd(e){const t=new Lt(e),a=Mc(Lt.prototype.request,t);return I.extend(a,Lt.prototype,t,{allOwnKeys:!0}),I.extend(a,t,null,{allOwnKeys:!0}),a.create=function(i){return rd(It(e,i))},a}const ke=rd(Zs);ke.Axios=Lt;ke.CanceledError=ls;ke.CancelToken=nf;ke.isCancel=Yc;ke.VERSION=nd;ke.toFormData=on;ke.AxiosError=re;ke.Cancel=ke.CanceledError;ke.all=function(t){return Promise.all(t)};ke.spread=rf;ke.isAxiosError=of;ke.mergeConfig=It;ke.AxiosHeaders=$e;ke.formToJSON=e=>Xc(I.isHTMLForm(e)?new FormData(e):e);ke.getAdapter=ad.getAdapter;ke.HttpStatusCode=ri;ke.default=ke;const{Axios:l1,AxiosError:c1,CanceledError:d1,isCancel:u1,CancelToken:m1,VERSION:p1,all:h1,Cancel:f1,isAxiosError:x1,spread:g1,toFormData:y1,AxiosHeaders:v1,HttpStatusCode:b1,formToJSON:j1,getAdapter:w1,mergeConfig:N1}=ke,od=typeof window<"u"?`${window.location.protocol}//${window.location.host}`:"",Wi="access_token",Ki="refresh_token",Ft=()=>({access:localStorage.getItem(Wi)||void 0,refresh:localStorage.getItem(Ki)||void 0}),dn=(e,t)=>{e&&localStorage.setItem(Wi,e),t&&localStorage.setItem(Ki,t)},Ea=()=>{localStorage.removeItem(Wi),localStorage.removeItem(Ki)},U=ke.create({baseURL:od,withCredentials:!0});U.interceptors.request.use(e=>{const{access:t}=Ft();return t&&e.headers&&(e.headers.Authorization=`Bearer ${t}`),e});let Ln=!1,oi=[];const oo=(e,t)=>{oi.forEach(a=>{e?a.reject(e):a.resolve(t)}),oi=[]};U.interceptors.response.use(e=>e,async e=>{var a;const t=e.config;if(((a=e.response)==null?void 0:a.status)===401&&!t._retry){const{refresh:n}=Ft();if(!n)return Ea(),Promise.reject(e);if(Ln)return new Promise(function(i,r){oi.push({resolve:i,reject:r})}).then(i=>(t.headers&&(t.headers.Authorization=`Bearer ${i}`),U(t))).catch(i=>Promise.reject(i));t._retry=!0,Ln=!0;try{const i=await ke.post(`${od}/api/auth/refresh`,{refresh_token:n}),{access_token:r,refresh_token:o}=i.data;return dn(r,o),oo(void 0,r),t.headers&&(t.headers.Authorization=`Bearer ${r}`),U(t)}catch(i){return oo(i,void 0),Ea(),Promise.reject(i)}finally{Ln=!1}}return Promise.reject(e)});const lf=async()=>{const{access:e}=Ft();return e?(await U.get("/api/cart/")).data:{items:[]}},cf=async(e,t=1)=>(await U.post(`/api/cart/${e}`,null,{params:{qty:t}})).data,df=async(e,t)=>(await U.put(`/api/cart/${e}`,{quantity:t})).data,uf=async e=>{await U.delete(`/api/cart/${e}`)},mf=async()=>{await U.delete("/api/cart/")},pf=async(e,t)=>{try{const a=await U.post("/api/auth/register",{email:e,password:t});return dn(a.data.access_token,a.data.refresh_token),a.data}catch(a){throw a.response&&a.response.status===400?new Error("Пользователь с таким email уже существует"):new Error("Ошибка при регистрации")}},hf=async(e,t)=>{try{const a=new URLSearchParams;a.append("username",e),a.append("password",t);const n=await U.post("/api/auth/token",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});return dn(n.data.access_token,n.data.refresh_token),n.data}catch(a){if(a.response){if(a.response.status===401)throw new Error("Неверный email или пароль");if(a.response.status===404)throw new Error("Пользователь не найден")}throw new Error("Ошибка при входе")}},ff=async e=>{try{await U.post("/api/auth/logout",{body:{refresh_token:e}})}catch{}Ea()},ld=h.createContext(void 0),cd=({children:e})=>{const[t,a]=h.useState(()=>{const f=localStorage.getItem("user");if(f)try{return JSON.parse(f)}catch{return}}),[n,i]=h.useState(!0),[r,o]=h.useState(void 0),l=()=>o(void 0),c=async()=>{var f,v;o(void 0);try{const g=await U.get("/api/me");a(g.data),u(g.data)}catch(g){Ea(),a(void 0),o(((v=(f=g==null?void 0:g.response)==null?void 0:f.data)==null?void 0:v.detail)||g.message||"Ошибка загрузки профиля")}finally{i(!1)}};h.useEffect(()=>{const{access:f}=Ft();f?c():i(!1)},[]);const u=f=>{f?localStorage.setItem("user",JSON.stringify(f)):localStorage.removeItem("user")},d=f=>{a(f),u(f)},m=async(f,v)=>{var g,S;i(!0),o(void 0);try{const k=await hf(f,v);a(k.user),u(k.user)}catch(k){throw o(((S=(g=k==null?void 0:k.response)==null?void 0:g.data)==null?void 0:S.detail)||k.message||"Ошибка входа"),k}finally{i(!1)}},p=async(f,v)=>{var g,S;i(!0),o(void 0);try{const k=await pf(f,v);a(k.user),u(k.user)}catch(k){throw o(((S=(g=k==null?void 0:k.response)==null?void 0:g.data)==null?void 0:S.detail)||k.message||"Ошибка регистрации"),k}finally{i(!1)}},x=async()=>{var f,v;i(!0),o(void 0);try{await ff(Ft().refresh),a(void 0),u(void 0)}catch(g){throw o(((v=(f=g==null?void 0:g.response)==null?void 0:f.data)==null?void 0:v.detail)||g.message||"Ошибка выхода"),g}finally{i(!1)}};return s.jsx(ld.Provider,{value:{user:t,loading:n,login:m,register:p,logout:x,isAdmin:!!(t!=null&&t.is_admin),isModerator:!!(t!=null&&t.is_moderator),hasPanelAccess:!!(t!=null&&t.is_admin||t!=null&&t.is_moderator),updateUser:d,error:r,clearError:l},children:e})},Ee=()=>{const e=h.useContext(ld);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},dd=h.createContext(void 0),xf=({children:e})=>{const{user:t}=Ee(),[a,n]=h.useState([]);h.useEffect(()=>{t||localStorage.setItem("cart",JSON.stringify(a))},[a,t]),h.useEffect(()=>{(async()=>{if(t)try{const m=await lf();n(m.items.map(p=>({id:p.variant_id,item_id:p.item_id,name:p.name,price:p.price||0,quantity:p.quantity,image_url:p.image_url,size:p.size,color:p.color,stock:p.stock})))}catch(m){console.error(m)}else{const m=localStorage.getItem("cart");n(m?JSON.parse(m):[])}})()},[t]);const i=async d=>{if(t)try{await cf(d.id,d.quantity??1)}catch(m){console.error(m)}n(m=>{const p=m.find(f=>f.id===d.id),x=d.quantity??1;if(p){const f=p.stock??p.quantity+x;return m.map(v=>v.id===d.id?{...v,quantity:Math.min(v.quantity+x,f)}:v)}return[...m,{...d,quantity:x}]})},r=async d=>{if(t)try{await uf(d)}catch(m){console.error(m)}n(m=>m.filter(p=>p.id!==d))},o=async(d,m)=>{if(m<=0)return r(d);if(t)try{await df(d,m)}catch(p){console.error(p)}n(p=>p.map(x=>{if(x.id!==d)return x;const f=x.stock??m;return{...x,quantity:Math.min(m,f)}}))},l=async()=>{if(t)try{await mf()}catch(d){console.error(d)}n([])},c=a.reduce((d,m)=>d+m.quantity,0),u=a.reduce((d,m)=>d+m.quantity*m.price,0);return s.jsx(dd.Provider,{value:{items:a,totalItems:c,totalPrice:u,addItem:i,removeItem:r,updateQuantity:o,clearCart:l},children:e})},Qs=()=>{const e=h.useContext(dd);if(!e)throw new Error("useCart must be used within CartProvider");return e},Vt=async(e={})=>(await U.get("/api/items/",{params:e})).data,ud=async e=>(await U.get(`/api/items/${e}`)).data,gf=async e=>(await U.post("/api/items/",e,{headers:{"Content-Type":"multipart/form-data"}})).data,yf=async(e,t)=>(await U.put(`/api/items/${e}`,t)).data,vf=async e=>{await U.post(`/api/items/${e}/favorite`)},Gi=async(e=1)=>{const{access:t}=Ft();return t?(await U.get("/api/items/favorites",{params:{page:e}})).data:[]},bf=async(e=1)=>(await U.get("/api/items/history",{params:{page:e}})).data,jf=async()=>{await U.delete("/api/items/history")},Oa=async e=>(await U.get(`/api/items/${e}/comments`)).data,md=async(e,t)=>(await U.post(`/api/items/${e}/comments`,t)).data,pd=async(e,t)=>{await U.post(`/api/items/${e}/comments/${t}/like`)},hd=async(e,t)=>{await U.delete(`/api/items/${e}/comments/${t}`)},lo=async e=>(await U.get(`/api/items/${e}/variants`)).data,wf=async(e,t)=>(await U.post(`/api/items/${e}/variants`,t)).data,Nf=async(e,t)=>{await U.delete(`/api/items/${e}/variants/${t}`)},kf=async e=>(await U.get(`/api/items/${e}/images`)).data,Sf=async(e,t)=>{await U.delete(`/api/items/${e}/images/${t}`)},Cf=async()=>(await U.get("/api/items/moderator/analytics")).data,fd=h.createContext(void 0),Pf=({children:e})=>{const{user:t}=Ee(),[a,n]=h.useState([]),[i,r]=h.useState(!0);h.useEffect(()=>{(async()=>{if(t){r(!0);try{const u=await Gi();n(u.map(d=>d.id))}catch(u){n([]),console.error(u)}finally{r(!1)}}else n([]),r(!1)})()},[t==null?void 0:t.id]);const o=async c=>{if(!t)return;const u=a.includes(c);n(d=>u?d.filter(m=>m!==c):[...d,c]);try{await vf(c)}catch(d){n(m=>u?[...m,c]:m.filter(p=>p!==c)),console.error(d)}},l=c=>a.includes(c);return s.jsx(fd.Provider,{value:{favoriteIds:a,loading:i,toggleFavorite:o,isFavorite:l},children:e})},cs=()=>{const e=h.useContext(fd);if(!e)throw new Error("useFavorites must be used within FavoritesProvider");return e},Tf=async()=>{if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("/sw.js")}catch{}},Af=()=>{const e=window.deferredPrompt;e&&(e.prompt(),e.userChoice.then(t=>{t.outcome,window.deferredPrompt=null}))},Rf=()=>{Tf(),window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),window.deferredPrompt=e;const t=document.getElementById("install-button");t&&(t.style.display="block",t.addEventListener("click",Af))}),window.addEventListener("appinstalled",()=>{window.deferredPrompt=null;const e=document.getElementById("install-button");e&&(e.style.display="none")})};/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ef=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xd=(...e)=>e.filter((t,a,n)=>!!t&&n.indexOf(t)===a).join(" ");/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Of={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:i="",children:r,iconNode:o,...l},c)=>h.createElement("svg",{ref:c,...Of,width:t,height:t,stroke:e,strokeWidth:n?Number(a)*24/Number(t):a,className:xd("lucide",i),...l},[...o.map(([u,d])=>h.createElement(u,d)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=(e,t)=>{const a=h.forwardRef(({className:n,...i},r)=>h.createElement(Lf,{ref:r,iconNode:t,className:xd(`lucide-${Ef(e)}`,n),...i}));return a.displayName=`${e}`,a};/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=G("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=G("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=G("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=G("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=G("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=G("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=G("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=G("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mf=G("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=G("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=G("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=G("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=G("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=G("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=G("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=G("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=G("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=G("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=G("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vf=G("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=G("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=G("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=G("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=G("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=G("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=G("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=G("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=G("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=G("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=G("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=G("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=G("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=G("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=G("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=G("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=G("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=G("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=G("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=G("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=G("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=G("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=G("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=G("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=G("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=G("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=G("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=G("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=G("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=G("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=G("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=G("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=G("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=G("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=G("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=G("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=G("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=G("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kf=G("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=G("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gf=G("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jf=G("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=G("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=G("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=G("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yf=G("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=G("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=G("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=G("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function Pd(e){var t,a,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(a=Pd(e[t]))&&(n&&(n+=" "),n+=a)}else for(a in e)e[a]&&(n&&(n+=" "),n+=a);return n}function Ts(){for(var e,t,a=0,n="",i=arguments.length;a<i;a++)(e=arguments[a])&&(t=Pd(e))&&(n&&(n+=" "),n+=t);return n}const mo=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,po=Ts,Td=(e,t)=>a=>{var n;if((t==null?void 0:t.variants)==null)return po(e,a==null?void 0:a.class,a==null?void 0:a.className);const{variants:i,defaultVariants:r}=t,o=Object.keys(i).map(u=>{const d=a==null?void 0:a[u],m=r==null?void 0:r[u];if(d===null)return null;const p=mo(d)||mo(m);return i[u][p]}),l=a&&Object.entries(a).reduce((u,d)=>{let[m,p]=d;return p===void 0||(u[m]=p),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:m,className:p,...x}=d;return Object.entries(x).every(f=>{let[v,g]=f;return Array.isArray(g)?g.includes({...r,...l}[v]):{...r,...l}[v]===g})?[...u,m,p]:u},[]);return po(e,o,c,a==null?void 0:a.class,a==null?void 0:a.className)},sr="-",Qf=e=>{const t=tx(e),{conflictingClassGroups:a,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(sr);return l[0]===""&&l.length!==1&&l.shift(),Ad(l,t)||ex(o)},getConflictingClassGroupIds:(o,l)=>{const c=a[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},Ad=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const a=e[0],n=t.nextPart.get(a),i=n?Ad(e.slice(1),n):void 0;if(i)return i;if(t.validators.length===0)return;const r=e.join(sr);return(o=t.validators.find(({validator:l})=>l(r)))==null?void 0:o.classGroupId},ho=/^\[(.+)\]$/,ex=e=>{if(ho.test(e)){const t=ho.exec(e)[1],a=t==null?void 0:t.substring(0,t.indexOf(":"));if(a)return"arbitrary.."+a}},tx=e=>{const{theme:t,prefix:a}=e,n={nextPart:new Map,validators:[]};return ax(Object.entries(e.classGroups),a).forEach(([r,o])=>{ui(o,n,r,t)}),n},ui=(e,t,a,n)=>{e.forEach(i=>{if(typeof i=="string"){const r=i===""?t:fo(t,i);r.classGroupId=a;return}if(typeof i=="function"){if(sx(i)){ui(i(n),t,a,n);return}t.validators.push({validator:i,classGroupId:a});return}Object.entries(i).forEach(([r,o])=>{ui(o,fo(t,r),a,n)})})},fo=(e,t)=>{let a=e;return t.split(sr).forEach(n=>{a.nextPart.has(n)||a.nextPart.set(n,{nextPart:new Map,validators:[]}),a=a.nextPart.get(n)}),a},sx=e=>e.isThemeGetter,ax=(e,t)=>t?e.map(([a,n])=>{const i=n.map(r=>typeof r=="string"?t+r:typeof r=="object"?Object.fromEntries(Object.entries(r).map(([o,l])=>[t+o,l])):r);return[a,i]}):e,nx=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,a=new Map,n=new Map;const i=(r,o)=>{a.set(r,o),t++,t>e&&(t=0,n=a,a=new Map)};return{get(r){let o=a.get(r);if(o!==void 0)return o;if((o=n.get(r))!==void 0)return i(r,o),o},set(r,o){a.has(r)?a.set(r,o):i(r,o)}}},Rd="!",ix=e=>{const{separator:t,experimentalParseClassName:a}=e,n=t.length===1,i=t[0],r=t.length,o=l=>{const c=[];let u=0,d=0,m;for(let g=0;g<l.length;g++){let S=l[g];if(u===0){if(S===i&&(n||l.slice(g,g+r)===t)){c.push(l.slice(d,g)),d=g+r;continue}if(S==="/"){m=g;continue}}S==="["?u++:S==="]"&&u--}const p=c.length===0?l:l.substring(d),x=p.startsWith(Rd),f=x?p.substring(1):p,v=m&&m>d?m-d:void 0;return{modifiers:c,hasImportantModifier:x,baseClassName:f,maybePostfixModifierPosition:v}};return a?l=>a({className:l,parseClassName:o}):o},rx=e=>{if(e.length<=1)return e;const t=[];let a=[];return e.forEach(n=>{n[0]==="["?(t.push(...a.sort(),n),a=[]):a.push(n)}),t.push(...a.sort()),t},ox=e=>({cache:nx(e.cacheSize),parseClassName:ix(e),...Qf(e)}),lx=/\s+/,cx=(e,t)=>{const{parseClassName:a,getClassGroupId:n,getConflictingClassGroupIds:i}=t,r=[],o=e.trim().split(lx);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:x}=a(u);let f=!!x,v=n(f?p.substring(0,x):p);if(!v){if(!f){l=u+(l.length>0?" "+l:l);continue}if(v=n(p),!v){l=u+(l.length>0?" "+l:l);continue}f=!1}const g=rx(d).join(":"),S=m?g+Rd:g,k=S+v;if(r.includes(k))continue;r.push(k);const C=i(v,f);for(let _=0;_<C.length;++_){const T=C[_];r.push(S+T)}l=u+(l.length>0?" "+l:l)}return l};function dx(){let e=0,t,a,n="";for(;e<arguments.length;)(t=arguments[e++])&&(a=Ed(t))&&(n&&(n+=" "),n+=a);return n}const Ed=e=>{if(typeof e=="string")return e;let t,a="";for(let n=0;n<e.length;n++)e[n]&&(t=Ed(e[n]))&&(a&&(a+=" "),a+=t);return a};function ux(e,...t){let a,n,i,r=o;function o(c){const u=t.reduce((d,m)=>m(d),e());return a=ox(u),n=a.cache.get,i=a.cache.set,r=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=cx(c,a);return i(c,d),d}return function(){return r(dx.apply(null,arguments))}}const ye=e=>{const t=a=>a[e]||[];return t.isThemeGetter=!0,t},Od=/^\[(?:([a-z-]+):)?(.+)\]$/i,mx=/^\d+\/\d+$/,px=new Set(["px","full","screen"]),hx=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,fx=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,xx=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,gx=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,yx=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ut=e=>Zt(e)||px.has(e)||mx.test(e),xt=e=>us(e,"length",Cx),Zt=e=>!!e&&!Number.isNaN(Number(e)),_n=e=>us(e,"number",Zt),ys=e=>!!e&&Number.isInteger(Number(e)),vx=e=>e.endsWith("%")&&Zt(e.slice(0,-1)),oe=e=>Od.test(e),gt=e=>hx.test(e),bx=new Set(["length","size","percentage"]),jx=e=>us(e,bx,Ld),wx=e=>us(e,"position",Ld),Nx=new Set(["image","url"]),kx=e=>us(e,Nx,Tx),Sx=e=>us(e,"",Px),vs=()=>!0,us=(e,t,a)=>{const n=Od.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):a(n[2]):!1},Cx=e=>fx.test(e)&&!xx.test(e),Ld=()=>!1,Px=e=>gx.test(e),Tx=e=>yx.test(e),Ax=()=>{const e=ye("colors"),t=ye("spacing"),a=ye("blur"),n=ye("brightness"),i=ye("borderColor"),r=ye("borderRadius"),o=ye("borderSpacing"),l=ye("borderWidth"),c=ye("contrast"),u=ye("grayscale"),d=ye("hueRotate"),m=ye("invert"),p=ye("gap"),x=ye("gradientColorStops"),f=ye("gradientColorStopPositions"),v=ye("inset"),g=ye("margin"),S=ye("opacity"),k=ye("padding"),C=ye("saturate"),_=ye("scale"),T=ye("sepia"),V=ye("skew"),N=ye("space"),y=ye("translate"),w=()=>["auto","contain","none"],b=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",oe,t],M=()=>[oe,t],j=()=>["",ut,xt],P=()=>["auto",Zt,oe],D=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],E=()=>["solid","dashed","dotted","double","none"],O=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",oe],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>[Zt,oe];return{cacheSize:500,separator:":",theme:{colors:[vs],spacing:[ut,xt],blur:["none","",gt,oe],brightness:q(),borderColor:[e],borderRadius:["none","","full",gt,oe],borderSpacing:M(),borderWidth:j(),contrast:q(),grayscale:$(),hueRotate:q(),invert:$(),gap:M(),gradientColorStops:[e],gradientColorStopPositions:[vx,xt],inset:R(),margin:R(),opacity:q(),padding:M(),saturate:q(),scale:q(),sepia:$(),skew:q(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",oe]}],container:["container"],columns:[{columns:[gt]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...D(),oe]}],overflow:[{overflow:b()}],"overflow-x":[{"overflow-x":b()}],"overflow-y":[{"overflow-y":b()}],overscroll:[{overscroll:w()}],"overscroll-x":[{"overscroll-x":w()}],"overscroll-y":[{"overscroll-y":w()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ys,oe]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",oe]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",ys,oe]}],"grid-cols":[{"grid-cols":[vs]}],"col-start-end":[{col:["auto",{span:["full",ys,oe]},oe]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[vs]}],"row-start-end":[{row:["auto",{span:[ys,oe]},oe]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",oe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",oe]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...L()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...L(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...L(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[k]}],px:[{px:[k]}],py:[{py:[k]}],ps:[{ps:[k]}],pe:[{pe:[k]}],pt:[{pt:[k]}],pr:[{pr:[k]}],pb:[{pb:[k]}],pl:[{pl:[k]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",oe,t]}],"min-w":[{"min-w":[oe,t,"min","max","fit"]}],"max-w":[{"max-w":[oe,t,"none","full","min","max","fit","prose",{screen:[gt]},gt]}],h:[{h:[oe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[oe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[oe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[oe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",gt,xt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_n]}],"font-family":[{font:[vs]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",oe]}],"line-clamp":[{"line-clamp":["none",Zt,_n]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ut,oe]}],"list-image":[{"list-image":["none",oe]}],"list-style-type":[{list:["none","disc","decimal",oe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[S]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[S]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...E(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ut,xt]}],"underline-offset":[{"underline-offset":["auto",ut,oe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",oe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",oe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[S]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...D(),wx]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",jx]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},kx]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[r]}],"rounded-s":[{"rounded-s":[r]}],"rounded-e":[{"rounded-e":[r]}],"rounded-t":[{"rounded-t":[r]}],"rounded-r":[{"rounded-r":[r]}],"rounded-b":[{"rounded-b":[r]}],"rounded-l":[{"rounded-l":[r]}],"rounded-ss":[{"rounded-ss":[r]}],"rounded-se":[{"rounded-se":[r]}],"rounded-ee":[{"rounded-ee":[r]}],"rounded-es":[{"rounded-es":[r]}],"rounded-tl":[{"rounded-tl":[r]}],"rounded-tr":[{"rounded-tr":[r]}],"rounded-br":[{"rounded-br":[r]}],"rounded-bl":[{"rounded-bl":[r]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[S]}],"border-style":[{border:[...E(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[S]}],"divide-style":[{divide:E()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...E()]}],"outline-offset":[{"outline-offset":[ut,oe]}],"outline-w":[{outline:[ut,xt]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:j()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[S]}],"ring-offset-w":[{"ring-offset":[ut,xt]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",gt,Sx]}],"shadow-color":[{shadow:[vs]}],opacity:[{opacity:[S]}],"mix-blend":[{"mix-blend":[...O(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":O()}],filter:[{filter:["","none"]}],blur:[{blur:[a]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",gt,oe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[m]}],saturate:[{saturate:[C]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[a]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[S]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",oe]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",oe]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",oe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[ys,oe]}],"translate-x":[{"translate-x":[y]}],"translate-y":[{"translate-y":[y]}],"skew-x":[{"skew-x":[V]}],"skew-y":[{"skew-y":[V]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",oe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",oe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",oe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ut,xt,_n]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Rx=ux(Ax);function te(...e){return Rx(Ts(e))}const Ex=Td("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-95 select-none",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2 min-h-[44px]",sm:"h-9 rounded-md px-3 min-h-[40px]",lg:"h-11 rounded-md px-8 min-h-[48px]",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),z=h.forwardRef(({className:e,variant:t,size:a,asChild:n=!1,...i},r)=>{const o=n?ep:"button";return s.jsx(o,{className:te(Ex({variant:t,size:a,className:e})),ref:r,...i})});z.displayName="Button";const ar=h.createContext({});function hn(e){const t=h.useRef(null);return t.current===null&&(t.current=e()),t.current}const nr=typeof window<"u",ir=nr?h.useLayoutEffect:h.useEffect,fn=h.createContext(null);function rr(e,t){e.indexOf(t)===-1&&e.push(t)}function or(e,t){const a=e.indexOf(t);a>-1&&e.splice(a,1)}const mt=(e,t,a)=>a>t?t:a<e?e:a;let lr=()=>{};const pt={},_d=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Dd(e){return typeof e=="object"&&e!==null}const Md=e=>/^0[^.\s]+$/u.test(e);function cr(e){let t;return()=>(t===void 0&&(t=e()),t)}const Ge=e=>e,Ox=(e,t)=>a=>t(e(a)),ta=(...e)=>e.reduce(Ox),zs=(e,t,a)=>{const n=t-e;return n===0?1:(a-e)/n};class dr{constructor(){this.subscriptions=[]}add(t){return rr(this.subscriptions,t),()=>or(this.subscriptions,t)}notify(t,a,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,a,n);else for(let r=0;r<i;r++){const o=this.subscriptions[r];o&&o(t,a,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const nt=e=>e*1e3,it=e=>e/1e3;function Id(e,t){return t?e*(1e3/t):0}const Fd=(e,t,a)=>(((1-3*a+3*t)*e+(3*a-6*t))*e+3*t)*e,Lx=1e-7,_x=12;function Dx(e,t,a,n,i){let r,o,l=0;do o=t+(a-t)/2,r=Fd(o,n,i)-e,r>0?a=o:t=o;while(Math.abs(r)>Lx&&++l<_x);return o}function sa(e,t,a,n){if(e===t&&a===n)return Ge;const i=r=>Dx(r,0,1,e,a);return r=>r===0||r===1?r:Fd(i(r),t,n)}const Vd=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,zd=e=>t=>1-e(1-t),$d=sa(.33,1.53,.69,.99),ur=zd($d),Bd=Vd(ur),Ud=e=>(e*=2)<1?.5*ur(e):.5*(2-Math.pow(2,-10*(e-1))),mr=e=>1-Math.sin(Math.acos(e)),qd=zd(mr),Hd=Vd(mr),Mx=sa(.42,0,1,1),Ix=sa(0,0,.58,1),Wd=sa(.42,0,.58,1),Fx=e=>Array.isArray(e)&&typeof e[0]!="number",Kd=e=>Array.isArray(e)&&typeof e[0]=="number",Vx={linear:Ge,easeIn:Mx,easeInOut:Wd,easeOut:Ix,circIn:mr,circInOut:Hd,circOut:qd,backIn:ur,backInOut:Bd,backOut:$d,anticipate:Ud},zx=e=>typeof e=="string",xo=e=>{if(Kd(e)){lr(e.length===4);const[t,a,n,i]=e;return sa(t,a,n,i)}else if(zx(e))return Vx[e];return e},pa=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function $x(e,t){let a=new Set,n=new Set,i=!1,r=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){o.has(d)&&(u.schedule(d),e()),d(l)}const u={schedule:(d,m=!1,p=!1)=>{const f=p&&i?a:n;return m&&o.add(d),f.has(d)||f.add(d),d},cancel:d=>{n.delete(d),o.delete(d)},process:d=>{if(l=d,i){r=!0;return}i=!0,[a,n]=[n,a],a.forEach(c),a.clear(),i=!1,r&&(r=!1,u.process(d))}};return u}const Bx=40;function Gd(e,t){let a=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},r=()=>a=!0,o=pa.reduce((C,_)=>(C[_]=$x(r),C),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:m,preRender:p,render:x,postRender:f}=o,v=()=>{const C=pt.useManualTiming?i.timestamp:performance.now();a=!1,pt.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(C-i.timestamp,Bx),1)),i.timestamp=C,i.isProcessing=!0,l.process(i),c.process(i),u.process(i),d.process(i),m.process(i),p.process(i),x.process(i),f.process(i),i.isProcessing=!1,a&&t&&(n=!1,e(v))},g=()=>{a=!0,n=!0,i.isProcessing||e(v)};return{schedule:pa.reduce((C,_)=>{const T=o[_];return C[_]=(V,N=!1,y=!1)=>(a||g(),T.schedule(V,N,y)),C},{}),cancel:C=>{for(let _=0;_<pa.length;_++)o[pa[_]].cancel(C)},state:i,steps:o}}const{schedule:je,cancel:wt,state:Le,steps:Dn}=Gd(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ge,!0);let Sa;function Ux(){Sa=void 0}const Ve={now:()=>(Sa===void 0&&Ve.set(Le.isProcessing||pt.useManualTiming?Le.timestamp:performance.now()),Sa),set:e=>{Sa=e,queueMicrotask(Ux)}},Jd=e=>t=>typeof t=="string"&&t.startsWith(e),pr=Jd("--"),qx=Jd("var(--"),hr=e=>qx(e)?Hx.test(e.split("/*")[0].trim()):!1,Hx=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ms={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},$s={...ms,transform:e=>mt(0,1,e)},ha={...ms,default:1},As=e=>Math.round(e*1e5)/1e5,fr=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Wx(e){return e==null}const Kx=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,xr=(e,t)=>a=>!!(typeof a=="string"&&Kx.test(a)&&a.startsWith(e)||t&&!Wx(a)&&Object.prototype.hasOwnProperty.call(a,t)),Xd=(e,t,a)=>n=>{if(typeof n!="string")return n;const[i,r,o,l]=n.match(fr);return{[e]:parseFloat(i),[t]:parseFloat(r),[a]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},Gx=e=>mt(0,255,e),Mn={...ms,transform:e=>Math.round(Gx(e))},Et={test:xr("rgb","red"),parse:Xd("red","green","blue"),transform:({red:e,green:t,blue:a,alpha:n=1})=>"rgba("+Mn.transform(e)+", "+Mn.transform(t)+", "+Mn.transform(a)+", "+As($s.transform(n))+")"};function Jx(e){let t="",a="",n="",i="";return e.length>5?(t=e.substring(1,3),a=e.substring(3,5),n=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),a=e.substring(2,3),n=e.substring(3,4),i=e.substring(4,5),t+=t,a+=a,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(a,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const mi={test:xr("#"),parse:Jx,transform:Et.transform},aa=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),vt=aa("deg"),rt=aa("%"),ae=aa("px"),Xx=aa("vh"),Yx=aa("vw"),go={...rt,parse:e=>rt.parse(e)/100,transform:e=>rt.transform(e*100)},Kt={test:xr("hsl","hue"),parse:Xd("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:a,alpha:n=1})=>"hsla("+Math.round(e)+", "+rt.transform(As(t))+", "+rt.transform(As(a))+", "+As($s.transform(n))+")"},Te={test:e=>Et.test(e)||mi.test(e)||Kt.test(e),parse:e=>Et.test(e)?Et.parse(e):Kt.test(e)?Kt.parse(e):mi.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Et.transform(e):Kt.transform(e),getAnimatableNone:e=>{const t=Te.parse(e);return t.alpha=0,Te.transform(t)}},Zx=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Qx(e){var t,a;return isNaN(e)&&typeof e=="string"&&(((t=e.match(fr))==null?void 0:t.length)||0)+(((a=e.match(Zx))==null?void 0:a.length)||0)>0}const Yd="number",Zd="color",eg="var",tg="var(",yo="${}",sg=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Bs(e){const t=e.toString(),a=[],n={color:[],number:[],var:[]},i=[];let r=0;const l=t.replace(sg,c=>(Te.test(c)?(n.color.push(r),i.push(Zd),a.push(Te.parse(c))):c.startsWith(tg)?(n.var.push(r),i.push(eg),a.push(c)):(n.number.push(r),i.push(Yd),a.push(parseFloat(c))),++r,yo)).split(yo);return{values:a,split:l,indexes:n,types:i}}function Qd(e){return Bs(e).values}function eu(e){const{split:t,types:a}=Bs(e),n=t.length;return i=>{let r="";for(let o=0;o<n;o++)if(r+=t[o],i[o]!==void 0){const l=a[o];l===Yd?r+=As(i[o]):l===Zd?r+=Te.transform(i[o]):r+=i[o]}return r}}const ag=e=>typeof e=="number"?0:Te.test(e)?Te.getAnimatableNone(e):e;function ng(e){const t=Qd(e);return eu(e)(t.map(ag))}const Nt={test:Qx,parse:Qd,createTransformer:eu,getAnimatableNone:ng};function In(e,t,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?e+(t-e)*6*a:a<1/2?t:a<2/3?e+(t-e)*(2/3-a)*6:e}function ig({hue:e,saturation:t,lightness:a,alpha:n}){e/=360,t/=100,a/=100;let i=0,r=0,o=0;if(!t)i=r=o=a;else{const l=a<.5?a*(1+t):a+t-a*t,c=2*a-l;i=In(c,l,e+1/3),r=In(c,l,e),o=In(c,l,e-1/3)}return{red:Math.round(i*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:n}}function Fa(e,t){return a=>a>0?t:e}const be=(e,t,a)=>e+(t-e)*a,Fn=(e,t,a)=>{const n=e*e,i=a*(t*t-n)+n;return i<0?0:Math.sqrt(i)},rg=[mi,Et,Kt],og=e=>rg.find(t=>t.test(e));function vo(e){const t=og(e);if(!t)return!1;let a=t.parse(e);return t===Kt&&(a=ig(a)),a}const bo=(e,t)=>{const a=vo(e),n=vo(t);if(!a||!n)return Fa(e,t);const i={...a};return r=>(i.red=Fn(a.red,n.red,r),i.green=Fn(a.green,n.green,r),i.blue=Fn(a.blue,n.blue,r),i.alpha=be(a.alpha,n.alpha,r),Et.transform(i))},pi=new Set(["none","hidden"]);function lg(e,t){return pi.has(e)?a=>a<=0?e:t:a=>a>=1?t:e}function cg(e,t){return a=>be(e,t,a)}function gr(e){return typeof e=="number"?cg:typeof e=="string"?hr(e)?Fa:Te.test(e)?bo:mg:Array.isArray(e)?tu:typeof e=="object"?Te.test(e)?bo:dg:Fa}function tu(e,t){const a=[...e],n=a.length,i=e.map((r,o)=>gr(r)(r,t[o]));return r=>{for(let o=0;o<n;o++)a[o]=i[o](r);return a}}function dg(e,t){const a={...e,...t},n={};for(const i in a)e[i]!==void 0&&t[i]!==void 0&&(n[i]=gr(e[i])(e[i],t[i]));return i=>{for(const r in n)a[r]=n[r](i);return a}}function ug(e,t){const a=[],n={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const r=t.types[i],o=e.indexes[r][n[r]],l=e.values[o]??0;a[i]=l,n[r]++}return a}const mg=(e,t)=>{const a=Nt.createTransformer(t),n=Bs(e),i=Bs(t);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?pi.has(e)&&!i.values.length||pi.has(t)&&!n.values.length?lg(e,t):ta(tu(ug(n,i),i.values),a):Fa(e,t)};function su(e,t,a){return typeof e=="number"&&typeof t=="number"&&typeof a=="number"?be(e,t,a):gr(e)(e,t)}const pg=e=>{const t=({timestamp:a})=>e(a);return{start:(a=!0)=>je.update(t,a),stop:()=>wt(t),now:()=>Le.isProcessing?Le.timestamp:Ve.now()}},au=(e,t,a=10)=>{let n="";const i=Math.max(Math.round(t/a),2);for(let r=0;r<i;r++)n+=Math.round(e(r/(i-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Va=2e4;function yr(e){let t=0;const a=50;let n=e.next(t);for(;!n.done&&t<Va;)t+=a,n=e.next(t);return t>=Va?1/0:t}function hg(e,t=100,a){const n=a({...e,keyframes:[0,t]}),i=Math.min(yr(n),Va);return{type:"keyframes",ease:r=>n.next(i*r).value/t,duration:it(i)}}const fg=5;function nu(e,t,a){const n=Math.max(t-fg,0);return Id(a-e(n),t-n)}const we={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Vn=.001;function xg({duration:e=we.duration,bounce:t=we.bounce,velocity:a=we.velocity,mass:n=we.mass}){let i,r,o=1-t;o=mt(we.minDamping,we.maxDamping,o),e=mt(we.minDuration,we.maxDuration,it(e)),o<1?(i=u=>{const d=u*o,m=d*e,p=d-a,x=hi(u,o),f=Math.exp(-m);return Vn-p/x*f},r=u=>{const m=u*o*e,p=m*a+a,x=Math.pow(o,2)*Math.pow(u,2)*e,f=Math.exp(-m),v=hi(Math.pow(u,2),o);return(-i(u)+Vn>0?-1:1)*((p-x)*f)/v}):(i=u=>{const d=Math.exp(-u*e),m=(u-a)*e+1;return-Vn+d*m},r=u=>{const d=Math.exp(-u*e),m=(a-u)*(e*e);return d*m});const l=5/e,c=yg(i,r,l);if(e=nt(e),isNaN(c))return{stiffness:we.stiffness,damping:we.damping,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:e}}}const gg=12;function yg(e,t,a){let n=a;for(let i=1;i<gg;i++)n=n-e(n)/t(n);return n}function hi(e,t){return e*Math.sqrt(1-t*t)}const vg=["duration","bounce"],bg=["stiffness","damping","mass"];function jo(e,t){return t.some(a=>e[a]!==void 0)}function jg(e){let t={velocity:we.velocity,stiffness:we.stiffness,damping:we.damping,mass:we.mass,isResolvedFromDuration:!1,...e};if(!jo(e,bg)&&jo(e,vg))if(e.visualDuration){const a=e.visualDuration,n=2*Math.PI/(a*1.2),i=n*n,r=2*mt(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:we.mass,stiffness:i,damping:r}}else{const a=xg(e);t={...t,...a,mass:we.mass},t.isResolvedFromDuration=!0}return t}function za(e=we.visualDuration,t=we.bounce){const a=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:i}=a;const r=a.keyframes[0],o=a.keyframes[a.keyframes.length-1],l={done:!1,value:r},{stiffness:c,damping:u,mass:d,duration:m,velocity:p,isResolvedFromDuration:x}=jg({...a,velocity:-it(a.velocity||0)}),f=p||0,v=u/(2*Math.sqrt(c*d)),g=o-r,S=it(Math.sqrt(c/d)),k=Math.abs(g)<5;n||(n=k?we.restSpeed.granular:we.restSpeed.default),i||(i=k?we.restDelta.granular:we.restDelta.default);let C;if(v<1){const T=hi(S,v);C=V=>{const N=Math.exp(-v*S*V);return o-N*((f+v*S*g)/T*Math.sin(T*V)+g*Math.cos(T*V))}}else if(v===1)C=T=>o-Math.exp(-S*T)*(g+(f+S*g)*T);else{const T=S*Math.sqrt(v*v-1);C=V=>{const N=Math.exp(-v*S*V),y=Math.min(T*V,300);return o-N*((f+v*S*g)*Math.sinh(y)+T*g*Math.cosh(y))/T}}const _={calculatedDuration:x&&m||null,next:T=>{const V=C(T);if(x)l.done=T>=m;else{let N=T===0?f:0;v<1&&(N=T===0?nt(f):nu(C,T,V));const y=Math.abs(N)<=n,w=Math.abs(o-V)<=i;l.done=y&&w}return l.value=l.done?o:V,l},toString:()=>{const T=Math.min(yr(_),Va),V=au(N=>_.next(T*N).value,T,30);return T+"ms "+V},toTransition:()=>{}};return _}za.applyToOptions=e=>{const t=hg(e,100,za);return e.ease=t.ease,e.duration=nt(t.duration),e.type="keyframes",e};function fi({keyframes:e,velocity:t=0,power:a=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:r=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const m=e[0],p={done:!1,value:m},x=y=>l!==void 0&&y<l||c!==void 0&&y>c,f=y=>l===void 0?c:c===void 0||Math.abs(l-y)<Math.abs(c-y)?l:c;let v=a*t;const g=m+v,S=o===void 0?g:o(g);S!==g&&(v=S-m);const k=y=>-v*Math.exp(-y/n),C=y=>S+k(y),_=y=>{const w=k(y),b=C(y);p.done=Math.abs(w)<=u,p.value=p.done?S:b};let T,V;const N=y=>{x(p.value)&&(T=y,V=za({keyframes:[p.value,f(p.value)],velocity:nu(C,y,p.value),damping:i,stiffness:r,restDelta:u,restSpeed:d}))};return N(0),{calculatedDuration:null,next:y=>{let w=!1;return!V&&T===void 0&&(w=!0,_(y),N(y)),T!==void 0&&y>=T?V.next(y-T):(!w&&_(y),p)}}}function wg(e,t,a){const n=[],i=a||pt.mix||su,r=e.length-1;for(let o=0;o<r;o++){let l=i(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||Ge:t;l=ta(c,l)}n.push(l)}return n}function Ng(e,t,{clamp:a=!0,ease:n,mixer:i}={}){const r=e.length;if(lr(r===t.length),r===1)return()=>t[0];if(r===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[r-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=wg(t,n,i),c=l.length,u=d=>{if(o&&d<e[0])return t[0];let m=0;if(c>1)for(;m<e.length-2&&!(d<e[m+1]);m++);const p=zs(e[m],e[m+1],d);return l[m](p)};return a?d=>u(mt(e[0],e[r-1],d)):u}function kg(e,t){const a=e[e.length-1];for(let n=1;n<=t;n++){const i=zs(0,t,n);e.push(be(a,1,i))}}function Sg(e){const t=[0];return kg(t,e.length-1),t}function Cg(e,t){return e.map(a=>a*t)}function Pg(e,t){return e.map(()=>t||Wd).splice(0,e.length-1)}function Rs({duration:e=300,keyframes:t,times:a,ease:n="easeInOut"}){const i=Fx(n)?n.map(xo):xo(n),r={done:!1,value:t[0]},o=Cg(a&&a.length===t.length?a:Sg(t),e),l=Ng(o,t,{ease:Array.isArray(i)?i:Pg(t,i)});return{calculatedDuration:e,next:c=>(r.value=l(c),r.done=c>=e,r)}}const Tg=e=>e!==null;function vr(e,{repeat:t,repeatType:a="loop"},n,i=1){const r=e.filter(Tg),l=i<0||t&&a!=="loop"&&t%2===1?0:r.length-1;return!l||n===void 0?r[l]:n}const Ag={decay:fi,inertia:fi,tween:Rs,keyframes:Rs,spring:za};function iu(e){typeof e.type=="string"&&(e.type=Ag[e.type])}class br{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,a){return this.finished.then(t,a)}}const Rg=e=>e/100;class jr extends br{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,i;const{motionValue:a}=this.options;a&&a.updatedAt!==Ve.now()&&this.tick(Ve.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(n=this.options).onStop)==null||i.call(n))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;iu(t);const{type:a=Rs,repeat:n=0,repeatDelay:i=0,repeatType:r,velocity:o=0}=t;let{keyframes:l}=t;const c=a||Rs;c!==Rs&&typeof l[0]!="number"&&(this.mixKeyframes=ta(Rg,su(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});r==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=yr(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=u}updateTime(t){const a=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(t,a=!1){const{generator:n,totalDuration:i,mixKeyframes:r,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:d,repeat:m,repeatType:p,repeatDelay:x,type:f,onUpdate:v,finalKeyframe:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),a?this.currentTime=t:this.updateTime(t);const S=this.currentTime-u*(this.playbackSpeed>=0?1:-1),k=this.playbackSpeed>=0?S<0:S>i;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let C=this.currentTime,_=n;if(m){const y=Math.min(this.currentTime,i)/l;let w=Math.floor(y),b=y%1;!b&&y>=1&&(b=1),b===1&&w--,w=Math.min(w,m+1),!!(w%2)&&(p==="reverse"?(b=1-b,x&&(b-=x/l)):p==="mirror"&&(_=o)),C=mt(0,1,b)*l}const T=k?{done:!1,value:d[0]}:_.next(C);r&&(T.value=r(T.value));let{done:V}=T;!k&&c!==null&&(V=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const N=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return N&&f!==fi&&(T.value=vr(d,this.options,g,this.speed)),v&&v(T.value),N&&this.finish(),T}then(t,a){return this.finished.then(t,a)}get duration(){return it(this.calculatedDuration)}get time(){return it(this.currentTime)}set time(t){var a;t=nt(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(a=this.driver)==null||a.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Ve.now());const a=this.playbackSpeed!==t;this.playbackSpeed=t,a&&(this.time=it(this.currentTime))}play(){var i,r;if(this.isStopped)return;const{driver:t=pg,startTime:a}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(r=(i=this.options).onPlay)==null||r.call(i);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=a??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ve.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,a;this.notifyFinished(),this.teardown(),this.state="finished",(a=(t=this.options).onComplete)==null||a.call(t)}cancel(){var t,a;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(a=(t=this.options).onCancel)==null||a.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var a;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(a=this.driver)==null||a.stop(),t.observe(this)}}function Eg(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Ot=e=>e*180/Math.PI,xi=e=>{const t=Ot(Math.atan2(e[1],e[0]));return gi(t)},Og={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:xi,rotateZ:xi,skewX:e=>Ot(Math.atan(e[1])),skewY:e=>Ot(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},gi=e=>(e=e%360,e<0&&(e+=360),e),wo=xi,No=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),ko=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Lg={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:No,scaleY:ko,scale:e=>(No(e)+ko(e))/2,rotateX:e=>gi(Ot(Math.atan2(e[6],e[5]))),rotateY:e=>gi(Ot(Math.atan2(-e[2],e[0]))),rotateZ:wo,rotate:wo,skewX:e=>Ot(Math.atan(e[4])),skewY:e=>Ot(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function yi(e){return e.includes("scale")?1:0}function vi(e,t){if(!e||e==="none")return yi(t);const a=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(a)n=Lg,i=a;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=Og,i=l}if(!i)return yi(t);const r=n[t],o=i[1].split(",").map(Dg);return typeof r=="function"?r(o):o[r]}const _g=(e,t)=>{const{transform:a="none"}=getComputedStyle(e);return vi(a,t)};function Dg(e){return parseFloat(e.trim())}const ps=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],hs=new Set(ps),So=e=>e===ms||e===ae,Mg=new Set(["x","y","z"]),Ig=ps.filter(e=>!Mg.has(e));function Fg(e){const t=[];return Ig.forEach(a=>{const n=e.getValue(a);n!==void 0&&(t.push([a,n.get()]),n.set(a.startsWith("scale")?1:0))}),t}const _t={width:({x:e},{paddingLeft:t="0",paddingRight:a="0"})=>e.max-e.min-parseFloat(t)-parseFloat(a),height:({y:e},{paddingTop:t="0",paddingBottom:a="0"})=>e.max-e.min-parseFloat(t)-parseFloat(a),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>vi(t,"x"),y:(e,{transform:t})=>vi(t,"y")};_t.translateX=_t.x;_t.translateY=_t.y;const Dt=new Set;let bi=!1,ji=!1,wi=!1;function ru(){if(ji){const e=Array.from(Dt).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),a=new Map;t.forEach(n=>{const i=Fg(n);i.length&&(a.set(n,i),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const i=a.get(n);i&&i.forEach(([r,o])=>{var l;(l=n.getValue(r))==null||l.set(o)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}ji=!1,bi=!1,Dt.forEach(e=>e.complete(wi)),Dt.clear()}function ou(){Dt.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(ji=!0)})}function Vg(){wi=!0,ou(),ru(),wi=!1}class wr{constructor(t,a,n,i,r,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=a,this.name=n,this.motionValue=i,this.element=r,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Dt.add(this),bi||(bi=!0,je.read(ou),je.resolveKeyframes(ru))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:a,element:n,motionValue:i}=this;if(t[0]===null){const r=i==null?void 0:i.get(),o=t[t.length-1];if(r!==void 0)t[0]=r;else if(n&&a){const l=n.readValue(a,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&r===void 0&&i.set(t[0])}Eg(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Dt.delete(this)}cancel(){this.state==="scheduled"&&(Dt.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const zg=e=>e.startsWith("--");function $g(e,t,a){zg(t)?e.style.setProperty(t,a):e.style[t]=a}const Bg=cr(()=>window.ScrollTimeline!==void 0),Ug={};function qg(e,t){const a=cr(e);return()=>Ug[t]??a()}const lu=qg(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ws=([e,t,a,n])=>`cubic-bezier(${e}, ${t}, ${a}, ${n})`,Co={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ws([0,.65,.55,1]),circOut:ws([.55,0,1,.45]),backIn:ws([.31,.01,.66,-.59]),backOut:ws([.33,1.53,.69,.99])};function cu(e,t){if(e)return typeof e=="function"?lu()?au(e,t):"ease-out":Kd(e)?ws(e):Array.isArray(e)?e.map(a=>cu(a,t)||Co.easeOut):Co[e]}function Hg(e,t,a,{delay:n=0,duration:i=300,repeat:r=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[t]:a};c&&(d.offset=c);const m=cu(l,i);Array.isArray(m)&&(d.easing=m);const p={delay:n,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"};return u&&(p.pseudoElement=u),e.animate(d,p)}function du(e){return typeof e=="function"&&"applyToOptions"in e}function Wg({type:e,...t}){return du(e)&&lu()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class Kg extends br{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:a,name:n,keyframes:i,pseudoElement:r,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!r,this.allowFlatten=o,this.options=t,lr(typeof t.type!="string");const u=Wg(t);this.animation=Hg(a,n,i,u,r),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const d=vr(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):$g(a,n,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,a;(a=(t=this.animation).finish)==null||a.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,a;this.isPseudoElement||(a=(t=this.animation).commitStyles)==null||a.call(t)}get duration(){var a,n;const t=((n=(a=this.animation.effect)==null?void 0:a.getComputedTiming)==null?void 0:n.call(a).duration)||0;return it(Number(t))}get time(){return it(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=nt(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:a}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&Bg()?(this.animation.timeline=t,Ge):a(this)}}const uu={anticipate:Ud,backInOut:Bd,circInOut:Hd};function Gg(e){return e in uu}function Jg(e){typeof e.ease=="string"&&Gg(e.ease)&&(e.ease=uu[e.ease])}const Po=10;class Xg extends Kg{constructor(t){Jg(t),iu(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:a,onUpdate:n,onComplete:i,element:r,...o}=this.options;if(!a)return;if(t!==void 0){a.set(t);return}const l=new jr({...o,autoplay:!1}),c=nt(this.finishedTime??this.time);a.setWithVelocity(l.sample(c-Po).value,l.sample(c).value,Po),l.stop()}}const To=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Nt.test(e)||e==="0")&&!e.startsWith("url("));function Yg(e){const t=e[0];if(e.length===1)return!0;for(let a=0;a<e.length;a++)if(e[a]!==t)return!0}function Zg(e,t,a,n){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const r=e[e.length-1],o=To(i,t),l=To(r,t);return!o||!l?!1:Yg(e)||(a==="spring"||du(a))&&n}function Nr(e){return Dd(e)&&"offsetHeight"in e}const Qg=new Set(["opacity","clipPath","filter","transform"]),ey=cr(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function ty(e){var u;const{motionValue:t,name:a,repeatDelay:n,repeatType:i,damping:r,type:o}=e;if(!Nr((u=t==null?void 0:t.owner)==null?void 0:u.current))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return ey()&&a&&Qg.has(a)&&(a!=="transform"||!c)&&!l&&!n&&i!=="mirror"&&r!==0&&o!=="inertia"}const sy=40;class ay extends br{constructor({autoplay:t=!0,delay:a=0,type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:d,...m}){var f;super(),this.stop=()=>{var v,g;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(g=this.keyframeResolver)==null||g.cancel()},this.createdAt=Ve.now();const p={autoplay:t,delay:a,type:n,repeat:i,repeatDelay:r,repeatType:o,name:c,motionValue:u,element:d,...m},x=(d==null?void 0:d.KeyframeResolver)||wr;this.keyframeResolver=new x(l,(v,g,S)=>this.onKeyframesResolved(v,g,p,!S),c,u,d),(f=this.keyframeResolver)==null||f.scheduleResolve()}onKeyframesResolved(t,a,n,i){this.keyframeResolver=void 0;const{name:r,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:d}=n;this.resolvedAt=Ve.now(),Zg(t,r,o,l)||((pt.instantAnimations||!c)&&(d==null||d(vr(t,n,a))),t[0]=t[t.length-1],n.duration=0,n.repeat=0);const p={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>sy?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...n,keyframes:t},x=!u&&ty(p)?new Xg({...p,element:p.motionValue.owner.current}):new jr(p);x.finished.then(()=>this.notifyFinished()).catch(Ge),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(t,a){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),Vg()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const ny=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function iy(e){const t=ny.exec(e);if(!t)return[,];const[,a,n,i]=t;return[`--${a??n}`,i]}function mu(e,t,a=1){const[n,i]=iy(e);if(!n)return;const r=window.getComputedStyle(t).getPropertyValue(n);if(r){const o=r.trim();return _d(o)?parseFloat(o):o}return hr(i)?mu(i,t,a+1):i}function kr(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const pu=new Set(["width","height","top","left","right","bottom",...ps]),ry={test:e=>e==="auto",parse:e=>e},hu=e=>t=>t.test(e),fu=[ms,ae,rt,vt,Yx,Xx,ry],Ao=e=>fu.find(hu(e));function oy(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Md(e):!0}const ly=new Set(["brightness","contrast","saturate","opacity"]);function cy(e){const[t,a]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=a.match(fr)||[];if(!n)return e;const i=a.replace(n,"");let r=ly.has(t)?1:0;return n!==a&&(r*=100),t+"("+r+i+")"}const dy=/\b([a-z-]*)\(.*?\)/gu,Ni={...Nt,getAnimatableNone:e=>{const t=e.match(dy);return t?t.map(cy).join(" "):e}},Ro={...ms,transform:Math.round},uy={rotate:vt,rotateX:vt,rotateY:vt,rotateZ:vt,scale:ha,scaleX:ha,scaleY:ha,scaleZ:ha,skew:vt,skewX:vt,skewY:vt,distance:ae,translateX:ae,translateY:ae,translateZ:ae,x:ae,y:ae,z:ae,perspective:ae,transformPerspective:ae,opacity:$s,originX:go,originY:go,originZ:ae},Sr={borderWidth:ae,borderTopWidth:ae,borderRightWidth:ae,borderBottomWidth:ae,borderLeftWidth:ae,borderRadius:ae,radius:ae,borderTopLeftRadius:ae,borderTopRightRadius:ae,borderBottomRightRadius:ae,borderBottomLeftRadius:ae,width:ae,maxWidth:ae,height:ae,maxHeight:ae,top:ae,right:ae,bottom:ae,left:ae,padding:ae,paddingTop:ae,paddingRight:ae,paddingBottom:ae,paddingLeft:ae,margin:ae,marginTop:ae,marginRight:ae,marginBottom:ae,marginLeft:ae,backgroundPositionX:ae,backgroundPositionY:ae,...uy,zIndex:Ro,fillOpacity:$s,strokeOpacity:$s,numOctaves:Ro},my={...Sr,color:Te,backgroundColor:Te,outlineColor:Te,fill:Te,stroke:Te,borderColor:Te,borderTopColor:Te,borderRightColor:Te,borderBottomColor:Te,borderLeftColor:Te,filter:Ni,WebkitFilter:Ni},xu=e=>my[e];function gu(e,t){let a=xu(e);return a!==Ni&&(a=Nt),a.getAnimatableNone?a.getAnimatableNone(t):void 0}const py=new Set(["auto","none","0"]);function hy(e,t,a){let n=0,i;for(;n<e.length&&!i;){const r=e[n];typeof r=="string"&&!py.has(r)&&Bs(r).values.length&&(i=e[n]),n++}if(i&&a)for(const r of t)e[r]=gu(a,i)}class fy extends wr{constructor(t,a,n,i,r){super(t,a,n,i,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:a,name:n}=this;if(!a||!a.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),hr(u))){const d=mu(u,a.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!pu.has(n)||t.length!==2)return;const[i,r]=t,o=Ao(i),l=Ao(r);if(o!==l)if(So(o)&&So(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else _t[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:a}=this,n=[];for(let i=0;i<t.length;i++)(t[i]===null||oy(t[i]))&&n.push(i);n.length&&hy(t,n,a)}measureInitialState(){const{element:t,unresolvedKeyframes:a,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=_t[n](t.measureViewportBox(),window.getComputedStyle(t.current)),a[0]=this.measuredOrigin;const i=a[a.length-1];i!==void 0&&t.getValue(n,i).jump(i,!1)}measureEndState(){var l;const{element:t,name:a,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const i=t.getValue(a);i&&i.jump(this.measuredOrigin,!1);const r=n.length-1,o=n[r];n[r]=_t[a](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function xy(e,t,a){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const i=(a==null?void 0:a[e])??n.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const yu=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Eo=30,gy=e=>!isNaN(parseFloat(e));class yy{constructor(t,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{var o,l;const r=Ve.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty();i&&((l=this.events.renderRequest)==null||l.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=a.owner}setCurrent(t){this.current=t,this.updatedAt=Ve.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=gy(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,a){this.events[t]||(this.events[t]=new dr);const n=this.events[t].add(a);return t==="change"?()=>{n(),je.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,a){this.passiveEffect=t,this.stopPassiveEffect=a}set(t,a=!0){!a||!this.passiveEffect?this.updateAndNotify(t,a):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,a,n){this.set(a),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,a=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ve.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Eo)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,Eo);return Id(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(t){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=t(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,a;(t=this.dependents)==null||t.clear(),(a=this.events.destroy)==null||a.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ts(e,t){return new yy(e,t)}const{schedule:Cr}=Gd(queueMicrotask,!1),Xe={x:!1,y:!1};function vu(){return Xe.x||Xe.y}function vy(e){return e==="x"||e==="y"?Xe[e]?null:(Xe[e]=!0,()=>{Xe[e]=!1}):Xe.x||Xe.y?null:(Xe.x=Xe.y=!0,()=>{Xe.x=Xe.y=!1})}function bu(e,t){const a=xy(e),n=new AbortController,i={passive:!0,...t,signal:n.signal};return[a,i,()=>n.abort()]}function Oo(e){return!(e.pointerType==="touch"||vu())}function by(e,t,a={}){const[n,i,r]=bu(e,a),o=l=>{if(!Oo(l))return;const{target:c}=l,u=t(c,l);if(typeof u!="function"||!c)return;const d=m=>{Oo(m)&&(u(m),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,i)};return n.forEach(l=>{l.addEventListener("pointerenter",o,i)}),r}const ju=(e,t)=>t?e===t?!0:ju(e,t.parentElement):!1,Pr=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,jy=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function wy(e){return jy.has(e.tagName)||e.tabIndex!==-1}const Ca=new WeakSet;function Lo(e){return t=>{t.key==="Enter"&&e(t)}}function zn(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Ny=(e,t)=>{const a=e.currentTarget;if(!a)return;const n=Lo(()=>{if(Ca.has(a))return;zn(a,"down");const i=Lo(()=>{zn(a,"up")}),r=()=>zn(a,"cancel");a.addEventListener("keyup",i,t),a.addEventListener("blur",r,t)});a.addEventListener("keydown",n,t),a.addEventListener("blur",()=>a.removeEventListener("keydown",n),t)};function _o(e){return Pr(e)&&!vu()}function ky(e,t,a={}){const[n,i,r]=bu(e,a),o=l=>{const c=l.currentTarget;if(!_o(l))return;Ca.add(c);const u=t(c,l),d=(x,f)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",p),Ca.has(c)&&Ca.delete(c),_o(x)&&typeof u=="function"&&u(x,{success:f})},m=x=>{d(x,c===window||c===document||a.useGlobalTarget||ju(c,x.target))},p=x=>{d(x,!1)};window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",p,i)};return n.forEach(l=>{(a.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),Nr(l)&&(l.addEventListener("focus",u=>Ny(u,i)),!wy(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),r}function wu(e){return Dd(e)&&"ownerSVGElement"in e}function Sy(e){return wu(e)&&e.tagName==="svg"}const De=e=>!!(e&&e.getVelocity),Cy=[...fu,Te,Nt],Py=e=>Cy.find(hu(e)),Tr=h.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class Ty extends h.Component{getSnapshotBeforeUpdate(t){const a=this.props.childRef.current;if(a&&t.isPresent&&!this.props.isPresent){const n=a.offsetParent,i=Nr(n)&&n.offsetWidth||0,r=this.props.sizeRef.current;r.height=a.offsetHeight||0,r.width=a.offsetWidth||0,r.top=a.offsetTop,r.left=a.offsetLeft,r.right=i-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Ay({children:e,isPresent:t,anchorX:a}){const n=h.useId(),i=h.useRef(null),r=h.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=h.useContext(Tr);return h.useInsertionEffect(()=>{const{width:l,height:c,top:u,left:d,right:m}=r.current;if(t||!i.current||!l||!c)return;const p=a==="left"?`left: ${d}`:`right: ${m}`;i.current.dataset.motionPopId=n;const x=document.createElement("style");return o&&(x.nonce=o),document.head.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            ${p}px !important;
            top: ${u}px !important;
          }
        `),()=>{document.head.contains(x)&&document.head.removeChild(x)}},[t]),s.jsx(Ty,{isPresent:t,childRef:i,sizeRef:r,children:h.cloneElement(e,{ref:i})})}const Ry=({children:e,initial:t,isPresent:a,onExitComplete:n,custom:i,presenceAffectsLayout:r,mode:o,anchorX:l})=>{const c=hn(Ey),u=h.useId();let d=!0,m=h.useMemo(()=>(d=!1,{id:u,initial:t,isPresent:a,custom:i,onExitComplete:p=>{c.set(p,!0);for(const x of c.values())if(!x)return;n&&n()},register:p=>(c.set(p,!1),()=>c.delete(p))}),[a,c,n]);return r&&d&&(m={...m}),h.useMemo(()=>{c.forEach((p,x)=>c.set(x,!1))},[a]),h.useEffect(()=>{!a&&!c.size&&n&&n()},[a]),o==="popLayout"&&(e=s.jsx(Ay,{isPresent:a,anchorX:l,children:e})),s.jsx(fn.Provider,{value:m,children:e})};function Ey(){return new Map}function Nu(e=!0){const t=h.useContext(fn);if(t===null)return[!0,null];const{isPresent:a,onExitComplete:n,register:i}=t,r=h.useId();h.useEffect(()=>{if(e)return i(r)},[e]);const o=h.useCallback(()=>e&&n&&n(r),[r,n,e]);return!a&&n?[!1,o]:[!0]}const fa=e=>e.key||"";function Do(e){const t=[];return h.Children.forEach(e,a=>{h.isValidElement(a)&&t.push(a)}),t}const Oy=({children:e,custom:t,initial:a=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:r="sync",propagate:o=!1,anchorX:l="left"})=>{const[c,u]=Nu(o),d=h.useMemo(()=>Do(e),[e]),m=o&&!c?[]:d.map(fa),p=h.useRef(!0),x=h.useRef(d),f=hn(()=>new Map),[v,g]=h.useState(d),[S,k]=h.useState(d);ir(()=>{p.current=!1,x.current=d;for(let T=0;T<S.length;T++){const V=fa(S[T]);m.includes(V)?f.delete(V):f.get(V)!==!0&&f.set(V,!1)}},[S,m.length,m.join("-")]);const C=[];if(d!==v){let T=[...d];for(let V=0;V<S.length;V++){const N=S[V],y=fa(N);m.includes(y)||(T.splice(V,0,N),C.push(N))}return r==="wait"&&C.length&&(T=C),k(Do(T)),g(d),null}const{forceRender:_}=h.useContext(ar);return s.jsx(s.Fragment,{children:S.map(T=>{const V=fa(T),N=o&&!c?!1:d===S||m.includes(V),y=()=>{if(f.has(V))f.set(V,!0);else return;let w=!0;f.forEach(b=>{b||(w=!1)}),w&&(_==null||_(),k(x.current),o&&(u==null||u()),n&&n())};return s.jsx(Ry,{isPresent:N,initial:!p.current||a?void 0:!1,custom:t,presenceAffectsLayout:i,mode:r,onExitComplete:N?void 0:y,anchorX:l,children:T},V)})})},ku=h.createContext({strict:!1}),Mo={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ss={};for(const e in Mo)ss[e]={isEnabled:t=>Mo[e].some(a=>!!t[a])};function Ly(e){for(const t in e)ss[t]={...ss[t],...e[t]}}const _y=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $a(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||_y.has(e)}let Su=e=>!$a(e);function Dy(e){typeof e=="function"&&(Su=t=>t.startsWith("on")?!$a(t):e(t))}try{Dy(require("@emotion/is-prop-valid").default)}catch{}function My(e,t,a){const n={};for(const i in e)i==="values"&&typeof e.values=="object"||(Su(i)||a===!0&&$a(i)||!t&&!$a(i)||e.draggable&&i.startsWith("onDrag"))&&(n[i]=e[i]);return n}function Iy(e){if(typeof Proxy>"u")return e;const t=new Map,a=(...n)=>e(...n);return new Proxy(a,{get:(n,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}const xn=h.createContext({});function gn(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Us(e){return typeof e=="string"||Array.isArray(e)}const Ar=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Rr=["initial",...Ar];function yn(e){return gn(e.animate)||Rr.some(t=>Us(e[t]))}function Cu(e){return!!(yn(e)||e.variants)}function Fy(e,t){if(yn(e)){const{initial:a,animate:n}=e;return{initial:a===!1||Us(a)?a:void 0,animate:Us(n)?n:void 0}}return e.inherit!==!1?t:{}}function Vy(e){const{initial:t,animate:a}=Fy(e,h.useContext(xn));return h.useMemo(()=>({initial:t,animate:a}),[Io(t),Io(a)])}function Io(e){return Array.isArray(e)?e.join(" "):e}const zy=Symbol.for("motionComponentSymbol");function Gt(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function $y(e,t,a){return h.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),a&&(typeof a=="function"?a(n):Gt(a)&&(a.current=n))},[t])}const Er=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),By="framerAppearId",Pu="data-"+Er(By),Tu=h.createContext({});function Uy(e,t,a,n,i){var v,g;const{visualElement:r}=h.useContext(xn),o=h.useContext(ku),l=h.useContext(fn),c=h.useContext(Tr).reducedMotion,u=h.useRef(null);n=n||o.renderer,!u.current&&n&&(u.current=n(e,{visualState:t,parent:r,props:a,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,m=h.useContext(Tu);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&qy(u.current,a,i,m);const p=h.useRef(!1);h.useInsertionEffect(()=>{d&&p.current&&d.update(a,l)});const x=a[Pu],f=h.useRef(!!x&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,x))&&((g=window.MotionHasOptimisedAnimation)==null?void 0:g.call(window,x)));return ir(()=>{d&&(p.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),Cr.render(d.render),f.current&&d.animationState&&d.animationState.animateChanges())}),h.useEffect(()=>{d&&(!f.current&&d.animationState&&d.animationState.animateChanges(),f.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)==null||S.call(window,x)}),f.current=!1))}),d}function qy(e,t,a,n){const{layoutId:i,layout:r,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new a(e.latestValues,t["data-framer-portal-id"]?void 0:Au(e.parent)),e.projection.setOptions({layoutId:i,layout:r,alwaysMeasureLayout:!!o||l&&Gt(l),visualElement:e,animationType:typeof r=="string"?r:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:c,layoutRoot:u})}function Au(e){if(e)return e.options.allowProjection!==!1?e.projection:Au(e.parent)}function Hy({preloadedFeatures:e,createVisualElement:t,useRender:a,useVisualState:n,Component:i}){e&&Ly(e);function r(l,c){let u;const d={...h.useContext(Tr),...l,layoutId:Wy(l)},{isStatic:m}=d,p=Vy(l),x=n(l,m);if(!m&&nr){Ky();const f=Gy(d);u=f.MeasureLayout,p.visualElement=Uy(i,x,d,t,f.ProjectionNode)}return s.jsxs(xn.Provider,{value:p,children:[u&&p.visualElement?s.jsx(u,{visualElement:p.visualElement,...d}):null,a(i,l,$y(x,p.visualElement,c),x,m,p.visualElement)]})}r.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const o=h.forwardRef(r);return o[zy]=i,o}function Wy({layoutId:e}){const t=h.useContext(ar).id;return t&&e!==void 0?t+"-"+e:e}function Ky(e,t){h.useContext(ku).strict}function Gy(e){const{drag:t,layout:a}=ss;if(!t&&!a)return{};const n={...t,...a};return{MeasureLayout:t!=null&&t.isEnabled(e)||a!=null&&a.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const qs={};function Jy(e){for(const t in e)qs[t]=e[t],pr(t)&&(qs[t].isCSSVariable=!0)}function Ru(e,{layout:t,layoutId:a}){return hs.has(e)||e.startsWith("origin")||(t||a!==void 0)&&(!!qs[e]||e==="opacity")}const Xy={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Yy=ps.length;function Zy(e,t,a){let n="",i=!0;for(let r=0;r<Yy;r++){const o=ps[r],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||a){const u=yu(l,Sr[o]);if(!c){i=!1;const d=Xy[o]||o;n+=`${d}(${u}) `}a&&(t[o]=u)}}return n=n.trim(),a?n=a(t,i?"":n):i&&(n="none"),n}function Or(e,t,a){const{style:n,vars:i,transformOrigin:r}=e;let o=!1,l=!1;for(const c in t){const u=t[c];if(hs.has(c)){o=!0;continue}else if(pr(c)){i[c]=u;continue}else{const d=yu(u,Sr[c]);c.startsWith("origin")?(l=!0,r[c]=d):n[c]=d}}if(t.transform||(o||a?n.transform=Zy(t,e.transform,a):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=r;n.transformOrigin=`${c} ${u} ${d}`}}const Lr=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Eu(e,t,a){for(const n in t)!De(t[n])&&!Ru(n,a)&&(e[n]=t[n])}function Qy({transformTemplate:e},t){return h.useMemo(()=>{const a=Lr();return Or(a,t,e),Object.assign({},a.vars,a.style)},[t])}function ev(e,t){const a=e.style||{},n={};return Eu(n,a,e),Object.assign(n,Qy(e,t)),n}function tv(e,t){const a={},n=ev(e,t);return e.drag&&e.dragListener!==!1&&(a.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(a.tabIndex=0),a.style=n,a}const sv={offset:"stroke-dashoffset",array:"stroke-dasharray"},av={offset:"strokeDashoffset",array:"strokeDasharray"};function nv(e,t,a=1,n=0,i=!0){e.pathLength=1;const r=i?sv:av;e[r.offset]=ae.transform(-n);const o=ae.transform(t),l=ae.transform(a);e[r.array]=`${o} ${l}`}function Ou(e,{attrX:t,attrY:a,attrScale:n,pathLength:i,pathSpacing:r=1,pathOffset:o=0,...l},c,u,d){if(Or(e,l,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:p}=e;m.transform&&(p.transform=m.transform,delete m.transform),(p.transform||m.transformOrigin)&&(p.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),p.transform&&(p.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete m.transformBox),t!==void 0&&(m.x=t),a!==void 0&&(m.y=a),n!==void 0&&(m.scale=n),i!==void 0&&nv(m,i,r,o,!1)}const Lu=()=>({...Lr(),attrs:{}}),_u=e=>typeof e=="string"&&e.toLowerCase()==="svg";function iv(e,t,a,n){const i=h.useMemo(()=>{const r=Lu();return Ou(r,t,_u(n),e.transformTemplate,e.style),{...r.attrs,style:{...r.style}}},[t]);if(e.style){const r={};Eu(r,e.style,e),i.style={...r,...i.style}}return i}const rv=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function _r(e){return typeof e!="string"||e.includes("-")?!1:!!(rv.indexOf(e)>-1||/[A-Z]/u.test(e))}function ov(e=!1){return(a,n,i,{latestValues:r},o)=>{const c=(_r(a)?iv:tv)(n,r,o,a),u=My(n,typeof a=="string",e),d=a!==h.Fragment?{...u,...c,ref:i}:{},{children:m}=n,p=h.useMemo(()=>De(m)?m.get():m,[m]);return h.createElement(a,{...d,children:p})}}function Fo(e){const t=[{},{}];return e==null||e.values.forEach((a,n)=>{t[0][n]=a.get(),t[1][n]=a.getVelocity()}),t}function Dr(e,t,a,n){if(typeof t=="function"){const[i,r]=Fo(n);t=t(a!==void 0?a:e.custom,i,r)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,r]=Fo(n);t=t(a!==void 0?a:e.custom,i,r)}return t}function Pa(e){return De(e)?e.get():e}function lv({scrapeMotionValuesFromProps:e,createRenderState:t},a,n,i){return{latestValues:cv(a,n,i,e),renderState:t()}}const Du=e=>(t,a)=>{const n=h.useContext(xn),i=h.useContext(fn),r=()=>lv(e,t,n,i);return a?r():hn(r)};function cv(e,t,a,n){const i={},r=n(e,{});for(const p in r)i[p]=Pa(r[p]);let{initial:o,animate:l}=e;const c=yn(e),u=Cu(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let d=a?a.initial===!1:!1;d=d||o===!1;const m=d?l:o;if(m&&typeof m!="boolean"&&!gn(m)){const p=Array.isArray(m)?m:[m];for(let x=0;x<p.length;x++){const f=Dr(e,p[x]);if(f){const{transitionEnd:v,transition:g,...S}=f;for(const k in S){let C=S[k];if(Array.isArray(C)){const _=d?C.length-1:0;C=C[_]}C!==null&&(i[k]=C)}for(const k in v)i[k]=v[k]}}}return i}function Mr(e,t,a){var r;const{style:n}=e,i={};for(const o in n)(De(n[o])||t.style&&De(t.style[o])||Ru(o,e)||((r=a==null?void 0:a.getValue(o))==null?void 0:r.liveStyle)!==void 0)&&(i[o]=n[o]);return i}const dv={useVisualState:Du({scrapeMotionValuesFromProps:Mr,createRenderState:Lr})};function Mu(e,t,a){const n=Mr(e,t,a);for(const i in e)if(De(e[i])||De(t[i])){const r=ps.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=e[i]}return n}const uv={useVisualState:Du({scrapeMotionValuesFromProps:Mu,createRenderState:Lu})};function mv(e,t){return function(n,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={..._r(n)?uv:dv,preloadedFeatures:e,useRender:ov(i),createVisualElement:t,Component:n};return Hy(o)}}function Hs(e,t,a){const n=e.getProps();return Dr(n,t,a!==void 0?a:n.custom,e)}const ki=e=>Array.isArray(e);function pv(e,t,a){e.hasValue(t)?e.getValue(t).set(a):e.addValue(t,ts(a))}function hv(e){return ki(e)?e[e.length-1]||0:e}function Ir(e,t){const a=Hs(e,t);let{transitionEnd:n={},transition:i={},...r}=a||{};r={...r,...n};for(const o in r){const l=hv(r[o]);pv(e,o,l)}}function fv(e){return!!(De(e)&&e.add)}function Si(e,t){const a=e.getValue("willChange");if(fv(a))return a.add(t);if(!a&&pt.WillChange){const n=new pt.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function Iu(e){return e.props[Pu]}const xv=e=>e!==null;function gv(e,{repeat:t,repeatType:a="loop"},n){const i=e.filter(xv),r=t&&a!=="loop"&&t%2===1?0:i.length-1;return i[r]}const yv={type:"spring",stiffness:500,damping:25,restSpeed:10},vv=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),bv={type:"keyframes",duration:.8},jv={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},wv=(e,{keyframes:t})=>t.length>2?bv:hs.has(e)?e.startsWith("scale")?vv(t[1]):yv:jv;function Nv({when:e,delay:t,delayChildren:a,staggerChildren:n,staggerDirection:i,repeat:r,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const Fr=(e,t,a,n={},i,r)=>o=>{const l=kr(n,e)||{},c=l.delay||n.delay||0;let{elapsed:u=0}=n;u=u-nt(c);const d={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:p=>{t.set(p),l.onUpdate&&l.onUpdate(p)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:r?void 0:i};Nv(l)||Object.assign(d,wv(e,d)),d.duration&&(d.duration=nt(d.duration)),d.repeatDelay&&(d.repeatDelay=nt(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let m=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(m=!0)),(pt.instantAnimations||pt.skipAnimations)&&(m=!0,d.duration=0,d.delay=0),d.allowFlatten=!l.type&&!l.ease,m&&!r&&t.get()!==void 0){const p=gv(d.keyframes,l);if(p!==void 0){je.update(()=>{d.onUpdate(p),d.onComplete()});return}}return l.isSync?new jr(d):new ay(d)};function kv({protectedKeys:e,needsAnimating:t},a){const n=e.hasOwnProperty(a)&&t[a]!==!0;return t[a]=!1,n}function Fu(e,t,{delay:a=0,transitionOverride:n,type:i}={}){let{transition:r=e.getDefaultTransition(),transitionEnd:o,...l}=t;n&&(r=n);const c=[],u=i&&e.animationState&&e.animationState.getState()[i];for(const d in l){const m=e.getValue(d,e.latestValues[d]??null),p=l[d];if(p===void 0||u&&kv(u,d))continue;const x={delay:a,...kr(r||{},d)},f=m.get();if(f!==void 0&&!m.isAnimating&&!Array.isArray(p)&&p===f&&!x.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const S=Iu(e);if(S){const k=window.MotionHandoffAnimation(S,d,je);k!==null&&(x.startTime=k,v=!0)}}Si(e,d),m.start(Fr(d,m,p,e.shouldReduceMotion&&pu.has(d)?{type:!1}:x,e,v));const g=m.animation;g&&c.push(g)}return o&&Promise.all(c).then(()=>{je.update(()=>{o&&Ir(e,o)})}),c}function Ci(e,t,a={}){var c;const n=Hs(e,t,a.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=n||{};a.transitionOverride&&(i=a.transitionOverride);const r=n?()=>Promise.all(Fu(e,n,a)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:m,staggerDirection:p}=i;return Sv(e,t,d+u,m,p,a)}:()=>Promise.resolve(),{when:l}=i;if(l){const[u,d]=l==="beforeChildren"?[r,o]:[o,r];return u().then(()=>d())}else return Promise.all([r(),o(a.delay)])}function Sv(e,t,a=0,n=0,i=1,r){const o=[],l=(e.variantChildren.size-1)*n,c=i===1?(u=0)=>u*n:(u=0)=>l-u*n;return Array.from(e.variantChildren).sort(Cv).forEach((u,d)=>{u.notify("AnimationStart",t),o.push(Ci(u,t,{...r,delay:a+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function Cv(e,t){return e.sortNodePosition(t)}function Vu(e,t,a={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const i=t.map(r=>Ci(e,r,a));n=Promise.all(i)}else if(typeof t=="string")n=Ci(e,t,a);else{const i=typeof t=="function"?Hs(e,t,a.custom):t;n=Promise.all(Fu(e,i,a))}return n.then(()=>{e.notify("AnimationComplete",t)})}function zu(e,t){if(!Array.isArray(t))return!1;const a=t.length;if(a!==e.length)return!1;for(let n=0;n<a;n++)if(t[n]!==e[n])return!1;return!0}const Pv=Rr.length;function $u(e){if(!e)return;if(!e.isControllingVariants){const a=e.parent?$u(e.parent)||{}:{};return e.props.initial!==void 0&&(a.initial=e.props.initial),a}const t={};for(let a=0;a<Pv;a++){const n=Rr[a],i=e.props[n];(Us(i)||i===!1)&&(t[n]=i)}return t}const Tv=[...Ar].reverse(),Av=Ar.length;function Rv(e){return t=>Promise.all(t.map(({animation:a,options:n})=>Vu(e,a,n)))}function Ev(e){let t=Rv(e),a=Vo(),n=!0;const i=c=>(u,d)=>{var p;const m=Hs(e,d,c==="exit"?(p=e.presenceContext)==null?void 0:p.custom:void 0);if(m){const{transition:x,transitionEnd:f,...v}=m;u={...u,...v,...f}}return u};function r(c){t=c(e)}function o(c){const{props:u}=e,d=$u(e.parent)||{},m=[],p=new Set;let x={},f=1/0;for(let g=0;g<Av;g++){const S=Tv[g],k=a[S],C=u[S]!==void 0?u[S]:d[S],_=Us(C),T=S===c?k.isActive:null;T===!1&&(f=g);let V=C===d[S]&&C!==u[S]&&_;if(V&&n&&e.manuallyAnimateOnMount&&(V=!1),k.protectedKeys={...x},!k.isActive&&T===null||!C&&!k.prevProp||gn(C)||typeof C=="boolean")continue;const N=Ov(k.prevProp,C);let y=N||S===c&&k.isActive&&!V&&_||g>f&&_,w=!1;const b=Array.isArray(C)?C:[C];let R=b.reduce(i(S),{});T===!1&&(R={});const{prevResolvedValues:M={}}=k,j={...M,...R},P=O=>{y=!0,p.has(O)&&(w=!0,p.delete(O)),k.needsAnimating[O]=!0;const L=e.getValue(O);L&&(L.liveStyle=!1)};for(const O in j){const L=R[O],$=M[O];if(x.hasOwnProperty(O))continue;let B=!1;ki(L)&&ki($)?B=!zu(L,$):B=L!==$,B?L!=null?P(O):p.add(O):L!==void 0&&p.has(O)?P(O):k.protectedKeys[O]=!0}k.prevProp=C,k.prevResolvedValues=R,k.isActive&&(x={...x,...R}),n&&e.blockInitialAnimation&&(y=!1),y&&(!(V&&N)||w)&&m.push(...b.map(O=>({animation:O,options:{type:S}})))}if(p.size){const g={};if(typeof u.initial!="boolean"){const S=Hs(e,Array.isArray(u.initial)?u.initial[0]:u.initial);S&&S.transition&&(g.transition=S.transition)}p.forEach(S=>{const k=e.getBaseTarget(S),C=e.getValue(S);C&&(C.liveStyle=!0),g[S]=k??null}),m.push({animation:g})}let v=!!m.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(v=!1),n=!1,v?t(m):Promise.resolve()}function l(c,u){var m;if(a[c].isActive===u)return Promise.resolve();(m=e.variantChildren)==null||m.forEach(p=>{var x;return(x=p.animationState)==null?void 0:x.setActive(c,u)}),a[c].isActive=u;const d=o(c);for(const p in a)a[p].protectedKeys={};return d}return{animateChanges:o,setActive:l,setAnimateFunction:r,getState:()=>a,reset:()=>{a=Vo(),n=!0}}}function Ov(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!zu(t,e):!1}function Pt(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Vo(){return{animate:Pt(!0),whileInView:Pt(),whileHover:Pt(),whileTap:Pt(),whileDrag:Pt(),whileFocus:Pt(),exit:Pt()}}class St{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Lv extends St{constructor(t){super(t),t.animationState||(t.animationState=Ev(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();gn(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:a}=this.node.prevProps||{};t!==a&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let _v=0;class Dv extends St{constructor(){super(...arguments),this.id=_v++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:a}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const i=this.node.animationState.setActive("exit",!t);a&&!t&&i.then(()=>{a(this.id)})}mount(){const{register:t,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Mv={animation:{Feature:Lv},exit:{Feature:Dv}};function Ws(e,t,a,n={passive:!0}){return e.addEventListener(t,a,n),()=>e.removeEventListener(t,a)}function na(e){return{point:{x:e.pageX,y:e.pageY}}}const Iv=e=>t=>Pr(t)&&e(t,na(t));function Es(e,t,a,n){return Ws(e,t,Iv(a),n)}function Bu({top:e,left:t,right:a,bottom:n}){return{x:{min:t,max:a},y:{min:e,max:n}}}function Fv({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Vv(e,t){if(!t)return e;const a=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:a.y,left:a.x,bottom:n.y,right:n.x}}const Uu=1e-4,zv=1-Uu,$v=1+Uu,qu=.01,Bv=0-qu,Uv=0+qu;function Fe(e){return e.max-e.min}function qv(e,t,a){return Math.abs(e-t)<=a}function zo(e,t,a,n=.5){e.origin=n,e.originPoint=be(t.min,t.max,e.origin),e.scale=Fe(a)/Fe(t),e.translate=be(a.min,a.max,e.origin)-e.originPoint,(e.scale>=zv&&e.scale<=$v||isNaN(e.scale))&&(e.scale=1),(e.translate>=Bv&&e.translate<=Uv||isNaN(e.translate))&&(e.translate=0)}function Os(e,t,a,n){zo(e.x,t.x,a.x,n?n.originX:void 0),zo(e.y,t.y,a.y,n?n.originY:void 0)}function $o(e,t,a){e.min=a.min+t.min,e.max=e.min+Fe(t)}function Hv(e,t,a){$o(e.x,t.x,a.x),$o(e.y,t.y,a.y)}function Bo(e,t,a){e.min=t.min-a.min,e.max=e.min+Fe(t)}function Ls(e,t,a){Bo(e.x,t.x,a.x),Bo(e.y,t.y,a.y)}const Uo=()=>({translate:0,scale:1,origin:0,originPoint:0}),Jt=()=>({x:Uo(),y:Uo()}),qo=()=>({min:0,max:0}),Se=()=>({x:qo(),y:qo()});function Ke(e){return[e("x"),e("y")]}function $n(e){return e===void 0||e===1}function Pi({scale:e,scaleX:t,scaleY:a}){return!$n(e)||!$n(t)||!$n(a)}function Tt(e){return Pi(e)||Hu(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Hu(e){return Ho(e.x)||Ho(e.y)}function Ho(e){return e&&e!=="0%"}function Ba(e,t,a){const n=e-a,i=t*n;return a+i}function Wo(e,t,a,n,i){return i!==void 0&&(e=Ba(e,i,n)),Ba(e,a,n)+t}function Ti(e,t=0,a=1,n,i){e.min=Wo(e.min,t,a,n,i),e.max=Wo(e.max,t,a,n,i)}function Wu(e,{x:t,y:a}){Ti(e.x,t.translate,t.scale,t.originPoint),Ti(e.y,a.translate,a.scale,a.originPoint)}const Ko=.999999999999,Go=1.0000000000001;function Wv(e,t,a,n=!1){const i=a.length;if(!i)return;t.x=t.y=1;let r,o;for(let l=0;l<i;l++){r=a[l],o=r.projectionDelta;const{visualElement:c}=r.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Yt(e,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Wu(e,o)),n&&Tt(r.latestValues)&&Yt(e,r.latestValues))}t.x<Go&&t.x>Ko&&(t.x=1),t.y<Go&&t.y>Ko&&(t.y=1)}function Xt(e,t){e.min=e.min+t,e.max=e.max+t}function Jo(e,t,a,n,i=.5){const r=be(e.min,e.max,i);Ti(e,t,a,r,n)}function Yt(e,t){Jo(e.x,t.x,t.scaleX,t.scale,t.originX),Jo(e.y,t.y,t.scaleY,t.scale,t.originY)}function Ku(e,t){return Bu(Vv(e.getBoundingClientRect(),t))}function Kv(e,t,a){const n=Ku(e,a),{scroll:i}=t;return i&&(Xt(n.x,i.offset.x),Xt(n.y,i.offset.y)),n}const Gu=({current:e})=>e?e.ownerDocument.defaultView:null,Xo=(e,t)=>Math.abs(e-t);function Gv(e,t){const a=Xo(e.x,t.x),n=Xo(e.y,t.y);return Math.sqrt(a**2+n**2)}class Ju{constructor(t,a,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Un(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,x=Gv(m.offset,{x:0,y:0})>=3;if(!p&&!x)return;const{point:f}=m,{timestamp:v}=Le;this.history.push({...f,timestamp:v});const{onStart:g,onMove:S}=this.handlers;p||(g&&g(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,m)},this.handlePointerMove=(m,p)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Bn(p,this.transformPagePoint),je.update(this.updatePoint,!0)},this.handlePointerUp=(m,p)=>{this.end();const{onEnd:x,onSessionEnd:f,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Un(m.type==="pointercancel"?this.lastMoveEventInfo:Bn(p,this.transformPagePoint),this.history);this.startEvent&&x&&x(m,g),f&&f(m,g)},!Pr(t))return;this.dragSnapToOrigin=r,this.handlers=a,this.transformPagePoint=n,this.contextWindow=i||window;const o=na(t),l=Bn(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=Le;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=a;d&&d(t,Un(l,this.history)),this.removeListeners=ta(Es(this.contextWindow,"pointermove",this.handlePointerMove),Es(this.contextWindow,"pointerup",this.handlePointerUp),Es(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),wt(this.updatePoint)}}function Bn(e,t){return t?{point:t(e.point)}:e}function Yo(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Un({point:e},t){return{point:e,delta:Yo(e,Xu(t)),offset:Yo(e,Jv(t)),velocity:Xv(t,.1)}}function Jv(e){return e[0]}function Xu(e){return e[e.length-1]}function Xv(e,t){if(e.length<2)return{x:0,y:0};let a=e.length-1,n=null;const i=Xu(e);for(;a>=0&&(n=e[a],!(i.timestamp-n.timestamp>nt(t)));)a--;if(!n)return{x:0,y:0};const r=it(i.timestamp-n.timestamp);if(r===0)return{x:0,y:0};const o={x:(i.x-n.x)/r,y:(i.y-n.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Yv(e,{min:t,max:a},n){return t!==void 0&&e<t?e=n?be(t,e,n.min):Math.max(e,t):a!==void 0&&e>a&&(e=n?be(a,e,n.max):Math.min(e,a)),e}function Zo(e,t,a){return{min:t!==void 0?e.min+t:void 0,max:a!==void 0?e.max+a-(e.max-e.min):void 0}}function Zv(e,{top:t,left:a,bottom:n,right:i}){return{x:Zo(e.x,a,i),y:Zo(e.y,t,n)}}function Qo(e,t){let a=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([a,n]=[n,a]),{min:a,max:n}}function Qv(e,t){return{x:Qo(e.x,t.x),y:Qo(e.y,t.y)}}function e0(e,t){let a=.5;const n=Fe(e),i=Fe(t);return i>n?a=zs(t.min,t.max-n,e.min):n>i&&(a=zs(e.min,e.max-i,t.min)),mt(0,1,a)}function t0(e,t){const a={};return t.min!==void 0&&(a.min=t.min-e.min),t.max!==void 0&&(a.max=t.max-e.min),a}const Ai=.35;function s0(e=Ai){return e===!1?e=0:e===!0&&(e=Ai),{x:el(e,"left","right"),y:el(e,"top","bottom")}}function el(e,t,a){return{min:tl(e,t),max:tl(e,a)}}function tl(e,t){return typeof e=="number"?e:e[t]||0}const a0=new WeakMap;class n0{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Se(),this.visualElement=t}start(t,{snapToCursor:a=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(na(d).point)},r=(d,m)=>{const{drag:p,dragPropagation:x,onDragStart:f}=this.getProps();if(p&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=vy(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ke(g=>{let S=this.getAxisMotionValue(g).get()||0;if(rt.test(S)){const{projection:k}=this.visualElement;if(k&&k.layout){const C=k.layout.layoutBox[g];C&&(S=Fe(C)*(parseFloat(S)/100))}}this.originPoint[g]=S}),f&&je.postRender(()=>f(d,m)),Si(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(d,m)=>{const{dragPropagation:p,dragDirectionLock:x,onDirectionLock:f,onDrag:v}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:g}=m;if(x&&this.currentDirection===null){this.currentDirection=i0(g),this.currentDirection!==null&&f&&f(this.currentDirection);return}this.updateAxis("x",m.point,g),this.updateAxis("y",m.point,g),this.visualElement.render(),v&&v(d,m)},l=(d,m)=>this.stop(d,m),c=()=>Ke(d=>{var m;return this.getAnimationState(d)==="paused"&&((m=this.getAxisMotionValue(d).animation)==null?void 0:m.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Ju(t,{onSessionStart:i,onStart:r,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:Gu(this.visualElement)})}stop(t,a){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=a;this.startAnimation(i);const{onDragEnd:r}=this.getProps();r&&je.postRender(()=>r(t,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:a}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(t,a,n){const{drag:i}=this.getProps();if(!n||!xa(t,i,this.currentDirection))return;const r=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=Yv(o,this.constraints[t],this.elastic[t])),r.set(o)}resolveConstraints(){var r;const{dragConstraints:t,dragElastic:a}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,i=this.constraints;t&&Gt(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=Zv(n.layoutBox,t):this.constraints=!1,this.elastic=s0(a),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Ke(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=t0(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:a}=this.getProps();if(!t||!Gt(t))return!1;const n=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=Kv(n,i.root,this.visualElement.getTransformPagePoint());let o=Qv(i.layout.layoutBox,r);if(a){const l=a(Fv(o));this.hasMutatedConstraints=!!l,l&&(o=Bu(l))}return o}startAnimation(t){const{drag:a,dragMomentum:n,dragElastic:i,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Ke(d=>{if(!xa(d,a,this.currentDirection))return;let m=c&&c[d]||{};o&&(m={min:0,max:0});const p=i?200:1e6,x=i?40:1e7,f={type:"inertia",velocity:n?t[d]:0,bounceStiffness:p,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...r,...m};return this.startAxisValueAnimation(d,f)});return Promise.all(u).then(l)}startAxisValueAnimation(t,a){const n=this.getAxisMotionValue(t);return Si(this.visualElement,t),n.start(Fr(t,n,0,a,this.visualElement,!1))}stopAnimation(){Ke(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ke(t=>{var a;return(a=this.getAxisMotionValue(t).animation)==null?void 0:a.pause()})}getAnimationState(t){var a;return(a=this.getAxisMotionValue(t).animation)==null?void 0:a.state}getAxisMotionValue(t){const a=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),i=n[a];return i||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Ke(a=>{const{drag:n}=this.getProps();if(!xa(a,n,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(a);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[a];r.set(t[a]-be(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:a}=this.getProps(),{projection:n}=this.visualElement;if(!Gt(a)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ke(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();i[o]=e0({min:c,max:c},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ke(o=>{if(!xa(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(be(c,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;a0.set(this.visualElement,this);const t=this.visualElement.current,a=Es(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Gt(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,r=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),je.read(n);const o=Ws(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ke(d=>{const m=this.getAxisMotionValue(d);m&&(this.originPoint[d]+=c[d].translate,m.set(m.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),a(),r(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:o=Ai,dragMomentum:l=!0}=t;return{...t,drag:a,dragDirectionLock:n,dragPropagation:i,dragConstraints:r,dragElastic:o,dragMomentum:l}}}function xa(e,t,a){return(t===!0||t===e)&&(a===null||a===e)}function i0(e,t=10){let a=null;return Math.abs(e.y)>t?a="y":Math.abs(e.x)>t&&(a="x"),a}class r0 extends St{constructor(t){super(t),this.removeGroupControls=Ge,this.removeListeners=Ge,this.controls=new n0(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ge}unmount(){this.removeGroupControls(),this.removeListeners()}}const sl=e=>(t,a)=>{e&&je.postRender(()=>e(t,a))};class o0 extends St{constructor(){super(...arguments),this.removePointerDownListener=Ge}onPointerDown(t){this.session=new Ju(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Gu(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:a,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:sl(t),onStart:sl(a),onMove:n,onEnd:(r,o)=>{delete this.session,i&&je.postRender(()=>i(r,o))}}}mount(){this.removePointerDownListener=Es(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ta={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function al(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const bs={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ae.test(e))e=parseFloat(e);else return e;const a=al(e,t.target.x),n=al(e,t.target.y);return`${a}% ${n}%`}},l0={correct:(e,{treeScale:t,projectionDelta:a})=>{const n=e,i=Nt.parse(e);if(i.length>5)return n;const r=Nt.createTransformer(e),o=typeof i[0]!="number"?1:0,l=a.x.scale*t.x,c=a.y.scale*t.y;i[0+o]/=l,i[1+o]/=c;const u=be(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),r(i)}};class c0 extends h.Component{componentDidMount(){const{visualElement:t,layoutGroup:a,switchLayoutGroup:n,layoutId:i}=this.props,{projection:r}=t;Jy(d0),r&&(a.group&&a.group.add(r),n&&n.register&&i&&n.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Ta.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:a,visualElement:n,drag:i,isPresent:r}=this.props,{projection:o}=n;return o&&(o.isPresent=r,i||t.layoutDependency!==a||a===void 0||t.isPresent!==r?o.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?o.promote():o.relegate()||je.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Cr.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:a,switchLayoutGroup:n}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Yu(e){const[t,a]=Nu(),n=h.useContext(ar);return s.jsx(c0,{...e,layoutGroup:n,switchLayoutGroup:h.useContext(Tu),isPresent:t,safeToRemove:a})}const d0={borderRadius:{...bs,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:bs,borderTopRightRadius:bs,borderBottomLeftRadius:bs,borderBottomRightRadius:bs,boxShadow:l0};function u0(e,t,a){const n=De(e)?e:ts(e);return n.start(Fr("",n,t,a)),n.animation}const m0=(e,t)=>e.depth-t.depth;class p0{constructor(){this.children=[],this.isDirty=!1}add(t){rr(this.children,t),this.isDirty=!0}remove(t){or(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(m0),this.isDirty=!1,this.children.forEach(t)}}function h0(e,t){const a=Ve.now(),n=({timestamp:i})=>{const r=i-a;r>=t&&(wt(n),e(r-t))};return je.setup(n,!0),()=>wt(n)}const Zu=["TopLeft","TopRight","BottomLeft","BottomRight"],f0=Zu.length,nl=e=>typeof e=="string"?parseFloat(e):e,il=e=>typeof e=="number"||ae.test(e);function x0(e,t,a,n,i,r){i?(e.opacity=be(0,a.opacity??1,g0(n)),e.opacityExit=be(t.opacity??1,0,y0(n))):r&&(e.opacity=be(t.opacity??1,a.opacity??1,n));for(let o=0;o<f0;o++){const l=`border${Zu[o]}Radius`;let c=rl(t,l),u=rl(a,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||il(c)===il(u)?(e[l]=Math.max(be(nl(c),nl(u),n),0),(rt.test(u)||rt.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||a.rotate)&&(e.rotate=be(t.rotate||0,a.rotate||0,n))}function rl(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const g0=Qu(0,.5,qd),y0=Qu(.5,.95,Ge);function Qu(e,t,a){return n=>n<e?0:n>t?1:a(zs(e,t,n))}function ol(e,t){e.min=t.min,e.max=t.max}function We(e,t){ol(e.x,t.x),ol(e.y,t.y)}function ll(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function cl(e,t,a,n,i){return e-=t,e=Ba(e,1/a,n),i!==void 0&&(e=Ba(e,1/i,n)),e}function v0(e,t=0,a=1,n=.5,i,r=e,o=e){if(rt.test(t)&&(t=parseFloat(t),t=be(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=be(r.min,r.max,n);e===r&&(l-=t),e.min=cl(e.min,t,a,l,i),e.max=cl(e.max,t,a,l,i)}function dl(e,t,[a,n,i],r,o){v0(e,t[a],t[n],t[i],t.scale,r,o)}const b0=["x","scaleX","originX"],j0=["y","scaleY","originY"];function ul(e,t,a,n){dl(e.x,t,b0,a?a.x:void 0,n?n.x:void 0),dl(e.y,t,j0,a?a.y:void 0,n?n.y:void 0)}function ml(e){return e.translate===0&&e.scale===1}function em(e){return ml(e.x)&&ml(e.y)}function pl(e,t){return e.min===t.min&&e.max===t.max}function w0(e,t){return pl(e.x,t.x)&&pl(e.y,t.y)}function hl(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function tm(e,t){return hl(e.x,t.x)&&hl(e.y,t.y)}function fl(e){return Fe(e.x)/Fe(e.y)}function xl(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class N0{constructor(){this.members=[]}add(t){rr(this.members,t),t.scheduleRender()}remove(t){if(or(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(t){const a=this.members.findIndex(i=>t===i);if(a===0)return!1;let n;for(let i=a;i>=0;i--){const r=this.members[i];if(r.isPresent!==!1){n=r;break}}return n?(this.promote(n),!0):!1}promote(t,a){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,a&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:a,resumingFrom:n}=t;a.onExitComplete&&a.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function k0(e,t,a){let n="";const i=e.x.translate/t.x,r=e.y.translate/t.y,o=(a==null?void 0:a.z)||0;if((i||r||o)&&(n=`translate3d(${i}px, ${r}px, ${o}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),a){const{transformPerspective:u,rotate:d,rotateX:m,rotateY:p,skewX:x,skewY:f}=a;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),m&&(n+=`rotateX(${m}deg) `),p&&(n+=`rotateY(${p}deg) `),x&&(n+=`skewX(${x}deg) `),f&&(n+=`skewY(${f}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const qn=["","X","Y","Z"],S0={visibility:"hidden"},C0=1e3;let P0=0;function Hn(e,t,a,n){const{latestValues:i}=t;i[e]&&(a[e]=i[e],t.setStaticValue(e,0),n&&(n[e]=0))}function sm(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const a=Iu(t);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:i,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(a,"transform",je,!(i||r))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&sm(n)}function am({attachResizeListener:e,defaultParent:t,measureScroll:a,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(o={},l=t==null?void 0:t()){this.id=P0++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(R0),this.nodes.forEach(D0),this.nodes.forEach(M0),this.nodes.forEach(E0)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new p0)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new dr),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=wu(o)&&!Sy(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let d;const m=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=h0(m,250),Ta.hasAnimatedSinceResize&&(Ta.hasAnimatedSinceResize=!1,this.nodes.forEach(yl))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m,hasRelativeLayoutChanged:p,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const f=this.options.transition||u.getDefaultTransition()||$0,{onLayoutAnimationStart:v,onLayoutAnimationComplete:g}=u.getProps(),S=!this.targetLayout||!tm(this.targetLayout,x),k=!m&&p;if(this.options.layoutRoot||this.resumeFrom||k||m&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const C={...kr(f,"layout"),onPlay:v,onComplete:g};(u.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C),this.setAnimationOrigin(d,k)}else m||yl(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),wt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(I0),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&sm(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const m=this.path[d];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(gl);return}this.isUpdating||this.nodes.forEach(L0),this.isUpdating=!1,this.nodes.forEach(_0),this.nodes.forEach(T0),this.nodes.forEach(A0),this.clearAllSnapshots();const l=Ve.now();Le.delta=mt(0,1e3/60,l-Le.timestamp),Le.timestamp=l,Le.isProcessing=!0,Dn.update.process(Le),Dn.preRender.process(Le),Dn.render.process(Le),Le.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Cr.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(O0),this.sharedNodes.forEach(F0)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,je.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){je.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Fe(this.snapshot.measuredBox.x)&&!Fe(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Se(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!em(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||Tt(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),B0(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return Se();const l=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(U0))){const{scroll:d}=this.root;d&&(Xt(l.x,d.offset.x),Xt(l.y,d.offset.y))}return l}removeElementScroll(o){var c;const l=Se();if(We(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:m,options:p}=d;d!==this.root&&m&&p.layoutScroll&&(m.wasRoot&&We(l,o),Xt(l.x,m.offset.x),Xt(l.y,m.offset.y))}return l}applyTransform(o,l=!1){const c=Se();We(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Yt(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Tt(d.latestValues)&&Yt(c,d.latestValues)}return Tt(this.latestValues)&&Yt(c,this.latestValues),c}removeTransform(o){const l=Se();We(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Tt(u.latestValues))continue;Pi(u.latestValues)&&u.updateSnapshot();const d=Se(),m=u.measurePageBox();We(d,m),ul(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Tt(this.latestValues)&&ul(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Le.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:m}=this.options;if(!(!this.layout||!(d||m))){if(this.resolvedRelativeTargetAt=Le.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Se(),this.relativeTargetOrigin=Se(),Ls(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),We(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Se(),this.targetWithTransforms=Se()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Hv(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):We(this.target,this.layout.layoutBox),Wu(this.target,this.targetDelta)):We(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Se(),this.relativeTargetOrigin=Se(),Ls(this.relativeTargetOrigin,this.target,x.target),We(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Pi(this.parent.latestValues)||Hu(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var f;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Le.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;We(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,p=this.treeScale.y;Wv(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Se());const{target:x}=o;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ll(this.prevProjectionDelta.x,this.projectionDelta.x),ll(this.prevProjectionDelta.y,this.projectionDelta.y)),Os(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==p||!xl(this.projectionDelta.x,this.prevProjectionDelta.x)||!xl(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Jt(),this.projectionDelta=Jt(),this.projectionDeltaWithTransform=Jt()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},m=Jt();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const p=Se(),x=c?c.source:void 0,f=this.layout?this.layout.source:void 0,v=x!==f,g=this.getStack(),S=!g||g.members.length<=1,k=!!(v&&!S&&this.options.crossfade===!0&&!this.path.some(z0));this.animationProgress=0;let C;this.mixTargetDelta=_=>{const T=_/1e3;vl(m.x,o.x,T),vl(m.y,o.y,T),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ls(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),V0(this.relativeTarget,this.relativeTargetOrigin,p,T),C&&w0(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=Se()),We(C,this.relativeTarget)),v&&(this.animationValues=d,x0(d,u,this.latestValues,T,k,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(wt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=je.update(()=>{Ta.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ts(0)),this.currentAnimation=u0(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(C0),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&nm(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Se();const m=Fe(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+m;const p=Fe(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+p}We(l,c),Yt(l,d),Os(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new N0),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&Hn("z",o,u,this.animationValues);for(let d=0;d<qn.length;d++)Hn(`rotate${qn[d]}`,o,u,this.animationValues),Hn(`skew${qn[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return S0;const l={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=Pa(o==null?void 0:o.pointerEvents)||"",l.transform=c?c(this.latestValues,""):"none",l;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Pa(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Tt(this.latestValues)&&(x.transform=c?c({},""):"none",this.hasProjected=!1),x}const d=u.animationValues||u.latestValues;this.applyTransformsToTarget(),l.transform=k0(this.projectionDeltaWithTransform,this.treeScale,d),c&&(l.transform=c(d,l.transform));const{x:m,y:p}=this.projectionDelta;l.transformOrigin=`${m.origin*100}% ${p.origin*100}% 0`,u.animationValues?l.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:l.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const x in qs){if(d[x]===void 0)continue;const{correct:f,applyTo:v,isCSSVariable:g}=qs[x],S=l.transform==="none"?d[x]:f(d[x],u);if(v){const k=v.length;for(let C=0;C<k;C++)l[v[C]]=S}else g?this.options.visualElement.renderState.vars[x]=S:l[x]=S}return this.options.layoutId&&(l.pointerEvents=u===this?Pa(o==null?void 0:o.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(gl),this.root.sharedNodes.clear()}}}function T0(e){e.updateLayout()}function A0(e){var a;const t=((a=e.resumeFrom)==null?void 0:a.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=e.layout,{animationType:r}=e.options,o=t.source!==e.layout.source;r==="size"?Ke(m=>{const p=o?t.measuredBox[m]:t.layoutBox[m],x=Fe(p);p.min=n[m].min,p.max=p.min+x}):nm(r,t.layoutBox,n)&&Ke(m=>{const p=o?t.measuredBox[m]:t.layoutBox[m],x=Fe(n[m]);p.max=p.min+x,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[m].max=e.relativeTarget[m].min+x)});const l=Jt();Os(l,n,t.layoutBox);const c=Jt();o?Os(c,e.applyTransform(i,!0),t.measuredBox):Os(c,n,t.layoutBox);const u=!em(l);let d=!1;if(!e.resumeFrom){const m=e.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:p,layout:x}=m;if(p&&x){const f=Se();Ls(f,t.layoutBox,p.layoutBox);const v=Se();Ls(v,n,x.layoutBox),tm(f,v)||(d=!0),m.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=f,e.relativeParent=m)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function R0(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function E0(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function O0(e){e.clearSnapshot()}function gl(e){e.clearMeasurements()}function L0(e){e.isLayoutDirty=!1}function _0(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function yl(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function D0(e){e.resolveTargetDelta()}function M0(e){e.calcProjection()}function I0(e){e.resetSkewAndRotation()}function F0(e){e.removeLeadSnapshot()}function vl(e,t,a){e.translate=be(t.translate,0,a),e.scale=be(t.scale,1,a),e.origin=t.origin,e.originPoint=t.originPoint}function bl(e,t,a,n){e.min=be(t.min,a.min,n),e.max=be(t.max,a.max,n)}function V0(e,t,a,n){bl(e.x,t.x,a.x,n),bl(e.y,t.y,a.y,n)}function z0(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const $0={duration:.45,ease:[.4,0,.1,1]},jl=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),wl=jl("applewebkit/")&&!jl("chrome/")?Math.round:Ge;function Nl(e){e.min=wl(e.min),e.max=wl(e.max)}function B0(e){Nl(e.x),Nl(e.y)}function nm(e,t,a){return e==="position"||e==="preserve-aspect"&&!qv(fl(t),fl(a),.2)}function U0(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const q0=am({attachResizeListener:(e,t)=>Ws(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Wn={current:void 0},im=am({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Wn.current){const e=new q0({});e.mount(window),e.setOptions({layoutScroll:!0}),Wn.current=e}return Wn.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),H0={pan:{Feature:o0},drag:{Feature:r0,ProjectionNode:im,MeasureLayout:Yu}};function kl(e,t,a){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",a==="Start");const i="onHover"+a,r=n[i];r&&je.postRender(()=>r(t,na(t)))}class W0 extends St{mount(){const{current:t}=this.node;t&&(this.unmount=by(t,(a,n)=>(kl(this.node,n,"Start"),i=>kl(this.node,i,"End"))))}unmount(){}}class K0 extends St{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ta(Ws(this.node.current,"focus",()=>this.onFocus()),Ws(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Sl(e,t,a){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",a==="Start");const i="onTap"+(a==="End"?"":a),r=n[i];r&&je.postRender(()=>r(t,na(t)))}class G0 extends St{mount(){const{current:t}=this.node;t&&(this.unmount=ky(t,(a,n)=>(Sl(this.node,n,"Start"),(i,{success:r})=>Sl(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ri=new WeakMap,Kn=new WeakMap,J0=e=>{const t=Ri.get(e.target);t&&t(e)},X0=e=>{e.forEach(J0)};function Y0({root:e,...t}){const a=e||document;Kn.has(a)||Kn.set(a,{});const n=Kn.get(a),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(X0,{root:e,...t})),n[i]}function Z0(e,t,a){const n=Y0(t);return Ri.set(e,a),n.observe(e),()=>{Ri.delete(e),n.unobserve(e)}}const Q0={some:0,all:1};class eb extends St{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:a,margin:n,amount:i="some",once:r}=t,o={root:a?a.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:Q0[i]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,r&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:m}=this.node.getProps(),p=u?d:m;p&&p(c)};return Z0(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:a}=this.node;["amount","margin","root"].some(tb(t,a))&&this.startObserver()}unmount(){}}function tb({viewport:e={}},{viewport:t={}}={}){return a=>e[a]!==t[a]}const sb={inView:{Feature:eb},tap:{Feature:G0},focus:{Feature:K0},hover:{Feature:W0}},ab={layout:{ProjectionNode:im,MeasureLayout:Yu}},Ei={current:null},rm={current:!1};function nb(){if(rm.current=!0,!!nr)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ei.current=e.matches;e.addListener(t),t()}else Ei.current=!1}const ib=new WeakMap;function rb(e,t,a){for(const n in t){const i=t[n],r=a[n];if(De(i))e.addValue(n,i);else if(De(r))e.addValue(n,ts(i,{owner:e}));else if(r!==i)if(e.hasValue(n)){const o=e.getValue(n);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(n);e.addValue(n,ts(o!==void 0?o:i,{owner:e}))}}for(const n in a)t[n]===void 0&&e.removeValue(n);return t}const Cl=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ob{scrapeMotionValuesFromProps(t,a,n){return{}}constructor({parent:t,props:a,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:r,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=wr,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Ve.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,je.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=a.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=a,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!r,this.isControllingVariants=yn(a),this.isVariantNode=Cu(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...m}=this.scrapeMotionValuesFromProps(a,{},this);for(const p in m){const x=m[p];c[p]!==void 0&&De(x)&&x.set(c[p],!1)}}mount(t){this.current=t,ib.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,n)=>this.bindToMotionValue(n,a)),rm.current||nb(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ei.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),wt(this.notifyUpdate),wt(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const a=this.features[t];a&&(a.unmount(),a.isMounted=!1)}this.current=null}bindToMotionValue(t,a){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=hs.has(t);n&&this.onBindTransform&&this.onBindTransform();const i=a.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&je.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),r=a.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,a)),this.valueSubscriptions.set(t,()=>{i(),r(),o&&o(),a.owner&&a.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in ss){const a=ss[t];if(!a)continue;const{isEnabled:n,Feature:i}=a;if(!this.features[t]&&i&&n(this.props)&&(this.features[t]=new i(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Se()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,a){this.latestValues[t]=a}update(t,a){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let n=0;n<Cl.length;n++){const i=Cl[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const r="on"+i,o=t[r];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=rb(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(t),()=>a.variantChildren.delete(t)}addValue(t,a){const n=this.values.get(t);a!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,a),this.values.set(t,a),this.latestValues[t]=a.get())}removeValue(t){this.values.delete(t);const a=this.valueSubscriptions.get(t);a&&(a(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,a){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&a!==void 0&&(n=ts(a===null?void 0:a,{owner:this}),this.addValue(t,n)),n}readValue(t,a){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(_d(n)||Md(n))?n=parseFloat(n):!Py(n)&&Nt.test(a)&&(n=gu(t,a)),this.setBaseTarget(t,De(n)?n.get():n)),De(n)?n.get():n}setBaseTarget(t,a){this.baseTarget[t]=a}getBaseTarget(t){var r;const{initial:a}=this.props;let n;if(typeof a=="string"||typeof a=="object"){const o=Dr(this.props,a,(r=this.presenceContext)==null?void 0:r.custom);o&&(n=o[t])}if(a&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!De(i)?i:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,a){return this.events[t]||(this.events[t]=new dr),this.events[t].add(a)}notify(t,...a){this.events[t]&&this.events[t].notify(...a)}}class om extends ob{constructor(){super(...arguments),this.KeyframeResolver=fy}sortInstanceNodePosition(t,a){return t.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(t,a){return t.style?t.style[a]:void 0}removeValueFromRenderState(t,{vars:a,style:n}){delete a[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;De(t)&&(this.childSubscription=t.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function lm(e,{style:t,vars:a},n,i){Object.assign(e.style,t,i&&i.getProjectionStyles(n));for(const r in a)e.style.setProperty(r,a[r])}function lb(e){return window.getComputedStyle(e)}class cb extends om{constructor(){super(...arguments),this.type="html",this.renderInstance=lm}readValueFromInstance(t,a){var n;if(hs.has(a))return(n=this.projection)!=null&&n.isProjecting?yi(a):_g(t,a);{const i=lb(t),r=(pr(a)?i.getPropertyValue(a):i[a])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:a}){return Ku(t,a)}build(t,a,n){Or(t,a,n.transformTemplate)}scrapeMotionValuesFromProps(t,a,n){return Mr(t,a,n)}}const cm=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function db(e,t,a,n){lm(e,t,void 0,n);for(const i in t.attrs)e.setAttribute(cm.has(i)?i:Er(i),t.attrs[i])}class ub extends om{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Se}getBaseTargetFromProps(t,a){return t[a]}readValueFromInstance(t,a){if(hs.has(a)){const n=xu(a);return n&&n.default||0}return a=cm.has(a)?a:Er(a),t.getAttribute(a)}scrapeMotionValuesFromProps(t,a,n){return Mu(t,a,n)}build(t,a,n){Ou(t,a,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,a,n,i){db(t,a,n,i)}mount(t){this.isSVGTag=_u(t.tagName),super.mount(t)}}const mb=(e,t)=>_r(e)?new ub(t):new cb(t,{allowProjection:e!==h.Fragment}),pb=mv({...Mv,...sb,...H0,...ab},mb),F=Iy(pb);function hb(e){e.values.forEach(t=>t.stop())}function Oi(e,t){[...t].reverse().forEach(n=>{const i=e.getVariant(n);i&&Ir(e,i),e.variantChildren&&e.variantChildren.forEach(r=>{Oi(r,t)})})}function fb(e,t){if(Array.isArray(t))return Oi(e,t);if(typeof t=="string")return Oi(e,[t]);Ir(e,t)}function xb(){const e=new Set,t={subscribe(a){return e.add(a),()=>void e.delete(a)},start(a,n){const i=[];return e.forEach(r=>{i.push(Vu(r,a,{transitionOverride:n}))}),Promise.all(i)},set(a){return e.forEach(n=>{fb(n,a)})},stop(){e.forEach(a=>{hb(a)})},mount(){return()=>{t.stop()}}};return t}function gb(){const e=hn(xb);return ir(e.mount,[]),e}const Pl=gb,yb=()=>s.jsx(F.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"sticky top-0 z-50 w-full border-b bg-background/80 backdrop-blur-md shadow-sm",children:s.jsxs("div",{className:"container mx-auto flex h-16 items-center justify-between px-4",children:[s.jsx(F.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:s.jsxs(H,{to:"/",className:"flex items-center gap-2 font-display text-xl font-bold tracking-tight hover:text-primary transition-colors",children:[s.jsx(Be,{className:"h-6 w-6"}),"TRC"]})}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(F.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:s.jsx(z,{variant:"ghost",asChild:!0,className:"px-3 py-1.5 text-sm",children:s.jsxs(H,{to:"/login",className:"flex items-center gap-1.5",children:[s.jsx(Cd,{className:"h-4 w-4"}),"Войти"]})})}),s.jsx(F.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:s.jsx(z,{asChild:!0,className:"px-3 py-1.5 text-sm",children:s.jsxs(H,{to:"/register",className:"flex items-center gap-1.5",children:[s.jsx(Jf,{className:"h-4 w-4"}),"Регистрация"]})})})]})})]})}),vb=()=>{const e=new Date().getFullYear(),t={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},a={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}};return s.jsx(F.footer,{initial:"hidden",animate:"visible",variants:t,className:"border-t bg-background/50 py-8 backdrop-blur-sm",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-3",children:[s.jsxs(F.div,{variants:a,children:[s.jsx("h3",{className:"mb-4 font-display text-lg font-semibold",children:"TRC"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Платформа для создания стильных образов и управления гардеробом"})]}),s.jsxs(F.div,{variants:a,children:[s.jsx("h3",{className:"mb-4 font-display text-lg font-semibold",children:"Для гостей"}),s.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[s.jsx("li",{children:s.jsx(H,{to:"/login",className:"transition-colors hover:text-foreground",children:"Войти"})}),s.jsx("li",{children:s.jsx(H,{to:"/register",className:"transition-colors hover:text-foreground",children:"Регистрация"})}),s.jsx("li",{children:s.jsx(H,{to:"#",className:"transition-colors hover:text-foreground",children:"Возможности"})})]})]}),s.jsxs(F.div,{variants:a,children:[s.jsx("h3",{className:"mb-4 font-display text-lg font-semibold",children:"Информация"}),s.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[s.jsx("li",{children:s.jsx(H,{to:"#",className:"transition-colors hover:text-foreground",children:"Условия использования"})}),s.jsx("li",{children:s.jsx(H,{to:"#",className:"transition-colors hover:text-foreground",children:"Конфиденциальность"})}),s.jsx("li",{children:s.jsx(H,{to:"#",className:"transition-colors hover:text-foreground",children:"Контакты"})})]}),s.jsxs("div",{className:"mt-4 flex gap-3",children:[s.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-foreground transition-colors",children:s.jsx(jd,{className:"h-5 w-5"})}),s.jsx("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-foreground transition-colors",children:s.jsx(Sd,{className:"h-5 w-5"})}),s.jsx("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-foreground transition-colors",children:s.jsx(yd,{className:"h-5 w-5"})})]})]})]}),s.jsx(F.div,{variants:a,className:"mt-12 flex flex-col items-center justify-between gap-4 border-t pt-6 md:flex-row",children:s.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:["© ",e," TRC. Все права защищены."]})})]})})},bb=()=>s.jsxs("div",{className:"flex min-h-screen flex-col",children:[s.jsx(yb,{}),s.jsx("main",{className:"flex-1",children:s.jsx(Bi,{})}),s.jsx(vb,{})]}),Ua=sp,qa=ap,jb=h.forwardRef(({className:e,inset:t,children:a,...n},i)=>s.jsxs(mc,{ref:i,className:te("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[a,s.jsx(_a,{className:"ml-auto h-4 w-4"})]}));jb.displayName=mc.displayName;const wb=h.forwardRef(({className:e,...t},a)=>s.jsx(pc,{ref:a,className:te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));wb.displayName=pc.displayName;const Ks=h.forwardRef(({className:e,sideOffset:t=4,...a},n)=>s.jsx(tp,{children:s.jsx(hc,{ref:n,sideOffset:t,className:te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})}));Ks.displayName=hc.displayName;const Pe=h.forwardRef(({className:e,inset:t,...a},n)=>s.jsx(fc,{ref:n,className:te("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...a}));Pe.displayName=fc.displayName;const Nb=h.forwardRef(({className:e,children:t,checked:a,...n},i)=>s.jsxs(xc,{ref:i,className:te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:a,...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(gc,{children:s.jsx(gd,{className:"h-4 w-4"})})}),t]}));Nb.displayName=xc.displayName;const kb=h.forwardRef(({className:e,children:t,...a},n)=>s.jsxs(yc,{ref:n,className:te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(gc,{children:s.jsx(If,{className:"h-2 w-2 fill-current"})})}),t]}));kb.displayName=yc.displayName;const Sb=h.forwardRef(({className:e,inset:t,...a},n)=>s.jsx(vc,{ref:n,className:te("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...a}));Sb.displayName=vc.displayName;const Ns=h.forwardRef(({className:e,...t},a)=>s.jsx(bc,{ref:a,className:te("-mx-1 my-1 h-px bg-muted",e),...t}));Ns.displayName=bc.displayName;const Ha=h.forwardRef(({className:e,...t},a)=>s.jsx(jc,{ref:a,className:te("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Ha.displayName=jc.displayName;const Wa=h.forwardRef(({className:e,...t},a)=>s.jsx(wc,{ref:a,className:te("aspect-square h-full w-full",e),...t}));Wa.displayName=wc.displayName;const Ka=h.forwardRef(({className:e,...t},a)=>s.jsx(Nc,{ref:a,className:te("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Ka.displayName=Nc.displayName;const Cb=()=>{var l,c,u,d;const{user:e,isAdmin:t,isModerator:a}=Ee(),{totalItems:n}=Qs(),{favoriteIds:i}=cs(),r=rs(),o=m=>r.pathname.startsWith(m);return s.jsx(F.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"sticky top-0 z-50 w-full border-b bg-background/80 backdrop-blur-md shadow-sm",children:s.jsxs("div",{className:"container mx-auto flex h-16 items-center justify-between px-4",children:[s.jsx(F.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:s.jsxs(H,{to:"/home",className:"flex items-center gap-2 font-display text-xl font-bold tracking-tight hover:text-primary transition-colors",children:[s.jsx(Be,{className:"h-6 w-6"}),"TRC"]})}),s.jsxs("nav",{className:"hidden gap-8 md:flex",children:[s.jsxs(H,{to:"/home",className:`text-sm font-medium transition-all duration-200 hover:text-foreground relative group ${o("/home")?"text-foreground":"text-muted-foreground"}`,children:["Главная",o("/home")&&s.jsx(F.div,{layoutId:"activeTab",className:"absolute -bottom-2 left-0 right-0 h-0.5 bg-primary rounded-full",initial:!1,transition:{type:"spring",stiffness:500,damping:30}})]}),s.jsxs(H,{to:"/items",className:`text-sm font-medium transition-all duration-200 hover:text-foreground relative group ${o("/items")?"text-foreground":"text-muted-foreground"}`,children:["Каталог",o("/items")&&s.jsx(F.div,{layoutId:"activeTab",className:"absolute -bottom-2 left-0 right-0 h-0.5 bg-primary rounded-full",initial:!1,transition:{type:"spring",stiffness:500,damping:30}})]}),s.jsxs(H,{to:"/outfits",className:`text-sm font-medium transition-all duration-200 hover:text-foreground relative group ${o("/outfits")?"text-foreground":"text-muted-foreground"}`,children:["Образы",o("/outfits")&&s.jsx(F.div,{layoutId:"activeTab",className:"absolute -bottom-2 left-0 right-0 h-0.5 bg-primary rounded-full",initial:!1,transition:{type:"spring",stiffness:500,damping:30}})]}),s.jsxs(H,{to:"/shops",className:`text-sm font-medium transition-all duration-200 hover:text-foreground relative group ${o("/shops")?"text-foreground":"text-muted-foreground"}`,children:["Магазины",o("/shops")&&s.jsx(F.div,{layoutId:"activeTab",className:"absolute -bottom-2 left-0 right-0 h-0.5 bg-primary rounded-full",initial:!1,transition:{type:"spring",stiffness:500,damping:30}})]}),(t||a)&&s.jsxs(H,{to:t?"/admin/users":"/admin/items",className:`text-sm font-medium transition-all duration-200 hover:text-foreground relative group ${o("/admin")?"text-foreground":"text-muted-foreground"}`,children:["Админ",o("/admin")&&s.jsx(F.div,{layoutId:"activeTab",className:"absolute -bottom-2 left-0 right-0 h-0.5 bg-primary rounded-full",initial:!1,transition:{type:"spring",stiffness:500,damping:30}})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(Ua,{children:[s.jsx(qa,{asChild:!0,className:"md:hidden",children:s.jsx(F.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:s.jsx(z,{variant:"ghost",size:"icon",children:s.jsx(zf,{className:"h-5 w-5"})})})}),s.jsxs(Ks,{sideOffset:4,align:"start",className:"w-64 p-2 md:hidden",children:[s.jsx(Pe,{asChild:!0,children:s.jsxs(H,{to:"/home",className:"flex items-center gap-3 p-3 rounded-lg hover:bg-muted transition-colors",children:[s.jsx(vd,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:"Главная"})]})}),s.jsx(Pe,{asChild:!0,children:s.jsxs(H,{to:"/items",className:"flex items-center gap-3 p-3 rounded-lg hover:bg-muted transition-colors",children:[s.jsx(Nd,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:"Каталог"})]})}),s.jsx(Pe,{asChild:!0,children:s.jsxs(H,{to:"/outfits",className:"flex items-center gap-3 p-3 rounded-lg hover:bg-muted transition-colors",children:[s.jsx(Fs,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:"Образы"})]})}),s.jsx(Pe,{asChild:!0,children:s.jsxs(H,{to:"/shops",className:"flex items-center gap-3 p-3 rounded-lg hover:bg-muted transition-colors",children:[s.jsx(ea,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:"Магазины"})]})}),(t||a)&&s.jsx(Pe,{asChild:!0,children:s.jsxs(H,{to:t?"/admin/users":"/admin/items",className:"flex items-center gap-3 p-3 rounded-lg hover:bg-muted transition-colors",children:[s.jsx(Cs,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:"Админ"})]})}),s.jsx(Ns,{}),s.jsx(Pe,{asChild:!0,children:s.jsxs(H,{to:"/profile",className:"flex items-center gap-3 p-3 rounded-lg hover:bg-muted transition-colors",children:[s.jsx(es,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:"Профиль"})]})}),s.jsx(Pe,{asChild:!0,children:s.jsxs(H,{to:"/settings",className:"flex items-center gap-3 p-3 rounded-lg hover:bg-muted transition-colors",children:[s.jsx(di,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:"Настройки"})]})}),s.jsx(Pe,{asChild:!0,children:s.jsxs(H,{to:"/history",className:"flex items-center gap-3 p-3 rounded-lg hover:bg-muted transition-colors",children:[s.jsx(Ma,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:"История"})]})}),s.jsx(Pe,{asChild:!0,children:s.jsxs(H,{to:"/favorites",className:"flex items-center gap-3 p-3 rounded-lg hover:bg-muted transition-colors",children:[s.jsx(Me,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:"Избранное"})]})}),s.jsx(Pe,{asChild:!0,children:s.jsxs(H,{to:"/cart",className:"flex items-center gap-3 p-3 rounded-lg hover:bg-muted transition-colors",children:[s.jsx(Is,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:"Корзина"})]})}),s.jsx(Ns,{}),s.jsx(Pe,{asChild:!0,children:s.jsxs(H,{to:"/logout",className:"flex items-center gap-3 p-3 rounded-lg hover:bg-destructive/10 transition-colors text-destructive",children:[s.jsx(uo,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:"Выйти"})]})})]})]}),s.jsx(F.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"hidden md:block",children:s.jsx(H,{to:"/favorites",children:s.jsxs(z,{variant:"ghost",size:"icon",className:"relative",children:[s.jsx(Me,{className:`h-5 w-5 transition-all duration-200 ${i.length>0?"fill-primary text-primary":"hover:text-primary"}`}),i.length>0&&s.jsx(F.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-primary text-[10px] text-primary-foreground",children:i.length})]})})}),s.jsx(F.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"hidden md:block",children:s.jsx(H,{to:"/cart",children:s.jsxs(z,{variant:"ghost",size:"icon",className:"relative",children:[s.jsx(Is,{className:"h-5 w-5 transition-all duration-200 hover:text-primary"}),n>0&&s.jsx(F.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-primary text-[10px] text-primary-foreground",children:n})]})})}),s.jsxs(Ua,{children:[s.jsx(qa,{asChild:!0,className:"hidden md:block",children:s.jsx(F.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:s.jsx(z,{variant:"ghost",size:"icon",className:"rounded-full p-0 h-8 w-8 focus-visible:ring-0 focus-visible:ring-offset-0",children:s.jsxs(Ha,{className:"h-full w-full",children:[s.jsx(Wa,{src:(e==null?void 0:e.avatar)||void 0,alt:(e==null?void 0:e.first_name)||(e==null?void 0:e.email)}),s.jsx(Ka,{className:"bg-primary/10 text-primary font-medium",children:((l=e==null?void 0:e.first_name)==null?void 0:l[0])||((c=e==null?void 0:e.email)==null?void 0:c[0])||"U"})]})})})}),s.jsxs(Ks,{className:"w-64 p-2",align:"end",forceMount:!0,children:[s.jsxs("div",{className:"flex items-center justify-start gap-3 p-3",children:[s.jsxs(Ha,{className:"h-10 w-10",children:[s.jsx(Wa,{src:(e==null?void 0:e.avatar)||void 0,alt:(e==null?void 0:e.first_name)||(e==null?void 0:e.email)}),s.jsx(Ka,{className:"bg-primary/10 text-primary font-medium",children:((u=e==null?void 0:e.first_name)==null?void 0:u[0])||((d=e==null?void 0:e.email)==null?void 0:d[0])||"U"})]}),s.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[(e==null?void 0:e.first_name)&&s.jsx("p",{className:"font-semibold text-sm",children:e.first_name}),s.jsx("p",{className:"w-[200px] truncate text-xs text-muted-foreground",children:e==null?void 0:e.email})]})]}),s.jsx(Ns,{}),s.jsx(Pe,{asChild:!0,children:s.jsxs(H,{to:"/profile",className:"flex items-center gap-3 p-3 rounded-lg hover:bg-muted transition-colors",children:[s.jsx(es,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:"Профиль"})]})}),s.jsx(Pe,{asChild:!0,children:s.jsxs(H,{to:"/settings",className:"flex items-center gap-3 p-3 rounded-lg hover:bg-muted transition-colors",children:[s.jsx(di,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:"Настройки"})]})}),s.jsx(Pe,{asChild:!0,children:s.jsxs(H,{to:"/history",className:"flex items-center gap-3 p-3 rounded-lg hover:bg-muted transition-colors",children:[s.jsx(Ma,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:"История"})]})}),s.jsx(Ns,{}),s.jsx(Pe,{asChild:!0,children:s.jsxs(H,{to:"/logout",className:"flex items-center gap-3 p-3 rounded-lg hover:bg-destructive/10 transition-colors text-destructive",children:[s.jsx(uo,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:"Выйти"})]})})]})]})]})]})})},Pb=()=>{const e=new Date().getFullYear(),t={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},a={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}};return s.jsx(F.footer,{initial:"hidden",animate:"visible",variants:t,className:"border-t bg-background/50 py-8 backdrop-blur-sm hidden md:block",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-4",children:[s.jsxs(F.div,{variants:a,children:[s.jsx("h3",{className:"mb-4 font-display text-lg font-semibold",children:"TRC"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Платформа для создания стильных образов и управления гардеробом"})]}),s.jsxs(F.div,{variants:a,children:[s.jsx("h3",{className:"mb-4 font-display text-lg font-semibold",children:"Навигация"}),s.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[s.jsx("li",{children:s.jsx(H,{to:"/home",className:"transition-colors hover:text-foreground",children:"Главная"})}),s.jsx("li",{children:s.jsx(H,{to:"/items",className:"transition-colors hover:text-foreground",children:"Товары"})}),s.jsx("li",{children:s.jsx(H,{to:"/outfits",className:"transition-colors hover:text-foreground",children:"Образы"})}),s.jsx("li",{children:s.jsx(H,{to:"/shops",className:"transition-colors hover:text-foreground",children:"Магазины"})}),s.jsx("li",{children:s.jsx(H,{to:"/profile",className:"transition-colors hover:text-foreground",children:"Профиль"})})]})]}),s.jsxs(F.div,{variants:a,children:[s.jsx("h3",{className:"mb-4 font-display text-lg font-semibold",children:"Правовая информация"}),s.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[s.jsx("li",{children:s.jsx(H,{to:"#",className:"transition-colors hover:text-foreground",children:"Условия использования"})}),s.jsx("li",{children:s.jsx(H,{to:"#",className:"transition-colors hover:text-foreground",children:"Политика конфиденциальности"})}),s.jsx("li",{children:s.jsx(H,{to:"#",className:"transition-colors hover:text-foreground",children:"Cookie-файлы"})})]})]}),s.jsxs(F.div,{variants:a,children:[s.jsx("h3",{className:"mb-4 font-display text-lg font-semibold",children:"Контакты"}),s.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[s.jsx("li",{children:"support@trc.com"}),s.jsx("li",{children:"+7 (777) 123-45-67"}),s.jsx("li",{children:"г. Алматы, Казахстан"})]}),s.jsxs("div",{className:"mt-4 flex gap-3",children:[s.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-foreground transition-colors",children:s.jsx(jd,{className:"h-5 w-5"})}),s.jsx("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-foreground transition-colors",children:s.jsx(Sd,{className:"h-5 w-5"})}),s.jsx("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-foreground transition-colors",children:s.jsx(yd,{className:"h-5 w-5"})})]})]})]}),s.jsx(F.div,{variants:a,className:"mt-12 flex flex-col items-center justify-between gap-4 border-t pt-6 md:flex-row",children:s.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:["© ",e," TRC. Все права защищены."]})})]})})},Tb=[{to:"/home",icon:vd,label:"Главная"},{to:"/items",icon:Be,label:"Каталог"},{to:"/outfits",icon:Nd,label:"Образы"},{to:"/shops",icon:ea,label:"Магазины"},{to:"/profile",icon:es,label:"Профиль"}],Ab=()=>{const e=rs();return s.jsx("nav",{className:"fixed bottom-0 inset-x-0 z-50 bg-white border-t shadow-sm md:hidden min-h-[60px]",children:s.jsx("ul",{className:"grid grid-cols-5",children:Tb.map(t=>{const a=e.pathname.startsWith(t.to),n=t.icon;return s.jsx("li",{children:s.jsxs(H,{to:t.to,className:`flex flex-col items-center justify-center gap-1 pt-2 pb-[env(safe-area-inset-bottom)] min-h-[48px] text-xs font-medium transition-colors ${a?"text-primary":"text-muted-foreground hover:text-foreground"}`,children:[s.jsx(n,{className:"h-5 w-5 mb-0.5",strokeWidth:a?2.5:1.5}),s.jsx("span",{className:"-mt-0.5",children:t.label})]})},t.to)})})})},Rb=()=>s.jsxs("div",{className:"flex min-h-screen flex-col",children:[s.jsx(Cb,{}),s.jsx("main",{className:"flex-1 bg-muted/30 py-6",children:s.jsx(Bi,{})}),s.jsx(Pb,{}),s.jsx(Ab,{})]});var Li=new Map,ga=new WeakMap,Tl=0,Eb=void 0;function Ob(e){return e?(ga.has(e)||(Tl+=1,ga.set(e,Tl.toString())),ga.get(e)):"0"}function Lb(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?Ob(e.root):e[t]}`).toString()}function _b(e){const t=Lb(e);let a=Li.get(t);if(!a){const n=new Map;let i;const r=new IntersectionObserver(o=>{o.forEach(l=>{var c;const u=l.isIntersecting&&i.some(d=>l.intersectionRatio>=d);e.trackVisibility&&typeof l.isVisible>"u"&&(l.isVisible=u),(c=n.get(l.target))==null||c.forEach(d=>{d(u,l)})})},e);i=r.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),a={id:t,observer:r,elements:n},Li.set(t,a)}return a}function Db(e,t,a={},n=Eb){if(typeof window.IntersectionObserver>"u"&&n!==void 0){const c=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:typeof a.threshold=="number"?a.threshold:0,time:0,boundingClientRect:c,intersectionRect:c,rootBounds:c}),()=>{}}const{id:i,observer:r,elements:o}=_b(a),l=o.get(e)||[];return o.has(e)||o.set(e,l),l.push(t),r.observe(e),function(){l.splice(l.indexOf(t),1),l.length===0&&(o.delete(e),r.unobserve(e)),o.size===0&&(r.disconnect(),Li.delete(i))}}function Mb({threshold:e,delay:t,trackVisibility:a,rootMargin:n,root:i,triggerOnce:r,skip:o,initialInView:l,fallbackInView:c,onChange:u}={}){var d;const[m,p]=h.useState(null),x=h.useRef(u),[f,v]=h.useState({inView:!!l,entry:void 0});x.current=u,h.useEffect(()=>{if(o||!m)return;let C;return C=Db(m,(_,T)=>{v({inView:_,entry:T}),x.current&&x.current(_,T),T.isIntersecting&&r&&C&&(C(),C=void 0)},{root:i,rootMargin:n,threshold:e,trackVisibility:a,delay:t},c),()=>{C&&C()}},[Array.isArray(e)?e.toString():e,m,i,n,r,o,a,c,t]);const g=(d=f.entry)==null?void 0:d.target,S=h.useRef(void 0);!m&&g&&!r&&!o&&S.current!==g&&(S.current=g,v({inView:!!l,entry:void 0}));const k=[p,f.inView,f.entry];return k.ref=k[0],k.inView=k[1],k.entry=k[2],k}const Ib=({className:e="",variant:t="default",size:a="md"})=>{const[n,i]=h.useState(!1),[r,o]=h.useState(!1);h.useEffect(()=>{const p=()=>{const g=window.matchMedia("(display-mode: standalone)").matches,S=window.navigator.standalone===!0;o(g||S)};p();const x=g=>{g.preventDefault(),i(!0)},f=()=>{i(!1),o(!0)},v=()=>{p()};return window.addEventListener("beforeinstallprompt",x),window.addEventListener("appinstalled",f),window.matchMedia("(display-mode: standalone)").addEventListener("change",v),()=>{window.removeEventListener("beforeinstallprompt",x),window.removeEventListener("appinstalled",f),window.matchMedia("(display-mode: standalone)").removeEventListener("change",v)}},[]);const l=()=>{const p=window.deferredPrompt;p&&(p.prompt(),p.userChoice.then(x=>{x.outcome==="accepted"&&i(!1),window.deferredPrompt=null}))};if(r||!n)return null;const c="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",u={default:"bg-primary text-primary-foreground hover:bg-primary/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground"},d={sm:"h-9 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-11 px-8"},m=`${c} ${u[t]} ${d[a]} ${e}`;return s.jsxs("button",{onClick:l,className:m,id:"install-button",children:[s.jsx(ci,{className:"w-4 h-4 mr-2"}),"Установить приложение"]})},Fb=()=>{const e=Pl(),t=[{name:"MEGA",logo:"/external_image_1.png"},{name:"Almaly",logo:"/external_image_2.jpg"},{name:"Dostyk Plaza",logo:"/external_image_3.svg"},{name:"GOOD",logo:"/external_image_4.webp"},{name:"Forum",logo:"/external_image_5.svg"}],[a,n]=Mb({threshold:.1,triggerOnce:!1});h.useEffect(()=>{(async()=>{await e.start({backgroundPosition:["0% 0%","100% 100%"],transition:{duration:30,repeat:1/0,repeatType:"reverse",ease:"linear"}})})()},[e]);const i=Pl();return h.useEffect(()=>{n&&i.start({opacity:1,y:0,transition:{staggerChildren:.1}})},[n,i]),s.jsxs("div",{className:"relative overflow-hidden",children:[s.jsx(F.div,{className:"absolute top-1/3 left-1/4 w-64 h-64 rounded-full bg-primary/10 blur-3xl pointer-events-none",animate:{x:[0,50,0],y:[0,30,0],scale:[1,1.2,1]},transition:{duration:15,repeat:1/0,ease:"easeInOut"}}),s.jsx(F.div,{className:"absolute bottom-1/4 right-1/4 w-80 h-80 rounded-full bg-accent/10 blur-3xl pointer-events-none",animate:{x:[0,-40,0],y:[0,-20,0],rotate:[0,10,0]},transition:{duration:20,repeat:1/0,ease:"easeInOut"}}),s.jsxs("div",{className:"relative z-10 container mx-auto px-4 py-16 md:py-24 lg:py-32",children:[s.jsxs("div",{className:"mx-auto max-w-4xl text-center",children:[s.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"mb-6 inline-block relative z-10",children:s.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-muted/50 px-4 py-2 text-sm font-medium text-muted-foreground backdrop-blur-sm border border-muted/30 shadow-sm hover:bg-muted/70 transition-colors cursor-default select-none",children:[s.jsx("span",{children:"Новая коллекция уже здесь"}),s.jsx(_a,{className:"h-4 w-4"})]})}),s.jsxs(F.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.3},className:"mb-6 font-display text-4xl font-bold tracking-tight sm:text-5xl lg:text-6xl",children:[s.jsx("span",{className:"block",children:"Стиль, который"}),s.jsxs("span",{className:"relative inline-block mt-2",children:[s.jsx("span",{className:"relative z-10 bg-gradient-to-r from-primary via-primary/80 to-primary/60 bg-clip-text text-transparent",children:"говорит"}),s.jsx(F.span,{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-primary to-primary/0",initial:{scaleX:0},animate:{scaleX:1},transition:{duration:1.2,delay:.8}})]}),s.jsx("span",{className:"block mt-2",children:"за вас"})]}),s.jsx(F.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mx-auto mb-8 max-w-2xl text-lg text-muted-foreground leading-relaxed",children:"Откройте для себя уникальные образы и создайте свой неповторимый стиль. Качественная одежда для тех, кто ценит индивидуальность и комфорт."}),s.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"relative z-10 flex flex-col gap-4 sm:flex-row sm:justify-center",children:[s.jsx(z,{asChild:!0,size:"lg",className:"group shadow-lg hover:shadow-primary/20 min-h-[48px] touch-manipulation",children:s.jsx(H,{to:"/register",children:s.jsxs("span",{className:"flex items-center",children:["Начать покупки",s.jsx(Ji,{className:"ml-2 h-4 w-4 transition-transform group-hover:translate-x-1"})]})})}),s.jsx(z,{asChild:!0,variant:"outline",size:"lg",className:"group shadow-sm min-h-[48px] touch-manipulation",children:s.jsx(H,{to:"/login",children:s.jsxs("span",{className:"flex items-center",children:["Войти в аккаунт",s.jsx(_a,{className:"ml-2 h-4 w-4 opacity-0 transition-all group-hover:opacity-100 group-hover:translate-x-1"})]})})})]}),s.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.7},className:"relative z-10 mt-6 flex justify-center",children:s.jsx(Ib,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground min-h-[44px] touch-manipulation"})}),s.jsxs("div",{ref:a,className:"mt-10",children:[s.jsx(F.p,{initial:{opacity:0,y:20},animate:i,className:"text-center text-sm uppercase tracking-wider text-muted-foreground mb-4",children:"Наши партнёры"}),s.jsxs(F.div,{initial:{opacity:0,y:20},animate:i,className:"relative overflow-hidden py-4",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 w-16 bg-gradient-to-r from-background to-transparent z-10"}),s.jsx("div",{className:"absolute inset-y-0 right-0 w-16 bg-gradient-to-l from-background to-transparent z-10"}),s.jsx(F.div,{className:"flex gap-8 md:gap-12 items-center",animate:{x:["0%",`-${100-100/t.length}%`]},transition:{duration:20,ease:"linear",repeat:1/0,repeatType:"loop"},children:[...t,...t].map((r,o)=>s.jsx(F.div,{className:"flex-shrink-0 bg-background/80 backdrop-blur-sm px-4 md:px-6 py-2 md:py-3 rounded-lg border border-muted/20 hover:border-primary/30 transition-colors",whileHover:{scale:1.05},children:s.jsx("img",{src:r.logo,alt:r.name,className:"h-12 md:h-16 w-auto object-contain",loading:"lazy"})},`${r.name}-${o}`))})]})]})]}),s.jsx("div",{className:"hidden md:block mt-20",children:s.jsx(F.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.8,delay:.5},className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[{name:"Женская одежда",image:"/external_image_6.jpeg"},{name:"Мужская одежда",image:"/external_image_7.jpeg"},{name:"Аксессуары",image:"/external_image_8.jpeg"}].map((r,o)=>s.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6+o*.1},className:"group relative overflow-hidden rounded-2xl bg-card border border-muted/20 hover:border-primary/20 transition-colors shadow-lg hover:shadow-xl",whileHover:{y:-8},children:[s.jsx("div",{className:"aspect-[4/5] overflow-hidden",children:s.jsx("img",{src:r.image,alt:r.name,className:"h-full w-full object-cover transition-transform duration-700 group-hover:scale-110",loading:"lazy"})}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent"}),s.jsx("div",{className:"absolute inset-0 flex items-end p-6",children:s.jsx("h3",{className:"font-display text-2xl font-semibold text-white",children:r.name})})]},r.name))})})]})]})},Z=h.forwardRef(({className:e,type:t,...a},n)=>s.jsx("input",{type:t,className:te("flex h-10 w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm placeholder:text-slate-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...a}));Z.displayName="Input";const J=h.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:te("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));J.displayName="Card";const pe=h.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:te("flex flex-col space-y-1.5 p-6",e),...t}));pe.displayName="CardHeader";const fe=h.forwardRef(({className:e,...t},a)=>s.jsx("h3",{ref:a,className:te("text-2xl font-semibold leading-none tracking-tight",e),...t}));fe.displayName="CardTitle";const Re=h.forwardRef(({className:e,...t},a)=>s.jsx("p",{ref:a,className:te("text-sm text-muted-foreground",e),...t}));Re.displayName="CardDescription";const X=h.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:te("p-6 pt-0",e),...t}));X.displayName="CardContent";const dm=h.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:te("flex items-center p-6 pt-0",e),...t}));dm.displayName="CardFooter";const um=()=>{const e=async t=>{t.preventDefault();try{const a=await U.get("/api/auth/google/login"),{auth_url:n}=a.data;window.location.href=n}catch(a){console.error("Google login initiation failed",a)}};return s.jsxs(z,{onClick:e,type:"button",variant:"outline",className:"w-full h-11",children:[s.jsxs("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Войти через Google"]})},mm=({variant:e="default",children:t,className:a})=>s.jsx("div",{className:te("relative rounded-lg border p-4",e==="destructive"&&"border-red-200 bg-red-50 text-red-600 dark:border-red-800 dark:bg-red-950 dark:text-red-400",a),children:t}),pm=({children:e,className:t})=>s.jsx("div",{className:te("mt-2 text-sm",t),children:e});function Vb(e,t){if(e==null)return{};var a={},n=Object.keys(e),i,r;for(r=0;r<n.length;r++)i=n[r],!(t.indexOf(i)>=0)&&(a[i]=e[i]);return a}var zb=["color"],hm=h.forwardRef(function(e,t){var a=e.color,n=a===void 0?"currentColor":a,i=Vb(e,zb);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),h.createElement("path",{d:"M7.49991 0.876892C3.84222 0.876892 0.877075 3.84204 0.877075 7.49972C0.877075 11.1574 3.84222 14.1226 7.49991 14.1226C11.1576 14.1226 14.1227 11.1574 14.1227 7.49972C14.1227 3.84204 11.1576 0.876892 7.49991 0.876892ZM1.82707 7.49972C1.82707 4.36671 4.36689 1.82689 7.49991 1.82689C10.6329 1.82689 13.1727 4.36671 13.1727 7.49972C13.1727 10.6327 10.6329 13.1726 7.49991 13.1726C4.36689 13.1726 1.82707 10.6327 1.82707 7.49972ZM8.24992 4.49999C8.24992 4.9142 7.91413 5.24999 7.49992 5.24999C7.08571 5.24999 6.74992 4.9142 6.74992 4.49999C6.74992 4.08577 7.08571 3.74999 7.49992 3.74999C7.91413 3.74999 8.24992 4.08577 8.24992 4.49999ZM6.00003 5.99999H6.50003H7.50003C7.77618 5.99999 8.00003 6.22384 8.00003 6.49999V9.99999H8.50003H9.00003V11H8.50003H7.50003H6.50003H6.00003V9.99999H6.50003H7.00003V6.99999H6.50003H6.00003V5.99999Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))});const $b=()=>{const[e,t]=h.useState(""),[a,n]=h.useState(""),[i,r]=h.useState(!1),[o,l]=h.useState(null),{login:c}=Ee(),u=dt(),d=async m=>{if(m.preventDefault(),l(null),!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)){l("Некорректный email");return}if(a.length<8){l("Пароль должен содержать минимум 8 символов");return}r(!0);try{await c(e,a),u("/home")}catch(x){let f="Не удалось войти. Пожалуйста, проверьте данные";x instanceof Error?x.message.includes("Invalid credentials")?f="Неверный email или пароль":x.message.includes("User not found")?f="Пользователь не найден":x.message.includes("Incorrect password")?f="Неверный пароль":f=x.message||f:typeof x=="string"&&(f=x),l(f)}finally{r(!1)}};return s.jsx("div",{className:"container mx-auto flex min-h-[calc(100vh-4rem)] items-center justify-center px-4",children:s.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:s.jsxs(J,{className:"border-0 shadow-lg",children:[s.jsxs(pe,{className:"space-y-1 text-center",children:[s.jsx(fe,{className:"font-display text-2xl",children:"Добро пожаловать"}),s.jsx(Re,{children:"Войдите в свой аккаунт, чтобы продолжить покупки"})]}),s.jsxs(X,{className:"space-y-4",children:[s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsx("div",{className:"space-y-2",children:s.jsx(Z,{id:"email",type:"email",placeholder:"Ваш email",value:e,onChange:m=>t(m.target.value),required:!0,className:"h-11"})}),s.jsx("div",{className:"space-y-2",children:s.jsx(Z,{id:"password",type:"password",placeholder:"Пароль",value:a,onChange:m=>n(m.target.value),required:!0,className:"h-11"})}),s.jsx(z,{type:"submit",className:"w-full h-11",disabled:i,children:i?"Вход...":"Войти"}),o&&s.jsxs(mm,{variant:"default",className:"bg-blue-50 border-blue-200",children:[s.jsx(hm,{className:"h-4 w-4 text-blue-600"}),s.jsx(pm,{className:"text-blue-800",children:o})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("span",{className:"w-full border-t"})}),s.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:s.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"или"})})]}),s.jsx(um,{}),s.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:["Нет аккаунта?"," ",s.jsx(H,{to:"/register",className:"font-medium text-primary hover:underline",onClick:()=>l(null),children:"Зарегистрируйтесь"})]})]})]})})})},Bb=()=>{const[e,t]=h.useState(""),[a,n]=h.useState(""),[i,r]=h.useState(""),[o,l]=h.useState(!1),[c,u]=h.useState(null),{register:d}=Ee(),m=dt(),p=async x=>{if(x.preventDefault(),u(null),!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)){u("Некорректный email");return}if(a.length<8){u("Пароль должен содержать минимум 8 символов");return}if(a!==i){u("Пароли не совпадают");return}l(!0);try{await d(e,a),m("/home")}catch(v){let g="Не удалось зарегистрироваться. Пожалуйста, попробуйте снова";v instanceof Error?v.message.includes("email already in use")?g="Этот email уже используется":v.message.includes("weak password")?g="Пароль должен содержать не менее 6 символов":v.message.includes("invalid email")?g="Неверный формат email":g=v.message||g:typeof v=="string"&&(g=v),u(g)}finally{l(!1)}};return s.jsx("div",{className:"container mx-auto flex min-h-[calc(100vh-4rem)] items-center justify-center px-4",children:s.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:s.jsxs(J,{className:"border-0 shadow-lg",children:[s.jsxs(pe,{className:"space-y-1 text-center",children:[s.jsx(fe,{className:"font-display text-2xl",children:"Создать аккаунт"}),s.jsx(Re,{children:"Присоединяйтесь к нам и откройте мир стильной одежды"})]}),s.jsxs(X,{className:"space-y-4",children:[s.jsxs("form",{onSubmit:p,className:"space-y-4",children:[s.jsx("div",{className:"space-y-2",children:s.jsx(Z,{id:"email",type:"email",placeholder:"Ваш email",value:e,onChange:x=>t(x.target.value),required:!0,className:"h-11"})}),s.jsx("div",{className:"space-y-2",children:s.jsx(Z,{id:"password",type:"password",placeholder:"Пароль",value:a,onChange:x=>n(x.target.value),required:!0,className:"h-11"})}),s.jsx("div",{className:"space-y-2",children:s.jsx(Z,{id:"confirmPassword",type:"password",placeholder:"Повторите пароль",value:i,onChange:x=>r(x.target.value),required:!0,className:"h-11"})}),s.jsx(z,{type:"submit",className:"w-full h-11",disabled:o,children:o?"Создание аккаунта...":"Создать аккаунт"}),c&&s.jsxs(mm,{variant:"default",className:"bg-blue-50 border-blue-200",children:[s.jsx(hm,{className:"h-4 w-4 text-blue-600"}),s.jsx(pm,{className:"text-blue-800",children:c})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("span",{className:"w-full border-t"})}),s.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:s.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"или"})})]}),s.jsx(um,{}),s.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:["Уже есть аккаунт?"," ",s.jsx(H,{to:"/login",className:"font-medium text-primary hover:underline",onClick:()=>u(null),children:"Войти"})]})]})]})})})},fm=({size:e="md",className:t})=>{const a={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return s.jsx("div",{className:te("inline-block animate-spin rounded-full border-2 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",a[e],t),role:"status",children:s.jsx("span",{className:"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]",children:"Загрузка..."})})},Ub=({message:e,onRetry:t,className:a})=>s.jsxs("div",{className:te("max-w-md text-center",a),children:[s.jsxs("div",{className:"mb-4 text-red-600",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("p",{className:"mt-2 font-medium",children:e})]}),t&&s.jsx(z,{onClick:t,variant:"outline",className:"mt-4",children:"Попробовать снова"})]}),qb=()=>{const e=dt(),[t,a]=h.useState(null),[n,i]=h.useState(!0);return h.useEffect(()=>{(async()=>{try{i(!0);const l=new URLSearchParams(window.location.search).get("code");if(!l)throw new Error("Authorization code not found");const c=await U.get("/api/auth/google/callback",{params:{code:l}}),{access_token:u,refresh_token:d,user:m}=c.data;dn(u,d),localStorage.setItem("user",JSON.stringify(m)),window.location.href="/home"}catch(o){console.error("Google callback error:",o),a(o instanceof Error?o.message:"Произошла ошибка при входе через Google. Пожалуйста, попробуйте снова."),e("/login",{state:{error:"Не удалось войти через Google"},replace:!0})}finally{i(!1)}})()},[e]),n?s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[s.jsx(fm,{size:"lg"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Завершаем вход через Google..."})]}):t?s.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4",children:s.jsx(Ub,{message:t,onRetry:()=>window.location.reload()})}):null},Hb=Td("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function le({className:e,variant:t,...a}){return s.jsx("div",{className:te(Hb({variant:t}),e),...a})}const Ye=({src:e,alt:t,className:a="",fallbackClassName:n="",style:i})=>{const r=e!=null&&e.startsWith("/uploads/")?`${window.location.origin}${e}`:e;return r?s.jsx("img",{src:r,alt:t,className:a,style:i,onError:o=>{const l=o.target,c=l.parentElement;if(c){l.style.display="none";const u=document.createElement("div");u.className=`flex items-center justify-center bg-muted ${n}`,u.innerHTML=`
            <svg class="h-12 w-12 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
            </svg>
          `,c.appendChild(u)}}}):s.jsx("div",{className:`flex items-center justify-center bg-muted ${n}`,children:s.jsx(Be,{className:"h-12 w-12 text-muted-foreground"})})},Je={top:"Верх",bottom:"Низ",footwear:"Обувь",accessory:"Аксессуары",fragrance:"Ароматы"},Wb=()=>{const{user:e}=Ee(),[t,a]=h.useState([]),[n,i]=h.useState(!0);h.useEffect(()=>{(async()=>{try{const c=await U.get("/api/items/trending");a(c.data)}catch(c){console.error(c)}finally{i(!1)}})()},[]);const r={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},o={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx(F.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-12 text-center",children:s.jsxs("div",{className:"mx-auto max-w-3xl",children:[s.jsxs("h1",{className:"mb-4 font-display text-4xl font-bold tracking-tight lg:text-5xl",children:["Добро пожаловать, ",(e==null?void 0:e.first_name)||"стилист","!"]}),s.jsx("p",{className:"text-lg text-muted-foreground",children:"Откройте для себя новые тренды и создайте уникальные образы"})]})}),s.jsx(F.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"mb-12",children:s.jsx("div",{className:"grid gap-4 grid-cols-2 sm:grid-cols-4 md:grid-cols-4",children:[{to:"/items",icon:s.jsx(Be,{className:"h-6 w-6 text-primary"}),label:"Каталог",sub:"Все товары"},{to:"/shops",icon:s.jsx(ea,{className:"h-6 w-6 text-primary"}),label:"Магазины",sub:"Модераторы"},{to:"/outfits/new",icon:s.jsx(Fs,{className:"h-6 w-6 text-primary"}),label:"Создать образ",sub:"Новый лук"},{to:"/favorites",icon:s.jsx(Me,{className:"h-6 w-6 text-primary"}),label:"Избранное",sub:"Любимые"}].map(l=>s.jsx(H,{to:l.to,className:"group",children:s.jsxs("button",{type:"button",className:"w-full h-28 sm:h-32 flex flex-col items-center justify-center gap-2 rounded-xl border border-border/60 bg-card transition-all hover:shadow-md active:scale-[.97]",children:[s.jsx("div",{className:"rounded-full bg-primary/10 p-3 group-hover:scale-110 transition-transform",children:l.icon}),s.jsx("span",{className:"text-sm font-semibold leading-none",children:l.label}),s.jsx("span",{className:"text-xs text-muted-foreground",children:l.sub})]})},l.to))})}),!n&&t.length>0&&s.jsxs(F.section,{variants:r,initial:"hidden",animate:"visible",className:"mb-12",children:[s.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ia,{className:"h-5 w-5 text-primary"}),s.jsx("h2",{className:"font-display text-2xl font-semibold",children:"Популярные товары"})]}),s.jsx(z,{variant:"outline",asChild:!0,children:s.jsx(H,{to:"/items",children:"Смотреть все"})})]}),s.jsx("div",{className:"grid gap-4 grid-cols-2 sm:grid-cols-2 lg:grid-cols-4",children:t.slice(0,8).map((l,c)=>s.jsx(F.div,{variants:o,children:s.jsx(J,{className:"group overflow-hidden transition-all hover:shadow-lg",children:s.jsxs(H,{to:`/items/${l.id}`,children:[s.jsxs("div",{className:"relative aspect-square md:aspect-[3/4] overflow-hidden",children:[s.jsx(Ye,{src:l.image_url,alt:l.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105",fallbackClassName:"h-full w-full"}),s.jsx("div",{className:"absolute top-3 left-3",children:s.jsxs(le,{variant:"secondary",className:"bg-background/80 backdrop-blur-sm",children:["#",c+1]})})]}),s.jsxs(X,{className:"p-4",children:[s.jsxs("div",{className:"mb-2",children:[l.category&&s.jsx(le,{variant:"outline",className:"mb-2 text-xs capitalize",children:Je[l.category]??l.category}),s.jsx("h3",{className:"font-medium leading-tight",title:l.name,children:l.name}),l.brand&&s.jsx("p",{className:"text-sm text-muted-foreground",children:l.brand})]}),l.price!==null&&l.price!==void 0&&s.jsxs("p",{className:"font-semibold",children:[l.price.toLocaleString()," ₸"]})]})]})})},l.id))})]}),!n&&t.length===0&&s.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},className:"py-12 text-center",children:[s.jsx(Be,{className:"mx-auto mb-4 h-12 w-12 text-muted-foreground"}),s.jsx("h3",{className:"mb-2 font-semibold",children:"Пока нет популярных товаров"}),s.jsx("p",{className:"text-muted-foreground",children:"Начните добавлять товары в избранное, чтобы увидеть тренды"})]})]})},xm=async()=>(await U.get("/api/profile/")).data,Kb=async e=>(await U.patch("/api/profile/",e)).data,Gb=async()=>{await U.delete("/api/profile/")},Jb=async e=>{const t=new FormData;return t.append("file",e),(await U.post("/api/profile/avatar",t,{headers:{"Content-Type":"multipart/form-data"}})).data},Xb=async()=>(await U.delete("/api/profile/avatar")).data,Yb=h.createContext({toast:()=>{}}),Oe=()=>h.useContext(Yb),Zb=()=>{const[e,t]=h.useState(null),[a,n]=h.useState(!0),{toast:i}=Oe(),r=u=>u?Array.isArray(u)?u:u.split(",").map(d=>d.trim()).filter(Boolean):[];if(h.useEffect(()=>{(async()=>{try{const d=await xm();t(d)}catch{i({variant:"destructive",title:"Ошибка",description:"Не удалось загрузить профиль"})}finally{n(!1)}})()},[i]),a)return s.jsx("div",{className:"flex h-64 items-center justify-center",children:s.jsx(fm,{})});if(!e)return null;const o=`${e.first_name||""} ${e.last_name||""}`.trim()||"Без имени",l=((e.first_name||e.last_name||e.email)[0]||"?").toUpperCase(),c=(u,d)=>s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:u}),s.jsx("p",{className:"text-lg font-semibold",children:d||s.jsx("span",{className:"text-muted-foreground",children:"—"})})]});return s.jsxs(F.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"container mx-auto max-w-4xl px-4 py-8 space-y-8",children:[s.jsxs("div",{className:"bg-background rounded-xl shadow-sm overflow-hidden border",children:[s.jsx("div",{className:"h-32 w-full bg-muted"}),s.jsxs("div",{className:"px-6 pb-10 -mt-12 flex flex-col sm:flex-row sm:items-end sm:justify-between gap-4",children:[s.jsxs("div",{className:"flex items-end gap-4",children:[s.jsxs(Ha,{className:"h-32 w-32 border-4 border-background",children:[s.jsx(Wa,{src:e.avatar||void 0,alt:o}),s.jsx(Ka,{className:"bg-primary text-primary-foreground text-2xl font-bold",children:l})]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:o}),s.jsx("p",{className:"text-muted-foreground",children:e.email})]})]}),s.jsx(z,{asChild:!0,variant:"outline",children:s.jsx(H,{to:"/settings",children:"Редактировать профиль"})})]})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs(J,{children:[s.jsxs(pe,{children:[s.jsxs(fe,{className:"text-xl font-semibold flex items-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),"Контактная информация"]}),s.jsx(Re,{children:"Основные сведения"})]}),s.jsxs(X,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-muted",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M7 2a2 2 0 00-2 2v12a2 2 0 002 2h6a2 2 0 002-2V4a2 2 0 00-2-2H7zm3 14a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})}),c("Телефон",e.phone_number)]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-muted",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})})}),c("Дата рождения",e.date_of_birth?new Date(e.date_of_birth).toLocaleDateString("ru-RU"):void 0)]})]})]}),s.jsxs(J,{children:[s.jsxs(pe,{children:[s.jsxs(fe,{className:"text-xl font-semibold flex items-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),"Параметры тела"]}),s.jsx(Re,{children:"Сантиметры / килограммы"})]}),s.jsx(X,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("div",{className:"p-4 bg-muted rounded-lg",children:c("Рост",e.height?`${e.height} см`:void 0)}),s.jsx("div",{className:"p-4 bg-muted rounded-lg",children:c("Вес",e.weight?`${e.weight} кг`:void 0)}),s.jsx("div",{className:"p-4 bg-muted rounded-lg",children:c("Грудь",e.chest?`${e.chest} см`:void 0)}),s.jsx("div",{className:"p-4 bg-muted rounded-lg",children:c("Талия",e.waist?`${e.waist} см`:void 0)}),s.jsx("div",{className:"p-4 bg-muted rounded-lg",children:c("Бедра",e.hips?`${e.hips} см`:void 0)})]})})]}),s.jsxs(J,{className:"md:col-span-2",children:[s.jsxs(pe,{children:[s.jsxs(fe,{className:"text-xl font-semibold flex items-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),"Предпочтения"]}),s.jsx(Re,{children:"Ваш стиль и бренды"})]}),s.jsxs(X,{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Любимые цвета"}),r(e.favorite_colors).length?s.jsx("div",{className:"flex flex-wrap gap-2",children:r(e.favorite_colors).map(u=>s.jsx(le,{className:"px-3 py-1.5 capitalize",style:{backgroundColor:u,color:"#fff"},children:u},u))}):s.jsx("p",{className:"text-muted-foreground",children:"Не указаны"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Любимые бренды"}),r(e.favorite_brands).length?s.jsx("div",{className:"flex flex-wrap gap-2",children:r(e.favorite_brands).map(u=>s.jsx(le,{variant:"secondary",className:"px-3 py-1.5 capitalize",children:u},u))}):s.jsx("p",{className:"text-muted-foreground",children:"Не указаны"})]})]})]})]})]})},ee=h.forwardRef(({className:e,...t},a)=>s.jsx("label",{ref:a,className:te("block text-sm font-medium leading-6 text-muted-foreground","peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));ee.displayName="Label";const ot=h.forwardRef(({className:e,...t},a)=>s.jsx("textarea",{className:te("flex min-h-[100px] w-full rounded-lg border border-muted-foreground/30 bg-background px-4 py-3 text-sm text-foreground transition-colors","placeholder:text-muted-foreground/60 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary/30","disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));ot.displayName="Textarea";const Qb=({className:e="",showDetails:t=!1})=>{const[a,n]=h.useState({isInstalled:!1,isOnline:navigator.onLine,hasServiceWorker:!1,hasNotifications:!1,hasPushManager:!1});h.useEffect(()=>{const o=()=>{const d=window.matchMedia("(display-mode: standalone)").matches,m=window.navigator.standalone===!0,p="serviceWorker"in navigator,x="Notification"in window,f="PushManager"in window;n({isInstalled:d||m,isOnline:navigator.onLine,hasServiceWorker:p,hasNotifications:x,hasPushManager:f})};o();const l=()=>n(d=>({...d,isOnline:!0})),c=()=>n(d=>({...d,isOnline:!1})),u=()=>o();return window.addEventListener("online",l),window.addEventListener("offline",c),window.matchMedia("(display-mode: standalone)").addEventListener("change",u),()=>{window.removeEventListener("online",l),window.removeEventListener("offline",c),window.matchMedia("(display-mode: standalone)").removeEventListener("change",u)}},[]);const i=o=>o?s.jsx(Ss,{className:"w-4 h-4 text-green-500"}):s.jsx(Da,{className:"w-4 h-4 text-red-500"}),r=(o,l,c)=>o?l:c;return t?s.jsxs("div",{className:`bg-gray-50 rounded-lg p-4 space-y-3 ${e}`,children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bd,{className:"w-4 h-4 text-blue-500"}),s.jsx("span",{className:"font-medium",children:"Статус PWA"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Установка приложения:"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm",children:r(a.isInstalled,"Установлено","Не установлено")}),i(a.isInstalled)]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Подключение к интернету:"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[a.isOnline?s.jsx(Zf,{className:"w-4 h-4 text-green-500"}):s.jsx(Yf,{className:"w-4 h-4 text-red-500"}),s.jsx("span",{className:"text-sm",children:r(a.isOnline,"Онлайн","Офлайн")})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Service Worker:"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm",children:r(a.hasServiceWorker,"Поддерживается","Не поддерживается")}),i(a.hasServiceWorker)]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Уведомления:"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm",children:r(a.hasNotifications,"Поддерживаются","Не поддерживаются")}),i(a.hasNotifications)]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Push уведомления:"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm",children:r(a.hasPushManager,"Поддерживаются","Не поддерживаются")}),i(a.hasPushManager)]})]})]})]}):s.jsxs("div",{className:`flex items-center space-x-2 text-sm ${e}`,children:[s.jsx(Uf,{className:"w-4 h-4"}),s.jsx("span",{children:a.isInstalled?"Установлено":"Не установлено"}),i(a.isInstalled)]})},ej={avatar:"",first_name:"",last_name:"",phone_number:"",date_of_birth:"",height:void 0,weight:void 0,chest:void 0,waist:void 0,hips:void 0,favorite_colors:"",favorite_brands:""},tj=()=>{const e=dt(),{toast:t}=Oe(),{logout:a,updateUser:n}=Ee(),[i,r]=h.useState(ej),[o,l]=h.useState(!0),[c,u]=h.useState(!1),[d,m]=h.useState(!1),[p,x]=h.useState(!1),[f,v]=h.useState({}),g=h.useRef(null);h.useEffect(()=>{(async()=>{try{const w=await xm();r({avatar:w.avatar||"",first_name:w.first_name||"",last_name:w.last_name||"",phone_number:w.phone_number||"",date_of_birth:w.date_of_birth||"",height:w.height,weight:w.weight,chest:w.chest,waist:w.waist,hips:w.hips,favorite_colors:Array.isArray(w.favorite_colors)?w.favorite_colors.join(", "):w.favorite_colors||"",favorite_brands:Array.isArray(w.favorite_brands)?w.favorite_brands.join(", "):w.favorite_brands||""})}catch{t({variant:"destructive",title:"Ошибка",description:"Не удалось загрузить профиль"})}finally{l(!1)}})()},[t]);const S=(y,w)=>{switch(y){case"first_name":case"last_name":if(w&&w.trim()){const b=w.trim();if(b.length>50)return"Не более 50 символов";if(!/^[a-zA-Zа-яА-Я\s-]+$/.test(b))return"Только буквы, пробелы и дефисы"}break;case"phone_number":if(w&&w.trim()&&!/^\+?[0-9]{7,15}$/.test(w))return"Формат: +77071234567";break;case"height":if(w!==void 0&&w!==""&&w!==null){const b=Number(w);if(isNaN(b)||b<=0)return"Должно быть положительным числом";if(b>300)return"Не более 300 см"}break;case"weight":if(w!==void 0&&w!==""&&w!==null){const b=Number(w);if(isNaN(b)||b<=0)return"Должно быть положительным числом";if(b>500)return"Не более 500 кг"}break;case"chest":case"waist":case"hips":if(w!==void 0&&w!==""&&w!==null){const b=Number(w);if(isNaN(b)||b<=0)return"Должно быть положительным числом";if(b>200)return"Не более 200 см"}break;case"date_of_birth":if(w&&w.trim()){const b=new Date(w);if(isNaN(b.getTime()))return"Некорректная дата";const R=new Date;if(R.setHours(0,0,0,0),b>R)return"Не может быть в будущем";const M=(R.getTime()-b.getTime())/(1e3*60*60*24*365.25);if(M<13)return"Минимум 13 лет";if(M>120)return"Некорректная дата"}break;case"avatar":if(w&&w.trim()){const b=w.trim();if(!(b.startsWith("http://")||b.startsWith("https://")||b.startsWith("/")))return"Ссылка должна быть абсолютной (http://, https://) или начинаться с /"}break}return""},k=y=>{const{name:w,value:b}=y.target;r(M=>({...M,[w]:b}));const R=S(w,b);v(M=>({...M,[w]:R}))},C=y=>{const{name:w,value:b}=y.target,R=b===""?void 0:Number(b);if(R!==void 0&&R<0)return;r(j=>({...j,[w]:R}));const M=S(w,b);v(j=>({...j,[w]:M}))},_=async y=>{var R,M,j,P;if(y.preventDefault(),Object.values(f).some(D=>D!=="")){t({variant:"destructive",title:"Ошибки валидации",description:"Исправьте ошибки в полях формы"});return}const b={...i};typeof b.favorite_colors=="string"&&(b.favorite_colors=b.favorite_colors.split(",").map(D=>D.trim()).filter(D=>D!=="")),typeof b.favorite_brands=="string"&&(b.favorite_brands=b.favorite_brands.split(",").map(D=>D.trim()).filter(D=>D!=="")),u(!0);try{const D=await Kb(b);n(D),t({title:"Профиль обновлен"}),e("/profile")}catch(D){let E=((M=(R=D==null?void 0:D.response)==null?void 0:R.data)==null?void 0:M.detail)||"Не удалось обновить профиль";Array.isArray((P=(j=D==null?void 0:D.response)==null?void 0:j.data)==null?void 0:P.detail)&&(E=D.response.data.detail.map(O=>O.msg).join(". ")),t({variant:"destructive",title:"Ошибка",description:E})}finally{u(!1)}},T=async()=>{if(confirm("Вы уверены, что хотите удалить аккаунт? Это действие необратимо.")){m(!0);try{await Gb(),await a(),e("/")}catch{t({variant:"destructive",title:"Ошибка",description:"Не удалось удалить аккаунт"})}finally{m(!1)}}},V=async y=>{if(!y.target.files||y.target.files.length===0)return;const w=y.target.files[0];x(!0);try{const b=await Jb(w);r(R=>({...R,avatar:b.avatar})),n(b),t({title:"Аватар обновлен"})}catch{t({variant:"destructive",title:"Ошибка",description:"Не удалось загрузить аватар"})}finally{x(!1)}},N=async()=>{var y,w;if(i.avatar&&confirm("Удалить аватар?")){x(!0);try{const b=await Xb();r(R=>({...R,avatar:""})),n(b),t({title:"Аватар удален"})}catch(b){console.error("Error deleting avatar:",b);let R="Не удалось удалить аватар";(w=(y=b==null?void 0:b.response)==null?void 0:y.data)!=null&&w.detail&&(R=b.response.data.detail),t({variant:"destructive",title:"Ошибка",description:R})}finally{x(!1)}}};return o?s.jsx("div",{className:"flex h-64 items-center justify-center",children:s.jsx(ue,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs(F.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"container mx-auto max-w-3xl px-4 py-12",children:[s.jsx("h1",{className:"mb-8 text-3xl font-bold tracking-tight text-foreground",children:"Настройки профиля"}),s.jsxs("form",{onSubmit:_,className:"space-y-8",children:[s.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-sm",children:[s.jsx("h2",{className:"mb-6 text-xl font-semibold text-foreground",children:"Основная информация"}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(ee,{htmlFor:"first_name",className:"text-sm font-medium text-muted-foreground",children:"Имя"}),s.jsx(Z,{id:"first_name",name:"first_name",value:i.first_name||"",onChange:k,placeholder:"Имя",className:`focus:ring-1 focus:ring-primary ${f.first_name?"border-red-500 focus:border-red-500":"focus:border-primary"}`}),f.first_name&&s.jsx("p",{className:"text-sm text-red-500",children:f.first_name})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ee,{htmlFor:"last_name",className:"text-sm font-medium text-muted-foreground",children:"Фамилия"}),s.jsx(Z,{id:"last_name",name:"last_name",value:i.last_name||"",onChange:k,placeholder:"Фамилия",className:`focus:ring-1 focus:ring-primary ${f.last_name?"border-red-500 focus:border-red-500":"focus:border-primary"}`}),f.last_name&&s.jsx("p",{className:"text-sm text-red-500",children:f.last_name})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ee,{htmlFor:"phone_number",className:"text-sm font-medium text-muted-foreground",children:"Телефон"}),s.jsx(Z,{id:"phone_number",name:"phone_number",value:i.phone_number||"",onChange:k,placeholder:"+77071234567",className:`focus:ring-1 focus:ring-primary ${f.phone_number?"border-red-500 focus:border-red-500":"focus:border-primary"}`}),f.phone_number&&s.jsx("p",{className:"text-sm text-red-500",children:f.phone_number})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ee,{htmlFor:"date_of_birth",className:"text-sm font-medium text-muted-foreground",children:"Дата рождения"}),s.jsx(Z,{id:"date_of_birth",name:"date_of_birth",type:"date",value:i.date_of_birth||"",onChange:k,className:`focus:ring-1 focus:ring-primary ${f.date_of_birth?"border-red-500 focus:border-red-500":"focus:border-primary"}`}),f.date_of_birth&&s.jsx("p",{className:"text-sm text-red-500",children:f.date_of_birth})]}),s.jsxs("div",{className:"space-y-3 md:col-span-2 order-first",children:[s.jsx(ee,{className:"text-sm font-medium text-muted-foreground",children:"Аватар"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"relative h-24 w-24 overflow-hidden rounded-full border",children:i.avatar?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:i.avatar,alt:"avatar",className:"h-full w-full rounded-full object-cover"}),s.jsx("button",{type:"button",onClick:N,disabled:p,className:"absolute inset-0 flex items-center justify-center bg-black/60 opacity-0 hover:opacity-100 transition",children:p?s.jsx(ue,{className:"h-6 w-6 animate-spin text-red-500"}):s.jsx(Ze,{className:"h-6 w-6 text-red-500"})})]}):s.jsx("div",{className:"flex h-full w-full items-center justify-center text-xs text-muted-foreground",children:"Нет"})}),s.jsx("input",{type:"file",accept:"image/*",ref:g,onChange:V,className:"hidden"}),s.jsxs(Ua,{children:[s.jsx(qa,{asChild:!0,children:s.jsxs(z,{type:"button",variant:"outline",size:"sm",disabled:p,className:"flex items-center gap-2",children:[p?s.jsx(ue,{className:"h-4 w-4 animate-spin"}):s.jsx(Vs,{className:"h-4 w-4"}),s.jsx("span",{children:"Загрузить"})]})}),s.jsxs(Ks,{className:"w-40",children:[s.jsxs(Pe,{onSelect:y=>{var w;y.preventDefault(),(w=g.current)==null||w.click()},className:"flex items-center gap-2",children:[s.jsx(Vs,{className:"h-4 w-4"})," Файл"]}),s.jsxs(Pe,{onSelect:y=>{y.preventDefault();const w=prompt("Введите URL изображения:");if(w){if(!/^https?:\/\//.test(w)){t({variant:"destructive",title:"Ошибка",description:"URL должен начинаться с http:// или https://"});return}r(b=>({...b,avatar:w}))}},className:"flex items-center gap-2",children:[s.jsx(kd,{className:"h-4 w-4"})," Ссылка"]})]})]})]})]})]})]}),s.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-sm",children:[s.jsx("h2",{className:"mb-6 text-xl font-semibold text-foreground",children:"Параметры тела"}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(ee,{htmlFor:"height",className:"text-sm font-medium text-muted-foreground",children:"Рост (см)"}),s.jsx(Z,{id:"height",name:"height",type:"number",value:i.height??"",onChange:C,placeholder:"e.g. 180",className:`focus:ring-1 focus:ring-primary ${f.height?"border-red-500 focus:border-red-500":"focus:border-primary"}`}),f.height&&s.jsx("p",{className:"text-sm text-red-500",children:f.height})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ee,{htmlFor:"weight",className:"text-sm font-medium text-muted-foreground",children:"Вес (кг)"}),s.jsx(Z,{id:"weight",name:"weight",type:"number",value:i.weight??"",onChange:C,placeholder:"e.g. 75",className:`focus:ring-1 focus:ring-primary ${f.weight?"border-red-500 focus:border-red-500":"focus:border-primary"}`}),f.weight&&s.jsx("p",{className:"text-sm text-red-500",children:f.weight})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ee,{htmlFor:"chest",className:"text-sm font-medium text-muted-foreground",children:"Грудь (см)"}),s.jsx(Z,{id:"chest",name:"chest",type:"number",value:i.chest??"",onChange:C,placeholder:"e.g. 96",className:`focus:ring-1 focus:ring-primary ${f.chest?"border-red-500 focus:border-red-500":"focus:border-primary"}`}),f.chest&&s.jsx("p",{className:"text-sm text-red-500",children:f.chest})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ee,{htmlFor:"waist",className:"text-sm font-medium text-muted-foreground",children:"Талия (см)"}),s.jsx(Z,{id:"waist",name:"waist",type:"number",value:i.waist??"",onChange:C,placeholder:"e.g. 78",className:`focus:ring-1 focus:ring-primary ${f.waist?"border-red-500 focus:border-red-500":"focus:border-primary"}`}),f.waist&&s.jsx("p",{className:"text-sm text-red-500",children:f.waist})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ee,{htmlFor:"hips",className:"text-sm font-medium text-muted-foreground",children:"Бедра (см)"}),s.jsx(Z,{id:"hips",name:"hips",type:"number",value:i.hips??"",onChange:C,placeholder:"e.g. 100",className:`focus:ring-1 focus:ring-primary ${f.hips?"border-red-500 focus:border-red-500":"focus:border-primary"}`}),f.hips&&s.jsx("p",{className:"text-sm text-red-500",children:f.hips})]})]})]}),s.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-sm",children:[s.jsx("h2",{className:"mb-6 text-xl font-semibold text-foreground",children:"Предпочтения"}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(ee,{htmlFor:"favorite_colors",className:"text-sm font-medium text-muted-foreground",children:"Любимые цвета (через запятую)"}),s.jsx(ot,{id:"favorite_colors",name:"favorite_colors",value:Array.isArray(i.favorite_colors)?i.favorite_colors.join(", "):i.favorite_colors||"",onChange:k,placeholder:"Красный, Черный, Белый",className:"resize-none focus:border-primary focus:ring-1 focus:ring-primary"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ee,{htmlFor:"favorite_brands",className:"text-sm font-medium text-muted-foreground",children:"Любимые бренды (через запятую)"}),s.jsx(ot,{id:"favorite_brands",name:"favorite_brands",value:Array.isArray(i.favorite_brands)?i.favorite_brands.join(", "):i.favorite_brands||"",onChange:k,placeholder:"Nike, Adidas, Zara",className:"resize-none focus:border-primary focus:ring-1 focus:ring-primary"})]})]})]}),s.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-sm",children:[s.jsx("h2",{className:"mb-6 text-xl font-semibold text-foreground",children:"Приложение"}),s.jsx(Qb,{showDetails:!0})]}),s.jsxs("div",{className:"flex justify-between gap-4",children:[s.jsxs(z,{type:"button",variant:"destructive",onClick:T,disabled:d,className:"flex items-center gap-2",children:[d?s.jsx(ue,{className:"h-4 w-4 animate-spin"}):s.jsx(Ze,{className:"h-4 w-4"}),"Удалить аккаунт"]}),s.jsxs(z,{type:"submit",disabled:c,className:"flex items-center gap-2",children:[c&&s.jsx(ue,{className:"h-4 w-4 animate-spin"}),!c&&s.jsx(ds,{className:"h-4 w-4"}),c?"Сохранение...":"Сохранить"]})]})]})]})},sj=()=>{const{logout:e}=Ee();return h.useEffect(()=>{e()},[]),s.jsx(Xs,{to:"/",replace:!0})},aj=({children:e})=>{const t=rs(),{user:a,loading:n}=Ee(),[i,r]=h.useState(!1),{toast:o}=Oe();return h.useEffect(()=>{!n&&!a&&(r(!0),o({title:"Требуется авторизация",description:"Для доступа к этой странице необходимо войти в систему",variant:"destructive"}))},[a,n,o]),n?s.jsx("div",{className:"flex h-screen items-center justify-center",children:s.jsx(ue,{className:"h-12 w-12 animate-spin"})}):a?e:s.jsxs(s.Fragment,{children:[s.jsx(Xs,{to:"/login",state:{from:t},replace:!0}),i&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/90 backdrop-blur-sm",children:s.jsx("div",{className:"mx-4 w-full max-w-md rounded-lg border bg-card p-6 shadow-lg",children:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(Xi,{className:"h-12 w-12 text-destructive"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold",children:"Требуется авторизация"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Пожалуйста, войдите в систему для доступа к этой странице"})]}),s.jsxs("div",{className:"mt-4 flex gap-3",children:[s.jsx(z,{variant:"outline",onClick:()=>r(!1),children:"Закрыть"}),s.jsx(z,{asChild:!0,children:s.jsxs("a",{href:"/login",className:"flex items-center",children:[s.jsx(Cd,{className:"mr-2 h-4 w-4"}),"Войти"]})})]})]})})})]})},yt=({children:e})=>{const t=rs(),{isAdmin:a,loading:n}=Ee(),[i,r]=h.useState(!1),{toast:o}=Oe();return h.useEffect(()=>{!n&&!a&&(r(!0),o({title:"Доступ запрещен",description:"Для доступа к этой странице требуются права администратора",variant:"destructive"}))},[a,n,o]),n?s.jsx("div",{className:"flex h-screen items-center justify-center",children:s.jsx(ue,{className:"h-12 w-12 animate-spin"})}):a?e:s.jsxs(s.Fragment,{children:[s.jsx(Xs,{to:"/home",state:{from:t},replace:!0}),i&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/90 backdrop-blur-sm",children:s.jsx("div",{className:"mx-4 w-full max-w-md rounded-lg border bg-card p-6 shadow-lg",children:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(Xi,{className:"h-12 w-12 text-destructive"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold",children:"Доступ ограничен"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Эта страница доступна только администраторам системы. Обратитесь к системному администратору для получения доступа."})]}),s.jsx(z,{size:"sm",onClick:()=>r(!1),className:"mt-4",children:"Понятно"})]})})})]})},nj=({children:e})=>{const t=rs(),{hasPanelAccess:a,loading:n}=Ee(),[i,r]=h.useState(!1),{toast:o}=Oe();return h.useEffect(()=>{!n&&!a&&(r(!0),o({title:"Доступ запрещен",description:"Для доступа к этой странице требуются права администратора или модератора",variant:"destructive"}))},[a,n,o]),n?s.jsx("div",{className:"flex h-screen items-center justify-center",children:s.jsx(ue,{className:"h-12 w-12 animate-spin"})}):a?e:s.jsxs(s.Fragment,{children:[s.jsx(Xs,{to:"/home",state:{from:t},replace:!0}),i&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/90 backdrop-blur-sm",children:s.jsx("div",{className:"mx-4 w-full max-w-md rounded-lg border bg-card p-6 shadow-lg",children:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(Xi,{className:"h-12 w-12 text-destructive"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold",children:"Доступ ограничен"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Эта страница доступна только администраторам или модераторам системы."})]}),s.jsx(z,{size:"sm",onClick:()=>r(!1),className:"mt-4",children:"Понятно"})]})})})]})},Al=1e4,vn=({images:e,className:t="",aspectClassName:a="aspect-square"})=>{const[[n,i],r]=h.useState([0,0]);if(e.length===0)return null;const o=(n%e.length+e.length)%e.length,l={enter:d=>({x:d>0?300:-300,opacity:0}),center:{x:0,opacity:1},exit:d=>({x:d<0?300:-300,opacity:0})},c=d=>{r([n+d,d])},u=e.map(d=>d.startsWith("/uploads/")?`${window.location.origin}${d}`:d);return s.jsxs("div",{className:`relative overflow-hidden rounded-md border border-border bg-background ${a} ${t}`,children:[s.jsx(Oy,{custom:i,initial:!1,children:s.jsx(F.img,{src:u[o],custom:i,variants:l,initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},drag:"x",dragConstraints:{left:0,right:0},dragElastic:.2,onDragEnd:(d,{offset:m,velocity:p})=>{const x=Math.abs(m.x)*p.x;x<-Al?c(1):x>Al&&c(-1)},className:"h-full w-full object-contain select-none"},o)}),e.length>1&&s.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex justify-center gap-1 rounded-full bg-black/30 px-2 py-1 backdrop-blur-sm",children:e.map((d,m)=>s.jsx("span",{className:`block h-1.5 w-1.5 rounded-full transition-colors ${m===o?"bg-white/90":"bg-white/40"}`},m))})]})},ht=cp,ft=dp,lt=h.forwardRef(({className:e,children:t,...a},n)=>s.jsxs(kc,{ref:n,className:te("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...a,children:[t,s.jsx(np,{asChild:!0,children:s.jsx(Mf,{className:"h-4 w-4 opacity-50"})})]}));lt.displayName=kc.displayName;const ct=h.forwardRef(({className:e,children:t,position:a="popper",...n},i)=>s.jsx(ip,{children:s.jsx(Sc,{ref:i,className:te("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...n,children:s.jsx(rp,{className:te("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t})})}));ct.displayName=Sc.displayName;const ij=h.forwardRef(({className:e,...t},a)=>s.jsx(Cc,{ref:a,className:te("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));ij.displayName=Cc.displayName;const Ne=h.forwardRef(({className:e,children:t,...a},n)=>s.jsxs(Pc,{ref:n,className:te("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(op,{children:s.jsx(gd,{className:"h-4 w-4"})})}),s.jsx(lp,{children:t})]}));Ne.displayName=Pc.displayName;const rj=h.forwardRef(({className:e,...t},a)=>s.jsx(Tc,{ref:a,className:te("-mx-1 my-1 h-px bg-muted",e),...t}));rj.displayName=Tc.displayName;const bt=h.forwardRef(({className:e,...t},a)=>s.jsx(Ac,{className:te("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent","transition-colors duration-200 ease-in-out","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background","disabled:cursor-not-allowed disabled:opacity-50","data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:a,children:s.jsx(up,{className:te("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform duration-200","data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0","dark:bg-gray-100")})}));bt.displayName=Ac.displayName;var bn="Popover",[gm,S1]=mp(bn,[Ec]),ia=Ec(),[oj,Ct]=gm(bn),ym=e=>{const{__scopePopover:t,children:a,open:n,defaultOpen:i,onOpenChange:r,modal:o=!1}=e,l=ia(t),c=h.useRef(null),[u,d]=h.useState(!1),[m,p]=jp({prop:n,defaultProp:i??!1,onChange:r,caller:bn});return s.jsx(wp,{...l,children:s.jsx(oj,{scope:t,contentId:Np(),triggerRef:c,open:m,onOpenChange:p,onOpenToggle:h.useCallback(()=>p(x=>!x),[p]),hasCustomAnchor:u,onCustomAnchorAdd:h.useCallback(()=>d(!0),[]),onCustomAnchorRemove:h.useCallback(()=>d(!1),[]),modal:o,children:a})})};ym.displayName=bn;var vm="PopoverAnchor",lj=h.forwardRef((e,t)=>{const{__scopePopover:a,...n}=e,i=Ct(vm,a),r=ia(a),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=i;return h.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(_c,{...r,...n,ref:t})});lj.displayName=vm;var bm="PopoverTrigger",jm=h.forwardRef((e,t)=>{const{__scopePopover:a,...n}=e,i=Ct(bm,a),r=ia(a),o=Oc(t,i.triggerRef),l=s.jsx(Lc.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Cm(i.open),...n,ref:o,onClick:ks(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?l:s.jsx(_c,{asChild:!0,...r,children:l})});jm.displayName=bm;var Vr="PopoverPortal",[cj,dj]=gm(Vr,{forceMount:void 0}),wm=e=>{const{__scopePopover:t,forceMount:a,children:n,container:i}=e,r=Ct(Vr,t);return s.jsx(cj,{scope:t,forceMount:a,children:s.jsx(Rc,{present:a||r.open,children:s.jsx(pp,{asChild:!0,container:i,children:n})})})};wm.displayName=Vr;var as="PopoverContent",Nm=h.forwardRef((e,t)=>{const a=dj(as,e.__scopePopover),{forceMount:n=a.forceMount,...i}=e,r=Ct(as,e.__scopePopover);return s.jsx(Rc,{present:n||r.open,children:r.modal?s.jsx(mj,{...i,ref:t}):s.jsx(pj,{...i,ref:t})})});Nm.displayName=as;var uj=xp("PopoverContent.RemoveScroll"),mj=h.forwardRef((e,t)=>{const a=Ct(as,e.__scopePopover),n=h.useRef(null),i=Oc(t,n),r=h.useRef(!1);return h.useEffect(()=>{const o=n.current;if(o)return hp(o)},[]),s.jsx(fp,{as:uj,allowPinchZoom:!0,children:s.jsx(km,{...e,ref:i,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ks(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),r.current||(l=a.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ks(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;r.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:ks(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),pj=h.forwardRef((e,t)=>{const a=Ct(as,e.__scopePopover),n=h.useRef(!1),i=h.useRef(!1);return s.jsx(km,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,r),r.defaultPrevented||(n.current||(l=a.triggerRef.current)==null||l.focus(),r.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:r=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,r),r.defaultPrevented||(n.current=!0,r.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=r.target;((u=a.triggerRef.current)==null?void 0:u.contains(o))&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&i.current&&r.preventDefault()}})}),km=h.forwardRef((e,t)=>{const{__scopePopover:a,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:r,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...m}=e,p=Ct(as,a),x=ia(a);return gp(),s.jsx(yp,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:r,children:s.jsx(vp,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:s.jsx(bp,{"data-state":Cm(p.open),role:"dialog",id:p.contentId,...x,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Sm="PopoverClose",hj=h.forwardRef((e,t)=>{const{__scopePopover:a,...n}=e,i=Ct(Sm,a);return s.jsx(Lc.button,{type:"button",...n,ref:t,onClick:ks(e.onClick,()=>i.onOpenChange(!1))})});hj.displayName=Sm;var fj="PopoverArrow",xj=h.forwardRef((e,t)=>{const{__scopePopover:a,...n}=e,i=ia(a);return s.jsx(kp,{...i,...n,ref:t})});xj.displayName=fj;function Cm(e){return e?"open":"closed"}var gj=ym,yj=jm,vj=wm,Pm=Nm;const ra=gj,oa=yj,fs=h.forwardRef(({className:e,align:t="center",sideOffset:a=4,...n},i)=>s.jsx(vj,{children:s.jsx(Pm,{ref:i,align:t,sideOffset:a,className:te("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));fs.displayName=Pm.displayName;const bj=()=>{const[e,t]=h.useState([]),[a,n]=h.useState(!0),[i,r]=h.useState(!1),[o,l]=h.useState(""),[c,u]=h.useState(1),[d,m]=h.useState(!0),{isFavorite:p,toggleFavorite:x}=cs(),[f,v]=h.useState(void 0),[g,S]=h.useState(!1),[k,C]=h.useState(!1),[_,T]=h.useState(""),[V,N]=h.useState(""),y=async(E,O,L,$)=>{const B={page:E};O!=null&&O!==""&&(B.q=O),L&&L!=="all"&&(B.category=L);let A=await Vt(B);return $&&(A=A.filter(Y=>D(Y).hasDiscount)),(_||V)&&(A=A.filter(Y=>{const Q=P(Y);if(Q===void 0)return!1;const ne=_?parseFloat(_):0,W=V?parseFloat(V):1/0;return Q>=ne&&Q<=W})),A};h.useEffect(()=>{n(!0),t([]),m(!0),u(1),y(1,o,f,g).then(E=>{t(E),m(E.length===20),n(!1)})},[o,f,g,_,V]),h.useEffect(()=>{c!==1&&(r(!0),y(c,o,f,g).then(E=>{t(O=>[...O,...E]),m(E.length===20),r(!1)}))},[c]);const w=E=>{E.preventDefault(),l(o)},b=h.useRef(null),R=h.useCallback(E=>{a||d&&(b.current&&b.current.disconnect(),b.current=new IntersectionObserver(O=>{O[0].isIntersecting&&u(L=>L+1)}),E&&b.current.observe(E))},[a,d]);h.useEffect(()=>{c!==1&&y(c,o,f,g)},[c,o,f,g]);const M={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},j={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},P=E=>{if(E.variants&&E.variants.length>0){const O=E.variants.map(L=>L.price).filter(L=>typeof L=="number"&&L!==null);if(O.length>0)return Math.min(...O)}return E.price??void 0},D=E=>{if(!E.price||typeof E.price!="number")return{hasDiscount:!1};const O=P(E);if(!O||O>=E.price)return{hasDiscount:!1};const L=Math.round((E.price-O)/E.price*100);return{hasDiscount:!0,originalPrice:E.price,discountPercent:L}};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8",children:[s.jsx("h1",{className:"mb-4 font-display text-3xl font-bold tracking-tight",children:"Товары"}),s.jsx("p",{className:"text-muted-foreground",children:"Найдите идеальные вещи для вашего гардероба."})]}),s.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"mb-8 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("form",{onSubmit:w,className:"flex w-full max-w-md items-center gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(qe,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(Z,{placeholder:"Поиск товаров...",value:o,onChange:E=>l(E.target.value),className:"pl-10"})]}),s.jsx(z,{type:"submit",size:"icon",children:s.jsx(qe,{className:"h-4 w-4"})})]}),s.jsxs(ra,{open:k,onOpenChange:C,children:[s.jsx(oa,{asChild:!0,children:s.jsxs(z,{variant:"outline",className:"flex items-center gap-2",children:[s.jsx(Zi,{className:"h-4 w-4"}),"Фильтры"]})}),s.jsx(fs,{className:"w-64",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{children:[s.jsx(ee,{className:"mb-1 block",children:"Категория"}),s.jsxs(ht,{value:f||"",onValueChange:E=>v(E===""?void 0:E),children:[s.jsx(lt,{children:s.jsx(ft,{placeholder:"Все категории"})}),s.jsxs(ct,{children:[s.jsx(Ne,{value:"all",children:"Все категории"}),Object.entries(Je).map(([E,O])=>s.jsx(Ne,{value:E,children:O},E))]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ee,{htmlFor:"discount-switch",children:"Только со скидкой"}),s.jsx(bt,{id:"discount-switch",checked:g,onCheckedChange:S})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{className:"block",children:"Цена"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"flex-1",children:s.jsx(Z,{placeholder:"От",value:_,onChange:E=>T(E.target.value),type:"number",min:"0"})}),s.jsx("div",{className:"flex-1",children:s.jsx(Z,{placeholder:"До",value:V,onChange:E=>N(E.target.value),type:"number",min:"0"})})]})]})]})})]})]}),a&&s.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:Array.from({length:8}).map((E,O)=>s.jsxs(J,{className:"overflow-hidden",children:[s.jsx("div",{className:"aspect-[3/4] animate-pulse bg-muted"}),s.jsx(X,{className:"p-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-4 animate-pulse rounded bg-muted"}),s.jsx("div",{className:"h-3 w-2/3 animate-pulse rounded bg-muted"}),s.jsx("div",{className:"h-4 w-1/3 animate-pulse rounded bg-muted"})]})})]},O))}),!a&&e.length>0&&s.jsx(F.div,{variants:M,initial:"hidden",animate:"visible",className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:e.map((E,O)=>{const L=O===e.length-1?{ref:R}:{};return s.jsx(F.div,{variants:j,...L,children:s.jsx(J,{className:"group overflow-hidden transition-all hover:shadow-lg",children:s.jsxs(H,{to:`/items/${E.id}`,children:[s.jsxs("div",{className:"relative aspect-[3/4] overflow-hidden",children:[E.image_urls&&E.image_urls.length>0?s.jsx(vn,{images:E.image_urls,className:"transition-transform duration-500 group-hover:scale-105"}):s.jsx(Ye,{src:E.image_url,alt:E.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105",fallbackClassName:"h-full w-full"}),(()=>{const $=D(E);return $.hasDiscount?s.jsx("div",{className:"absolute top-3 left-3",children:s.jsxs(le,{className:"bg-red-500 text-white text-xs font-bold",children:["-",$.discountPercent,"%"]})}):null})(),s.jsx("div",{className:"absolute top-3 right-3 opacity-0 transition-opacity group-hover:opacity-100",children:s.jsx(z,{size:"icon",variant:"secondary",className:"h-8 w-8 rounded-full",onClick:async $=>{$.preventDefault(),await x(E.id)},children:s.jsx(Me,{className:`h-4 w-4 ${p(E.id)?"fill-primary text-primary":""}`})})})]}),s.jsxs(X,{className:"p-4",children:[s.jsxs("div",{className:"mb-2",children:[E.category&&s.jsx(le,{variant:"outline",className:"mb-2 text-xs capitalize",children:Je[E.category]??E.category}),s.jsx("h3",{className:"font-medium leading-tight",title:E.name,children:E.name}),E.brand&&s.jsx("p",{className:"text-sm text-muted-foreground",children:E.brand})]}),(()=>{const $=P(E),B=D(E);return $===void 0?null:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("p",{className:"font-semibold",children:[$.toLocaleString()," ₸"]}),B.hasDiscount&&B.originalPrice&&s.jsxs("p",{className:"text-sm text-muted-foreground line-through",children:[B.originalPrice.toLocaleString()," ₸"]})]})})()]})]})})},E.id)})}),i&&s.jsx("div",{className:"mt-8 flex justify-center",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Загрузка..."})]})}),!a&&d&&s.jsx("div",{className:"mt-8 flex justify-center",children:s.jsx(z,{onClick:()=>u(E=>E+1),disabled:i,variant:"outline",children:i?"Загрузка...":`Загрузить ещё (${c} → ${c+1})`})}),!a&&!i&&!d&&e.length>0&&s.jsx("div",{className:"mt-8 text-center",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Больше товаров нет"})}),!a&&e.length===0&&s.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},className:"py-16 text-center",children:[s.jsx(Be,{className:"mx-auto mb-4 h-16 w-16 text-muted-foreground"}),s.jsx("h3",{className:"mb-2 font-display text-xl font-semibold",children:"Товары не найдены"}),s.jsx("p",{className:"text-muted-foreground",children:"Попробуйте изменить параметры поиска или вернитесь позже"})]})]})},ns=({value:e=0,onChange:t,className:a})=>{const n=Array.from({length:5},(r,o)=>o+1),i="h-4 w-4";return s.jsx("div",{className:Ts("flex items-center gap-1",a),children:n.map(r=>{const o=e>=r;return s.jsx("button",{type:"button",disabled:!t,onClick:()=>t==null?void 0:t(r),className:Ts("transition-colors",i,!t&&"cursor-default"),children:s.jsx(tr,{className:Ts(i,o?"fill-yellow-400 text-yellow-400":"text-gray-400")})},r)})})},ce=h.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:te("animate-pulse rounded-md bg-muted",e),...t}));ce.displayName="Skeleton";const jj=()=>{const{id:e}=kt(),{user:t,isAdmin:a}=Ee(),[n,i]=h.useState(null),[r,o]=h.useState([]),[l,c]=h.useState(!0),[u,d]=h.useState([]),[m,p]=h.useState(""),[x,f]=h.useState(),{isFavorite:v,toggleFavorite:g}=cs(),{addItem:S}=Qs(),[k,C]=h.useState(null),[_,T]=h.useState(1);h.useEffect(()=>{(async()=>{try{if(!e)return;c(!0);const[R,M]=await Promise.all([U.get(`/api/items/${e}`),U.get(`/api/items/${e}/similar`)]);i(R.data),o(M.data);const j=await Oa(Number(e));d(j)}catch(R){console.error(R)}finally{c(!1)}})()},[e]);const V=async()=>{e&&await g(Number(e))},N=async()=>{if(!(!e||!m.trim()))try{const b=await md(Number(e),{content:m,rating:x});d([b,...u]),p(""),f(void 0)}catch(b){console.error(b)}};if(l)return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("div",{className:"mb-6",children:s.jsx(ce,{className:"h-6 w-24 rounded-full"})}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[s.jsx("div",{className:"w-full md:w-1/2",children:s.jsx(ce,{className:"aspect-square rounded-xl"})}),s.jsxs("div",{className:"w-full md:w-1/2 space-y-6",children:[s.jsx(ce,{className:"h-9 w-3/4 rounded-lg"}),s.jsx(ce,{className:"h-5 w-1/2 rounded-lg"}),s.jsx(ce,{className:"h-7 w-1/4 rounded-lg"}),s.jsxs("div",{className:"space-y-4 pt-4",children:[s.jsx(ce,{className:"h-4 w-full rounded-lg"}),s.jsx(ce,{className:"h-4 w-4/5 rounded-lg"}),s.jsx(ce,{className:"h-4 w-3/4 rounded-lg"})]}),s.jsxs("div",{className:"flex gap-4 pt-6",children:[s.jsx(ce,{className:"h-12 flex-1 rounded-lg"}),s.jsx(ce,{className:"h-12 w-12 rounded-lg"})]})]})]})]});if(!n)return s.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},className:"container mx-auto px-4 py-16 text-center",children:[s.jsx(Be,{className:"mx-auto mb-4 h-16 w-16 text-muted-foreground"}),s.jsx("h3",{className:"mb-2 text-2xl font-semibold tracking-tight",children:"Товар не найден"}),s.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"Возможно, товар был удален или перемещен"}),s.jsx(z,{asChild:!0,variant:"outline",className:"rounded-full",children:s.jsxs(H,{to:"/items",children:[s.jsx(zt,{className:"mr-2 h-4 w-4"}),"Вернуться в каталог"]})})]});const y=n.variants&&n.variants.length>0?Math.min(...n.variants.map(b=>typeof b.price=="number"?b.price:1/0)):void 0;let w;return(k==null?void 0:k.price)!==void 0&&(k==null?void 0:k.price)!==null?w=k.price:y!==void 0&&y!==1/0?w=y:n.price!==void 0&&n.price!==null&&(w=n.price),s.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},className:"container mx-auto px-4 py-8",children:[s.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-6",children:s.jsx(z,{asChild:!0,variant:"ghost",className:"pl-0 hover:bg-transparent",children:s.jsxs(H,{to:"/items",className:"flex items-center text-sm text-muted-foreground hover:text-foreground",children:[s.jsx(zt,{className:"mr-1 h-4 w-4"}),"Назад к каталогу"]})})}),s.jsxs("div",{className:"mb-16 flex flex-col md:flex-row gap-8 md:gap-12",children:[s.jsx(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6},className:"w-full md:w-1/2",children:n.image_urls&&n.image_urls.length>0?s.jsx(vn,{images:n.image_urls,className:"rounded-xl shadow-sm",aspectClassName:"aspect-square"}):s.jsx("div",{className:"aspect-square overflow-hidden rounded-xl bg-muted shadow-sm",children:s.jsx(Ye,{src:n.image_url,alt:n.name,className:"h-full w-full object-cover transition-transform duration-500 hover:scale-105",fallbackClassName:"flex aspect-square items-center justify-center rounded-xl bg-muted shadow-sm"})})}),s.jsxs(F.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6},className:"w-full md:w-1/2",children:[s.jsx("div",{className:"mb-4 flex items-center justify-between",children:n.category&&s.jsx(le,{variant:"outline",className:"text-xs capitalize",children:Je[n.category]??n.category})}),s.jsx("h1",{className:"mb-2 text-3xl font-bold tracking-tight",children:n.name}),n.brand&&s.jsx("p",{className:"mb-4 text-lg text-muted-foreground",children:n.brand}),w!==void 0&&s.jsxs("p",{className:"mb-6 text-2xl font-bold",children:[w.toLocaleString(),"₸"]}),(n.color||n.size||n.style||n.collection)&&s.jsxs("div",{className:"mb-6 grid grid-cols-1 sm:grid-cols-2 gap-2",children:[n.color&&s.jsxs("div",{className:"rounded-md bg-muted/80 p-2.5 border border-border/50 w-full sm:max-w-[260px]",children:[s.jsx("p",{className:"mb-1 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Цвет"}),s.jsx("p",{className:"text-sm font-medium leading-tight",children:n.color})]}),n.size&&s.jsxs("div",{className:"rounded-md bg-muted/80 p-2.5 border border-border/50 w-full sm:max-w-[260px]",children:[s.jsx("p",{className:"mb-1 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Размер"}),s.jsx("p",{className:"text-sm font-medium leading-tight",children:n.size})]}),n.style&&s.jsxs("div",{className:"rounded-md bg-muted/80 p-2.5 border border-border/50 w-full sm:max-w-[260px]",children:[s.jsx("p",{className:"mb-1 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Стиль"}),s.jsx("p",{className:"text-sm font-medium leading-tight",children:n.style})]}),n.collection&&s.jsxs("div",{className:"rounded-md bg-muted/80 p-2.5 border border-border/50 w-full sm:max-w-[260px]",children:[s.jsx("p",{className:"mb-1 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Коллекция"}),s.jsx("p",{className:"text-sm font-medium leading-tight",children:n.collection})]})]}),n.variants&&n.variants.length>0&&s.jsxs("div",{className:"mb-6 space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Выберите вариант"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:n.variants.map(b=>{const R=[];b.size&&R.push(b.size),b.color&&R.push(b.color);const M=R.join(" ")||b.sku||String(b.id),j=(k==null?void 0:k.id)===b.id,P=b.stock!==void 0&&b.stock===0;return s.jsxs(z,{type:"button",variant:j?"default":"outline",size:"default",disabled:P,className:`flex flex-col items-start justify-between gap-1 rounded-xl border-2 px-3 py-3 transition-all duration-200 min-h-[84px] ${j?"border-primary shadow-sm":"border-transparent hover:border-muted-foreground/40"} ${P?"opacity-50 cursor-not-allowed":""}`,onClick:()=>{C(b),T(1)},children:[s.jsx("span",{className:"font-medium leading-tight",children:M}),b.price!==void 0&&b.price!==null&&s.jsxs("span",{className:"text-sm text-muted-foreground",children:[b.price.toLocaleString(),"₸"]}),b.stock!==void 0&&s.jsx("span",{className:"text-xs text-muted-foreground",children:b.stock>0?`${b.stock} шт.`:"Нет в наличии"})]},b.id)})}),k&&s.jsxs("div",{className:"flex items-center gap-4 pt-2",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Доступно: ",k.stock??"—"]}),s.jsxs("div",{className:"flex items-center gap-2 bg-muted rounded-lg p-1",children:[s.jsx(z,{variant:"ghost",size:"sm",disabled:_<=1,onClick:()=>T(b=>Math.max(1,b-1)),className:"h-8 w-8 rounded-md",children:s.jsx(Qi,{className:"h-3 w-3"})}),s.jsx("span",{className:"w-6 text-center font-medium",children:_}),s.jsx(z,{variant:"ghost",size:"sm",disabled:k.stock!==void 0&&_>=k.stock,onClick:()=>T(b=>k.stock!==void 0?Math.min(k.stock,b+1):b+1),className:"h-8 w-8 rounded-md",children:s.jsx(Ms,{className:"h-3 w-3"})})]})]})]}),n.description&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"mb-2 font-medium",children:"Описание"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:n.description})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(z,{size:"lg",className:"flex-1 rounded-lg shadow-sm hover:shadow-md transition-shadow",disabled:!k,onClick:()=>{!n||!k||S({id:k.id,item_id:n.id,name:n.name,price:k.price??n.price??0,image_url:n.image_url,size:k.size,color:k.color,quantity:_,stock:k.stock})},children:"Добавить в корзину"}),s.jsx(z,{size:"lg",variant:v(Number(e))?"default":"outline",className:"rounded-lg px-3 shadow-sm hover:shadow-md transition-shadow",onClick:V,children:s.jsx(Me,{className:`h-5 w-5 ${v(Number(e))?"fill-current":""}`,strokeWidth:v(Number(e))?2:1.5})})]})]})]}),r.length>0&&s.jsxs(F.section,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:"mb-16",children:[s.jsx("h2",{className:"mb-6 text-2xl font-bold tracking-tight",children:"Похожие товары"}),s.jsx(F.div,{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:r.map(b=>s.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:s.jsx(J,{className:"group overflow-hidden transition-all hover:shadow-lg border-0 shadow-sm",children:s.jsxs(H,{to:`/items/${b.id}`,className:"block",children:[s.jsxs("div",{className:"relative aspect-[3/4] overflow-hidden",children:[(()=>{let R;if(b.variants&&b.variants.length>0){const P=b.variants.map(D=>D.price).filter(D=>typeof D=="number"&&D!==null);P.length>0&&(R=Math.min(...P))}R===void 0&&(R=b.price??void 0);const M=b.price&&R&&R<b.price,j=M?Math.round((b.price-R)/b.price*100):0;return M?s.jsx("div",{className:"absolute top-3 left-3 z-10",children:s.jsxs(le,{className:"bg-red-500 text-white text-xs font-bold",children:["-",j,"%"]})}):null})(),b.image_url?s.jsx("img",{src:b.image_url,alt:b.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"}):s.jsx("div",{className:"flex h-full w-full items-center justify-center bg-muted",children:s.jsx(Be,{className:"h-12 w-12 text-muted-foreground"})})]}),s.jsxs(X,{className:"p-4",children:[s.jsxs("div",{className:"mb-2",children:[b.category&&s.jsx(le,{variant:"outline",className:"mb-2 text-xs capitalize",children:Je[b.category]??b.category}),s.jsx("h3",{className:"font-medium leading-tight line-clamp-1",title:b.name,children:b.name}),b.brand&&s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:b.brand})]}),(()=>{let R;if(b.variants&&b.variants.length>0){const j=b.variants.map(P=>P.price).filter(P=>typeof P=="number"&&P!==null);j.length>0&&(R=Math.min(...j))}R===void 0&&(R=b.price??void 0);const M=b.price&&R&&R<b.price;return M&&Math.round((b.price-R)/b.price*100),R!==void 0?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("p",{className:"font-semibold",children:[R.toLocaleString()," ₸"]}),M&&s.jsxs("p",{className:"text-sm text-muted-foreground line-through",children:[b.price.toLocaleString()," ₸"]})]}):null})()]})]})})},b.id))})]}),s.jsxs(F.section,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.3},className:"mb-16",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Отзывы"}),s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(Qt,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:u.length})]})]}),s.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"mb-8 rounded-xl border p-6 shadow-sm",children:[s.jsx("h3",{className:"mb-4 text-lg font-medium",children:"Оставить отзыв"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"mb-2 text-sm text-muted-foreground",children:"Ваша оценка"}),s.jsx(ns,{value:x,onChange:f})]}),s.jsx(ot,{placeholder:"Расскажите о вашем опыте использования этого товара...",value:m,onChange:b=>p(b.target.value),rows:4,className:"rounded-lg border-muted"}),s.jsx("div",{className:"flex justify-end",children:s.jsx(z,{onClick:N,disabled:!m.trim(),className:"rounded-lg",children:"Отправить отзыв"})})]})]}),u.length===0?s.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},className:"rounded-xl border p-8 text-center shadow-sm",children:[s.jsx(Qt,{className:"mx-auto mb-4 h-12 w-12 text-muted-foreground"}),s.jsx("h3",{className:"mb-2 text-lg font-medium",children:"Пока нет отзывов"}),s.jsx("p",{className:"text-muted-foreground",children:"Будьте первым, кто оставит отзыв об этом товаре"})]}):s.jsx(F.ul,{className:"space-y-4",children:u.map(b=>s.jsx(F.li,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:s.jsxs(J,{className:"overflow-hidden border-0 shadow-sm",children:[s.jsx(pe,{className:"pb-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:b.user_name??"Пользователь"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(b.created_at).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"})})]}),((t==null?void 0:t.id)===b.user_id||a)&&s.jsx(z,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-600 h-8 w-8 rounded-full",onClick:async()=>{if(e&&confirm("Удалить комментарий?"))try{await hd(Number(e),b.id),d(R=>R.filter(M=>M.id!==b.id))}catch(R){console.error(R)}},children:s.jsx(Ze,{className:"h-4 w-4"})})]})}),s.jsxs(X,{className:"pt-0",children:[b.rating!==void 0&&b.rating!==null&&s.jsx("div",{className:"mb-3",children:s.jsx(ns,{value:b.rating})}),s.jsx("p",{className:"mb-4 whitespace-pre-line text-muted-foreground",children:b.content}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs(z,{variant:"ghost",size:"sm",className:"flex items-center gap-2 rounded-full",onClick:async()=>{if(!(!e||!t))try{await pd(Number(e),b.id);const R=await Oa(Number(e));d(R)}catch(R){console.error(R)}},children:[s.jsx(Me,{className:`h-4 w-4 ${b.likes>0?"fill-primary text-primary":""}`}),s.jsx("span",{children:b.likes})]})})]})]})},b.id))})]})]})},wj=async(e={})=>(await U.get("/api/outfits/",{params:e})).data,Tm=async e=>(await U.get(`/api/outfits/${e}`)).data,zr=async e=>(await U.post("/api/outfits/",e)).data,Am=async(e,t)=>(await U.put(`/api/outfits/${e}`,t)).data,Nj=async e=>{await U.post(`/api/outfits/${e}/favorite`)},kj=async(e=1)=>(await U.get("/api/outfits/favorites",{params:{page:e}})).data,Sj=async(e=1)=>(await U.get("/api/outfits/history",{params:{page:e}})).data,Cj=async()=>{await U.delete("/api/outfits/history")},Rl=async e=>(await U.get(`/api/outfits/${e}/comments`)).data,Pj=async(e,t)=>(await U.post(`/api/outfits/${e}/comments`,t)).data,Tj=async(e,t)=>{await U.post(`/api/outfits/${e}/comments/${t}/like`)},Aj=async(e,t)=>{await U.delete(`/api/outfits/${e}/comments/${t}`)},Rj=async e=>(await U.post("/api/outfits/virtual-tryon",e)).data,Ej=()=>{const[e,t]=h.useState([]),[a,n]=h.useState(!0),[i,r]=h.useState(!1),[o,l]=h.useState(""),[c,u]=h.useState(1),[d,m]=h.useState(!0),[p,x]=h.useState(void 0),[f,v]=h.useState(""),[g,S]=h.useState(""),[k,C]=h.useState(!1),[_,T]=h.useState(!1),V=Array.from(new Set(e.map(j=>j.style).filter(Boolean))),N=async(j,P,D,E,O,L)=>{const $={page:j};P!=null&&P!==""&&($.q=P);let q=await wj($);return D&&D!=="all"&&(q=q.filter(A=>A.style===D)),L&&(q=q.filter(A=>typeof A.total_price=="number")),(E||O)&&(q=q.filter(A=>{if(typeof A.total_price!="number")return!1;const Y=E?parseFloat(E):0,Q=O?parseFloat(O):1/0;return A.total_price>=Y&&A.total_price<=Q})),q};h.useEffect(()=>{n(!0),t([]),m(!0),u(1),N(1,o,p,f,g,k).then(j=>{t(j),m(j.length===20),n(!1)})},[o,p,f,g,k]),h.useEffect(()=>{c!==1&&(r(!0),N(c,o,p,f,g,k).then(j=>{t(P=>[...P,...j]),m(j.length===20),r(!1)}))},[c]);const y=j=>{j.preventDefault(),l(o)},w=h.useRef(null),b=h.useCallback(j=>{a||d&&(w.current&&w.current.disconnect(),w.current=new IntersectionObserver(P=>{P[0].isIntersecting&&u(D=>D+1)}),j&&w.current.observe(j))},[a,d]),R={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},M={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return a?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((j,P)=>s.jsxs(J,{className:"overflow-hidden",children:[s.jsx("div",{className:"aspect-[3/4] animate-pulse bg-muted"}),s.jsxs(X,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 w-2/3 animate-pulse rounded bg-muted"}),s.jsx("div",{className:"h-3 w-1/3 animate-pulse rounded bg-muted"})]})]},P))})}):s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8",children:[s.jsx("h1",{className:"mb-4 font-display text-3xl font-bold tracking-tight",children:"Образы"}),s.jsx("p",{className:"text-muted-foreground",children:"Подберите готовый лук или вдохновитесь идеями наших стилистов."})]}),s.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"mb-8 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between w-full",children:[s.jsxs("form",{onSubmit:y,className:"flex w-full max-w-md items-center gap-2 order-1 sm:order-none",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(qe,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(Z,{placeholder:"Поиск образов...",value:o,onChange:j=>l(j.target.value),className:"pl-10"})]}),s.jsx(z,{type:"submit",size:"icon",children:s.jsx(qe,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto items-stretch sm:items-center justify-end order-2 sm:order-none",children:[s.jsxs(ra,{open:_,onOpenChange:T,children:[s.jsx(oa,{asChild:!0,children:s.jsxs(z,{variant:"outline",className:"flex items-center gap-2 w-full sm:w-auto",children:[s.jsx(Zi,{className:"h-4 w-4"}),"Фильтры"]})}),s.jsx(fs,{className:"w-64",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{children:[s.jsx(ee,{className:"mb-1 block",children:"Стиль"}),s.jsxs(ht,{value:p||"",onValueChange:j=>x(j===""||j==="all"?void 0:j),children:[s.jsx(lt,{children:s.jsx(ft,{placeholder:"Все стили"})}),s.jsxs(ct,{children:[s.jsx(Ne,{value:"all",children:"Все стили"}),V.map(j=>s.jsx(Ne,{value:j,children:j},j))]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ee,{htmlFor:"only-price-switch",children:"Только с ценой"}),s.jsx(bt,{id:"only-price-switch",checked:k,onCheckedChange:C})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{className:"block",children:"Цена"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"flex-1",children:s.jsx(Z,{placeholder:"От",value:f,onChange:j=>v(j.target.value),type:"number",min:"0"})}),s.jsx("div",{className:"flex-1",children:s.jsx(Z,{placeholder:"До",value:g,onChange:j=>S(j.target.value),type:"number",min:"0"})})]})]})]})})]}),s.jsx(H,{to:"/outfits/new",className:"w-full sm:w-auto",children:s.jsxs(z,{className:"flex items-center gap-2 bg-primary hover:bg-primary/90 w-full sm:w-auto",children:[s.jsx(Fs,{className:"h-4 w-4"}),"Создать образ"]})})]})]}),e.length>0?s.jsx(F.div,{variants:R,initial:"hidden",animate:"visible",className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:e.map((j,P)=>{const D=P===e.length-1?{ref:b}:{};return s.jsx(F.div,{variants:M,...D,children:s.jsx(J,{className:"group overflow-hidden transition-all hover:shadow-lg rounded-lg",children:s.jsxs(H,{to:`/outfits/${j.id}`,children:[s.jsx("div",{className:"relative aspect-[3/4] overflow-hidden",children:j.image_url?s.jsx("img",{src:j.image_url.startsWith("/")?`${window.location.origin}${j.image_url}`:j.image_url,alt:j.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105",onError:E=>{console.error("Ошибка загрузки изображения образа:",j.image_url),E.currentTarget.src="/maneken.png"}}):s.jsx("div",{className:"flex h-full w-full items-center justify-center bg-muted",children:s.jsx("img",{src:"/maneken.png",alt:"Манекен",className:"h-2/3 w-2/3 object-contain opacity-70"})})}),s.jsxs(X,{className:"p-3 sm:p-4 space-y-1",children:[s.jsx("h3",{className:"font-medium leading-tight text-base sm:text-lg",title:j.name,children:j.name}),s.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:["Стиль: ",j.style]}),j.total_price&&s.jsxs("p",{className:"font-semibold text-sm sm:text-base",children:[j.total_price.toLocaleString()," ₸"]})]})]})})},j.id)})}):s.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},className:"py-16 text-center",children:[s.jsx(Fs,{className:"mx-auto mb-4 h-16 w-16 text-muted-foreground"}),s.jsx("h3",{className:"mb-2 font-display text-xl font-semibold",children:"Образы не найдены"}),s.jsx("p",{className:"text-muted-foreground",children:"Попробуйте изменить запрос или создайте собственный лук!"})]}),i&&s.jsx("div",{className:"mt-8 flex justify-center",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Загрузка..."})]})}),!a&&!i&&!d&&e.length>0&&s.jsx("div",{className:"mt-8 text-center",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Больше образов нет"})}),!a&&d&&s.jsx("div",{className:"mt-8 flex justify-center",children:s.jsx(z,{onClick:()=>u(j=>j+1),disabled:i,variant:"outline",children:i?"Загрузка...":`Загрузить ещё (${c} → ${c+1})`})})]})};function Oj(){if(console&&console.warn){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];Mt(t[0])&&(t[0]=`react-i18next:: ${t[0]}`),console.warn(...t)}}const El={};function _i(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];Mt(t[0])&&El[t[0]]||(Mt(t[0])&&(El[t[0]]=new Date),Oj(...t))}const Rm=(e,t)=>()=>{if(e.isInitialized)t();else{const a=()=>{setTimeout(()=>{e.off("initialized",a)},0),t()};e.on("initialized",a)}},Ol=(e,t,a)=>{e.loadNamespaces(t,Rm(e,a))},Ll=(e,t,a,n)=>{Mt(a)&&(a=[a]),a.forEach(i=>{e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(t,Rm(e,n))},Lj=function(e,t){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=t.languages[0],i=t.options?t.options.fallbackLng:!1,r=t.languages[t.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const o=(l,c)=>{const u=t.services.backendConnector.state[`${l}|${c}`];return u===-1||u===2};return a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!o(t.isLanguageChangingTo,e)?!1:!!(t.hasResourceBundle(n,e)||!t.services.backendConnector.backend||t.options.resources&&!t.options.partialBundledLanguages||o(n,e)&&(!i||o(r,e)))},_j=function(e,t){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!t.languages||!t.languages.length?(_i("i18n.languages were undefined or empty",t.languages),!0):t.options.ignoreJSONStructure!==void 0?t.hasLoadedNamespace(e,{lng:a.lng,precheck:(i,r)=>{if(a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!r(i.isLanguageChangingTo,e))return!1}}):Lj(e,t,a)},Mt=e=>typeof e=="string",Dj=e=>typeof e=="object"&&e!==null,Mj=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Ij={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},Fj=e=>Ij[e],Vj=e=>e.replace(Mj,Fj);let Di={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Vj};const zj=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Di={...Di,...e}},$j=()=>Di;let Em;const Bj=e=>{Em=e},Uj=()=>Em,qj={type:"3rdParty",init(e){zj(e.options.react),Bj(e)}},Hj=h.createContext();class Wj{constructor(){Wr(this,"getUsedNamespaces",()=>Object.keys(this.usedNamespaces));this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(a=>{this.usedNamespaces[a]||(this.usedNamespaces[a]=!0)})}}const Kj=(e,t)=>{const a=h.useRef();return h.useEffect(()=>{a.current=e},[e,t]),a.current},Om=(e,t,a,n)=>e.getFixedT(t,a,n),Gj=(e,t,a,n)=>h.useCallback(Om(e,t,a,n),[e,t,a,n]),Jj=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:a}=t,{i18n:n,defaultNS:i}=h.useContext(Hj)||{},r=a||n||Uj();if(r&&!r.reportNamespaces&&(r.reportNamespaces=new Wj),!r){_i("You will need to pass in an i18next instance by using initReactI18next");const _=(V,N)=>Mt(N)?N:Dj(N)&&Mt(N.defaultValue)?N.defaultValue:Array.isArray(V)?V[V.length-1]:V,T=[_,{},!1];return T.t=_,T.i18n={},T.ready=!1,T}r.options.react&&r.options.react.wait!==void 0&&_i("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...$j(),...r.options.react,...t},{useSuspense:l,keyPrefix:c}=o;let u=i||r.options&&r.options.defaultNS;u=Mt(u)?[u]:u||["translation"],r.reportNamespaces.addUsedNamespaces&&r.reportNamespaces.addUsedNamespaces(u);const d=(r.isInitialized||r.initializedStoreOnce)&&u.every(_=>_j(_,r,o)),m=Gj(r,t.lng||null,o.nsMode==="fallback"?u:u[0],c),p=()=>m,x=()=>Om(r,t.lng||null,o.nsMode==="fallback"?u:u[0],c),[f,v]=h.useState(p);let g=u.join();t.lng&&(g=`${t.lng}${g}`);const S=Kj(g),k=h.useRef(!0);h.useEffect(()=>{const{bindI18n:_,bindI18nStore:T}=o;k.current=!0,!d&&!l&&(t.lng?Ll(r,t.lng,u,()=>{k.current&&v(x)}):Ol(r,u,()=>{k.current&&v(x)})),d&&S&&S!==g&&k.current&&v(x);const V=()=>{k.current&&v(x)};return _&&r&&r.on(_,V),T&&r&&r.store.on(T,V),()=>{k.current=!1,_&&r&&_.split(" ").forEach(N=>r.off(N,V)),T&&r&&T.split(" ").forEach(N=>r.store.off(N,V))}},[r,g]),h.useEffect(()=>{k.current&&d&&v(p)},[r,c,d]);const C=[f,r,d];if(C.t=f,C.i18n=r,C.ready=d,d||!d&&!l)return C;throw new Promise(_=>{t.lng?Ll(r,t.lng,u,()=>_()):Ol(r,u,()=>_())})},ge=[{key:"top",apiTypes:["top"],label:"Верх"},{key:"bottom",apiTypes:["bottom"],label:"Низ"},{key:"footwear",apiTypes:["footwear"],label:"Обувь"},{key:"accessory",apiTypes:["accessory"],label:"Аксессуары"},{key:"fragrance",apiTypes:["fragrance"],label:"Ароматы"}],Xj=()=>{const{user:e}=Ee(),[t,a]=h.useState({}),[n,i]=h.useState({}),[r,o]=h.useState({}),[l,c]=h.useState(!0),[u,d]=h.useState(""),[m,p]=h.useState([]),[x,f]=h.useState(!1),[v,g]=h.useState({}),{t:S}=Jj(),{favoriteIds:k}=cs(),{toast:C}=Oe(),_=dt(),[T,V]=h.useState(""),[N,y]=h.useState("");h.useEffect(()=>{(async()=>{try{const P={},D={},E={};if(await Promise.all(ge.map(async O=>{const $=(await Promise.all(O.apiTypes.map(B=>Vt({category:B,limit:50})))).flat();P[O.key]=$,D[O.key]=0,E[O.key]=[]})),a(P),i(D),o(E),e)try{const O=await Gi(),L={};ge.forEach($=>L[$.key]=[]),O.forEach($=>{const B=ge.find(q=>q.apiTypes.some(A=>A===($.category||"")));B&&L[B.key].push($)}),g(L)}catch{}}catch(P){console.error(P)}finally{c(!1)}})()},[]),h.useEffect(()=>{const j=setTimeout(()=>{(async()=>{if(u.trim().length<2){p([]);return}f(!0);try{const D=await Vt({q:u.trim(),limit:30});p(D)}catch(D){console.error(D)}finally{f(!1)}})()},400);return()=>clearTimeout(j)},[u]);const w=j=>{const P=ge.find(D=>D.apiTypes.some(E=>E===(j.category||"")));P&&o(D=>{var L;const O=((L=D[P.key])==null?void 0:L.some($=>$.id===j.id))??!1?D[P.key]:[...D[P.key]||[],j];return{...D,[P.key]:O}})},b=(j,P)=>{i(D=>{const E=t[j]||[];if(E.length===0)return D;const O=D[j]??0,L=P==="next"?(O+1)%E.length:(O-1+E.length)%E.length;return{...D,[j]:L}})},R=j=>{o(P=>{var B;const D=t[j]||[],E=n[j]??0,O=D[E];if(!O)return P;const $=((B=P[j])==null?void 0:B.some(q=>q.id===O.id))??!1?P[j].filter(q=>q.id!==O.id):[...P[j]||[],O];return{...P,[j]:$}})},M="/maneken.jpg";return l?s.jsx("div",{className:"flex h-64 items-center justify-center",children:S("common.loading")}):s.jsxs("div",{className:"container mx-auto flex flex-col gap-8 px-4 py-8 md:flex-row md:items-start",children:[s.jsxs("div",{className:"relative mx-auto h-[520px] w-[300px] shrink-0 shadow-lg",children:[s.jsx("img",{src:M,alt:"Mannequin",className:"absolute inset-0 h-full w-full object-contain"}),ge.flatMap((j,P)=>(r[j.key]||[]).map((E,O)=>E.image_url?s.jsx(Ye,{src:E.image_url,alt:E.name,className:"absolute inset-0 h-full w-full object-contain",fallbackClassName:"absolute inset-0 h-full w-full",style:{zIndex:P+O+1}},`${j.key}-${E.id}`):null))]}),s.jsxs("div",{className:"flex-1 space-y-6",children:[s.jsxs("div",{className:"space-y-4 rounded-xl border p-4 shadow-sm",children:[s.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[s.jsx(Z,{placeholder:"Название образа",value:T,onChange:j=>V(j.target.value)}),s.jsx(Z,{placeholder:"Стиль",value:N,onChange:j=>y(j.target.value)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qe,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(Z,{placeholder:"Поиск товара...",value:u,onChange:j=>d(j.target.value),className:"flex-1"})]}),x&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"Поиск..."}),u.length>=2&&!x&&s.jsx("div",{className:"max-h-60 overflow-y-auto pt-2 grid gap-2 sm:grid-cols-2 md:grid-cols-3",children:m.length>0?m.map(j=>s.jsxs("div",{className:"flex items-center gap-2 rounded border p-2 hover:bg-accent/50",children:[s.jsx(Ye,{src:j.image_url,alt:j.name,className:"h-12 w-12 rounded object-cover",fallbackClassName:"h-12 w-12 rounded bg-muted"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"line-clamp-1 text-sm font-medium",title:j.name,children:j.name}),s.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:j.category})]}),s.jsx(z,{size:"sm",onClick:()=>w(j),children:"Добавить"})]},j.id)):s.jsx("p",{className:"text-sm text-muted-foreground",children:"Ничего не найдено"})}),k.length>0&&s.jsxs("div",{className:"pt-4",children:[s.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[s.jsx(tr,{className:"h-4 w-4 text-yellow-500"}),s.jsx("p",{className:"text-sm font-medium",children:"Избранное"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(v).flatMap(([j,P])=>P.map(D=>s.jsx("button",{type:"button",onClick:()=>w(D),className:"relative h-14 w-14 overflow-hidden rounded border border-border/40 hover:ring-2 hover:ring-primary/40",children:s.jsx(Ye,{src:D.image_url,alt:D.name,className:"h-full w-full object-cover",fallbackClassName:"h-full w-full bg-muted"})},D.id)))})]})]}),s.jsx("div",{className:"pt-4 text-right",children:s.jsx(z,{disabled:!T.trim()||!N.trim()||Object.values(r).every(j=>j.length===0),onClick:async()=>{var j,P,D,E,O,L,$;try{const B={name:T.trim(),style:N.trim(),description:"",top_ids:((j=r.top)==null?void 0:j.map(A=>A.id))||[],bottom_ids:((P=r.bottom)==null?void 0:P.map(A=>A.id))||[],footwear_ids:((D=r.footwear)==null?void 0:D.map(A=>A.id))||[],accessories_ids:((E=r.accessory)==null?void 0:E.map(A=>A.id))||[],fragrances_ids:((O=r.fragrance)==null?void 0:O.map(A=>A.id))||[]},q=await zr(B);C({title:"Образ создан",description:q.name}),_(`/outfits/${q.id}`)}catch(B){C({variant:"destructive",title:"Ошибка",description:(($=(L=B==null?void 0:B.response)==null?void 0:L.data)==null?void 0:$.detail)||"Не удалось создать образ"})}},children:"Сохранить образ"})}),ge.map(j=>{const P=t[j.key]||[],D=n[j.key],E=P[D],O=r[j.key]||[];return s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(z,{variant:"ghost",size:"icon",onClick:()=>b(j.key,"prev"),disabled:P.length===0,className:"hover:bg-accent/50",children:s.jsx(un,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex flex-1 items-center gap-4 overflow-hidden",children:[s.jsx("span",{className:"w-28 shrink-0 text-sm font-medium",children:j.label}),E?s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx(Ye,{src:E.image_url,alt:E.name,className:"h-20 w-20 rounded object-cover",fallbackClassName:"h-20 w-20 rounded bg-muted"}),s.jsx("span",{className:"truncate text-sm",children:E.name})]}):s.jsx("span",{className:"text-sm text-muted-foreground",children:S("outfitBuilder.noOptions")})]}),s.jsx(z,{variant:"ghost",size:"icon",onClick:()=>b(j.key,"next"),disabled:P.length===0,className:"hover:bg-accent/50",children:s.jsx(Ji,{className:"h-5 w-5"})}),s.jsx(z,{variant:"secondary",size:"sm",disabled:!E,onClick:()=>R(j.key),children:E&&O.some(L=>L.id===E.id)?"Убрать":"Добавить"}),O.length>0&&s.jsx("div",{className:"flex gap-1 overflow-x-auto",children:O.map(L=>s.jsxs("div",{className:"relative h-12 w-12 shrink-0 rounded",children:[s.jsx(Ye,{src:L.image_url,alt:L.name,className:"h-full w-full rounded object-cover",fallbackClassName:"h-full w-full rounded bg-muted"}),s.jsx("button",{type:"button",onClick:()=>o($=>({...$,[j.key]:$[j.key].filter(B=>B.id!==L.id)})),className:"absolute -right-1 -top-1 rounded-full bg-red-500 p-0.5 text-white hover:bg-red-600",children:s.jsx(pn,{className:"h-3 w-3"})})]},L.id))})]},j.key)})]})]})},Yj=()=>{const{id:e}=kt(),{user:t,isAdmin:a}=Ee(),[n,i]=h.useState(null),[r,o]=h.useState(!0),[l,c]=h.useState([]),[u,d]=h.useState(""),[m,p]=h.useState(),[x,f]=h.useState(null),{addItem:v}=Qs(),[g,S]=h.useState(!1);h.useEffect(()=>{e&&(async()=>{try{const y=await U.get(`/api/outfits/${e}`);i(y.data);const w=await Rl(Number(e));c(w)}catch(y){console.error(y)}finally{o(!1)}})()},[e]),h.useEffect(()=>{(async()=>{if(!(!e||!t))try{const y=await U.get("/api/outfits/favorites");f(y.data.some(w=>w.id===Number(e)))}catch{}})()},[e,t]);const k=async()=>{if(!(!e||t===null)){f(N=>!N);try{await Nj(Number(e))}catch(N){f(y=>!y),console.error(N)}}},C=async()=>{if(!(!e||!u.trim()))try{const N=await Pj(Number(e),{content:u,rating:m});c([N,...l]),d(""),p(void 0)}catch(N){console.error(N)}},_=async()=>{if(n){S(!0);try{const N=[...n.tops||[],...n.bottoms||[],...n.footwear||[],...n.accessories||[],...n.fragrances||[]];await Promise.all(N.map(async y=>{try{const b=(await U.get(`/api/items/${y.id}`)).data,R=b.variants&&b.variants.length>0?b.variants[0]:void 0,M=(R==null?void 0:R.id)??y.id,j=(R==null?void 0:R.price)??b.price??0;await v({id:M,item_id:y.id,name:b.name,price:j,image_url:b.image_url,size:R==null?void 0:R.size,color:R==null?void 0:R.color,stock:R==null?void 0:R.stock,quantity:1})}catch(w){console.error(w)}}))}catch(N){console.error(N)}finally{S(!1)}}},T=h.useMemo(()=>n?ge.map(N=>{const y=N.key,w=n[y],b=w&&w.length?w[0]:void 0;return(b==null?void 0:b.image_url)||null}):ge.map(()=>null),[n]);if(r)return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("div",{className:"mb-6",children:s.jsx(ce,{className:"h-6 w-24 rounded-full"})}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[s.jsx("div",{className:"w-full md:w-1/2",children:s.jsx(ce,{className:"aspect-[4/5] rounded-xl"})}),s.jsxs("div",{className:"w-full md:w-1/2 space-y-6",children:[s.jsx(ce,{className:"h-9 w-3/4 rounded-lg"}),s.jsx(ce,{className:"h-5 w-1/2 rounded-lg"}),s.jsx(ce,{className:"h-7 w-1/4 rounded-lg"}),s.jsxs("div",{className:"space-y-4 pt-4",children:[s.jsx(ce,{className:"h-4 w-full rounded-lg"}),s.jsx(ce,{className:"h-4 w-4/5 rounded-lg"}),s.jsx(ce,{className:"h-4 w-3/4 rounded-lg"})]}),s.jsxs("div",{className:"flex gap-4 pt-6",children:[s.jsx(ce,{className:"h-12 flex-1 rounded-lg"}),s.jsx(ce,{className:"h-12 w-12 rounded-lg"})]})]})]})]});if(!n)return s.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},className:"container mx-auto px-4 py-16 text-center",children:[s.jsx(Is,{className:"mx-auto mb-4 h-16 w-16 text-muted-foreground"}),s.jsx("h3",{className:"mb-2 text-2xl font-semibold tracking-tight",children:"Образ не найден"}),s.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"Возможно, образ был удален или перемещен"}),s.jsx(z,{asChild:!0,variant:"outline",className:"rounded-full",children:s.jsxs(H,{to:"/outfits",children:[s.jsx(zt,{className:"mr-2 h-4 w-4"}),"Вернуться к образам"]})})]});const V=[{label:"Верх",items:n.tops,key:"tops"},{label:"Низ",items:n.bottoms,key:"bottoms"},{label:"Обувь",items:n.footwear,key:"footwear"},{label:"Аксессуары",items:n.accessories,key:"accessories"},{label:"Ароматы",items:n.fragrances,key:"fragrances"}];return s.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},className:"container mx-auto px-4 py-8",children:[s.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-6",children:s.jsx(z,{asChild:!0,variant:"ghost",className:"pl-0 hover:bg-transparent",children:s.jsxs(H,{to:"/outfits",className:"flex items-center text-sm text-muted-foreground hover:text-foreground",children:[s.jsx(zt,{className:"mr-1 h-4 w-4"}),"Назад к образам"]})})}),s.jsxs("div",{className:"mb-16 flex flex-col gap-8 md:flex-row md:gap-12",children:[s.jsx(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6},className:"w-full md:w-1/2",children:s.jsx("div",{className:"aspect-[4/5] relative overflow-hidden rounded-xl bg-muted shadow-sm border",children:n.tryon_image_url?s.jsx("img",{src:n.tryon_image_url.startsWith("/")?`${window.location.origin}${n.tryon_image_url}`:n.tryon_image_url,alt:"Виртуальная примерка",className:"absolute inset-0 w-full h-full object-cover",onError:N=>{console.error("Ошибка загрузки изображения виртуальной примерки:",n.tryon_image_url),N.currentTarget.style.display="none";const y=N.currentTarget.parentElement;y&&(y.innerHTML=`
                      <img src="/maneken.jpg" alt="Манекен" class="absolute inset-0 w-full h-full object-contain" />
                      ${T.map((w,b)=>w?`<img src="${w}" alt="layer" class="absolute inset-0 w-full h-full object-contain" style="z-index: ${b+1}" />`:"").join("")}
                    `)}}):s.jsxs(s.Fragment,{children:[s.jsx("img",{src:"/maneken.jpg",alt:"Манекен",className:"absolute inset-0 w-full h-full object-contain"}),T.map((N,y)=>N?s.jsx("img",{src:N,alt:"layer",className:"absolute inset-0 w-full h-full object-contain",style:{zIndex:y+1}},y):null)]})})}),s.jsxs(F.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6},className:"w-full md:w-1/2",children:[s.jsx("div",{className:"mb-4",children:s.jsx(le,{variant:"outline",className:"text-xs capitalize mb-4",children:"Образ"})}),s.jsx("h1",{className:"mb-2 text-2xl sm:text-3xl font-bold tracking-tight",children:n.name}),s.jsxs("div",{className:"mb-6 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"rounded-md bg-muted/80 p-2 sm:p-2.5 border border-border/50",children:[s.jsx("p",{className:"mb-1 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Стиль"}),s.jsx("p",{className:"text-sm font-medium leading-tight",children:n.style})]}),n.total_price&&s.jsxs("div",{className:"rounded-md bg-muted/80 p-2 sm:p-2.5 border border-border/50",children:[s.jsx("p",{className:"mb-1 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Стоимость"}),s.jsxs("p",{className:"text-sm font-medium leading-tight",children:[n.total_price.toLocaleString("ru-RU")," ₽"]})]})]}),n.description&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"mb-2 font-medium text-base sm:text-lg",children:"Описание"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed text-sm sm:text-base",children:n.description})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs(z,{size:"lg",className:"flex-1 rounded-lg shadow-sm hover:shadow-md transition-shadow w-full sm:w-auto",disabled:g,onClick:_,children:[s.jsx(Is,{className:"mr-2 w-4 h-4"}),g?"Добавление...":"Добавить в корзину"]}),s.jsx(z,{size:"lg",variant:x?"default":"outline",className:"rounded-lg px-3 shadow-sm hover:shadow-md transition-shadow w-full sm:w-auto",onClick:k,children:s.jsx(Me,{className:`h-5 w-5 ${x?"fill-current":""}`,strokeWidth:x?2:1.5})}),t&&(t.id===n.owner_id||a)&&s.jsx(z,{asChild:!0,size:"lg",variant:"outline",className:"rounded-lg px-3 shadow-sm hover:shadow-md transition-shadow w-full sm:w-auto",children:s.jsx(H,{to:`/outfits/${n.id}/edit`,children:s.jsx(mn,{className:"h-4 w-4"})})})]})]})]}),s.jsxs(F.section,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:"mb-16",children:[s.jsx("div",{className:"mb-8",children:s.jsx("h2",{className:"text-2xl font-bold tracking-tight mb-2",children:"Состав образа"})}),s.jsx("div",{className:"space-y-12",children:V.map(N=>N.items.length>0&&s.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"space-y-6",children:[s.jsx("h3",{className:"text-base sm:text-lg font-medium text-foreground uppercase tracking-wider border-l-4 border-primary pl-4",children:N.label}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:N.items.map(y=>s.jsx(F.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:s.jsx(J,{className:"group overflow-hidden transition-all hover:shadow-lg border-0 shadow-sm rounded-lg",children:s.jsxs(H,{to:`/items/${y.id}`,className:"block",children:[s.jsx("div",{className:"relative aspect-square overflow-hidden",children:s.jsx(Ye,{src:y.image_url,alt:y.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105",fallbackClassName:"flex h-full w-full items-center justify-center bg-muted"})}),s.jsx(X,{className:"p-2 sm:p-3",children:s.jsx("h4",{className:"font-medium leading-tight line-clamp-2 text-xs sm:text-sm group-hover:text-primary transition-colors",title:y.name,children:y.name})})]})})},y.id))})]},N.key))})]}),s.jsxs(F.section,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.3},className:"mb-16",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Отзывы"}),s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(Qt,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:l.length})]})]}),s.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"mb-8 rounded-xl border p-6 shadow-sm",children:[s.jsx("h3",{className:"mb-4 text-lg font-medium",children:"Оставить отзыв"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"mb-2 text-sm text-muted-foreground",children:"Ваша оценка"}),s.jsx(ns,{value:m,onChange:p})]}),s.jsx(ot,{placeholder:"Поделитесь своим мнением об этом образе...",value:u,onChange:N=>d(N.target.value),rows:4,className:"rounded-lg border-muted"}),s.jsx("div",{className:"flex justify-end",children:s.jsx(z,{onClick:C,disabled:!u.trim(),className:"rounded-lg",children:"Отправить отзыв"})})]})]}),l.length===0?s.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},className:"rounded-xl border p-8 text-center shadow-sm",children:[s.jsx(Qt,{className:"mx-auto mb-4 h-12 w-12 text-muted-foreground"}),s.jsx("h3",{className:"mb-2 text-lg font-medium",children:"Пока нет отзывов"}),s.jsx("p",{className:"text-muted-foreground",children:"Будьте первым, кто оставит отзыв об этом образе"})]}):s.jsx(F.ul,{className:"space-y-4",children:l.map(N=>s.jsx(F.li,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:s.jsxs(J,{className:"overflow-hidden border-0 shadow-sm",children:[s.jsx(pe,{className:"pb-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:N.user_name??"Пользователь"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(N.created_at).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"})})]}),((t==null?void 0:t.id)===N.user_id||a)&&s.jsx(z,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-600 h-8 w-8 rounded-full",onClick:async()=>{if(e&&confirm("Удалить комментарий?"))try{await Aj(Number(e),N.id),c(y=>y.filter(w=>w.id!==N.id))}catch(y){console.error(y)}},children:s.jsx(Ze,{className:"h-4 w-4"})})]})}),s.jsxs(X,{className:"pt-0",children:[N.rating!==void 0&&N.rating!==null&&s.jsx("div",{className:"mb-3",children:s.jsx(ns,{value:N.rating})}),s.jsx("p",{className:"mb-4 whitespace-pre-line text-muted-foreground",children:N.content}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs(z,{variant:"ghost",size:"sm",className:"flex items-center gap-2 rounded-full",onClick:async()=>{if(!(!e||!t))try{await Tj(Number(e),N.id);const y=await Rl(Number(e));c(y)}catch(y){console.error(y)}},children:[s.jsx(Me,{className:`h-4 w-4 ${N.likes>0?"fill-primary text-primary":""}`}),s.jsx("span",{children:N.likes})]})})]})]})},N.id))})]})]})},Zj=()=>{const{user:e}=Ee(),[t,a]=h.useState([]),[n,i]=h.useState([]),[r,o]=h.useState(!0),[l,c]=h.useState(1),[u,d]=h.useState(1),[m,p]=h.useState(!0),[x,f]=h.useState(!0),v=async(N,y=!1)=>{if(e)try{const w=await Gi(N);a(b=>y?[...b,...w]:w),p(w.length===20)}catch(w){console.error(w)}},g=async(N,y=!1)=>{if(e)try{const w=await kj(N);i(b=>y?[...b,...w]:w),f(w.length===20)}catch(w){console.error(w)}};h.useEffect(()=>{(async()=>{try{await Promise.all([v(1),g(1)])}catch(y){console.error(y)}finally{o(!1)}})()},[]);const S=h.useRef(null),k=h.useCallback(N=>{r||m&&(S.current&&S.current.disconnect(),S.current=new IntersectionObserver(y=>{y[0].isIntersecting&&c(w=>w+1)}),N&&S.current.observe(N))},[r,m]),C=h.useRef(null),_=h.useCallback(N=>{r||x&&(C.current&&C.current.disconnect(),C.current=new IntersectionObserver(y=>{y[0].isIntersecting&&d(w=>w+1)}),N&&C.current.observe(N))},[r,x]);h.useEffect(()=>{l>1&&v(l,!0)},[l]),h.useEffect(()=>{u>1&&g(u,!0)},[u]);const T={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},V={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"mb-6 font-display text-3xl font-bold tracking-tight",children:"Избранное"}),r&&s.jsx("p",{className:"py-8 text-center",children:"Загрузка..."}),!r&&t.length===0&&n.length===0&&s.jsxs("div",{className:"flex flex-col items-center py-16 text-muted-foreground",children:[s.jsx(Me,{className:"mb-4 h-12 w-12 text-muted-foreground"}),s.jsx("p",{children:"У вас пока нет избранных товаров или образов"})]}),!r&&t.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Товары"}),s.jsx(F.div,{variants:T,initial:"hidden",animate:"visible",className:"mb-10 grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:t.map((N,y)=>s.jsx(F.div,{variants:V,ref:y===t.length-1?k:null,children:s.jsx(J,{className:"group overflow-hidden transition-all hover:shadow-lg",children:s.jsxs(H,{to:`/items/${N.id}`,children:[s.jsx("div",{className:"relative aspect-[3/4] overflow-hidden",children:N.image_url?s.jsx("img",{src:N.image_url,alt:N.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"}):s.jsx("div",{className:"flex h-full w-full items-center justify-center bg-muted",children:s.jsx(Be,{className:"h-10 w-10 text-muted-foreground"})})}),s.jsxs(X,{className:"p-4",children:[s.jsxs("div",{className:"mb-2",children:[N.category&&s.jsx(le,{variant:"outline",className:"mb-2 text-xs",children:N.category}),s.jsx("h3",{className:"font-medium leading-tight",title:N.name,children:N.name}),N.brand&&s.jsx("p",{className:"text-sm text-muted-foreground",children:N.brand})]}),N.price!==null&&N.price!==void 0&&s.jsxs("p",{className:"font-semibold",children:[N.price.toLocaleString()," ₸"]})]})]})})},N.id))})]}),!r&&n.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Образы"}),s.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:n.map((N,y)=>s.jsxs(H,{to:`/outfits/${N.id}`,className:"block rounded-md border p-4 hover:shadow",ref:y===n.length-1?_:null,children:[s.jsx("h3",{className:"text-lg font-medium",children:N.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Стиль: ",N.style]}),N.total_price&&s.jsxs("p",{className:"mt-2 font-semibold",children:[N.total_price,"₸"]})]},N.id))})]})]})},Qj=()=>{const t=rs().pathname,{isAdmin:a,isModerator:n}=Ee(),r=[{path:"/admin/users",label:"Пользователи",icon:s.jsx(ka,{className:"h-4 w-4"})},{path:"/admin/items",label:"Товары",icon:s.jsx(Bf,{className:"h-4 w-4"})},...a?[{path:"/admin/lamoda-parser",label:"Парсер",icon:s.jsx(Ps,{className:"h-4 w-4"})}]:[],{path:"/admin/analytics",label:"Аналитика",icon:s.jsx(La,{className:"h-4 w-4"})},{path:"/admin/system",label:"Система",icon:s.jsx(La,{className:"h-4 w-4"})},{path:"/admin/outfits",label:"Образы",icon:s.jsx(wd,{className:"h-4 w-4"})}].filter(c=>a?!0:n?c.path.startsWith("/admin/items")||c.path.startsWith("/admin/analytics"):!1),o={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},l={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}};return s.jsx(F.div,{initial:"hidden",animate:"visible",variants:o,className:"min-h-screen bg-muted/40",children:s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs(F.div,{variants:l,className:"mb-8",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(H,{to:"/home",className:"hover:text-primary hover:underline",children:"Главная"}),s.jsx(_a,{className:"h-4 w-4"}),s.jsx("span",{className:"text-foreground",children:"Админ панель"})]}),s.jsx("h1",{className:"mt-2 font-display text-3xl font-bold tracking-tight",children:"Административная панель"}),s.jsx("p",{className:"text-muted-foreground",children:"Управление контентом и пользователями системы"})]}),s.jsx(F.nav,{variants:l,className:"mb-8 flex flex-col gap-1 sm:flex-row sm:flex-wrap overflow-x-auto rounded-lg bg-background p-1 shadow-sm",children:r.map(c=>s.jsxs(H,{to:c.path,className:te("flex items-center gap-2 rounded-md px-4 py-2 text-sm font-medium transition-all w-full sm:w-auto",t.startsWith(c.path)?"bg-primary text-primary-foreground shadow":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[c.icon,c.label]},c.path))}),s.jsx(F.div,{variants:l,className:"rounded-lg bg-background p-6 shadow-sm",children:s.jsx(Bi,{})})]})})},ew=()=>{const[e,t]=h.useState([]),[a,n]=h.useState(!0),[i,r]=h.useState(!1),[o,l]=h.useState(1),[c,u]=h.useState(!0),[d,m]=h.useState(""),[p,x]=h.useState(""),[f,v]=h.useState(null),{toast:g}=Oe(),[S,k]=h.useState(void 0),[C,_]=h.useState(!1),T=async(R=1,M=!1,j)=>{try{M?r(!0):n(!0);const P={page:R};j&&(P.q=j),S&&S!=="all"&&(P.role=S);const D=await U.get("/api/users/",{params:P});t(E=>M?[...E,...D.data]:D.data),u(D.data.length===20)}catch{g({variant:"destructive",title:"Ошибка",description:"Не удалось загрузить список пользователей"})}finally{n(!1),r(!1)}};h.useEffect(()=>{l(1),T(1,!1,p)},[p]),h.useEffect(()=>{l(1),t([]),u(!0),T(1,!1,p)},[S]),h.useEffect(()=>{o!==1&&T(o,!0,p)},[o]);const V=R=>{R.preventDefault(),l(1),t([]),u(!0),x(d)},N=async R=>{if(confirm("Вы уверены, что хотите удалить этого пользователя?")){v(R);try{await U.delete(`/api/users/${R}`),t(M=>M.filter(j=>j.id!==R)),g({title:"Успешно",description:"Пользователь успешно удален",className:"border-0 bg-green-500 text-white shadow-lg"})}catch{g({variant:"destructive",title:"Ошибка",description:"Не удалось удалить пользователя"})}finally{v(null)}}},y=()=>{k(void 0)},[w,b]=h.useState(!1);return a?s.jsx("div",{className:"flex h-64 items-center justify-center",children:s.jsx(ue,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Управление пользователями"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsxs("form",{onSubmit:V,className:"flex gap-2 items-center",children:[s.jsx(Z,{type:"text",placeholder:"Поиск по email...",value:d,onChange:R=>m(R.target.value)}),s.jsx(z,{type:"submit",children:"Поиск"}),s.jsxs(ra,{open:w,onOpenChange:b,children:[s.jsx(oa,{asChild:!0,children:s.jsx(z,{type:"button",variant:S?"default":"outline",className:"h-10 min-w-[44px] px-2 flex items-center justify-center","aria-label":"Фильтры",children:s.jsx(Zi,{className:"h-5 w-5"})})}),s.jsxs(fs,{align:"end",side:"right",className:"p-2 rounded-lg shadow-md border w-[110px] min-w-[110px] bg-white dark:bg-gray-900 flex flex-col gap-2",style:{minWidth:"110px",maxWidth:"160px"},children:[s.jsx(ee,{className:"mb-1 block text-xs text-muted-foreground",children:"Роль"}),s.jsxs(ht,{value:S||"all",onValueChange:R=>{k(R==="all"?void 0:R),b(!1)},children:[s.jsx(lt,{className:"h-8 text-xs",children:s.jsx(ft,{placeholder:"Все роли"})}),s.jsxs(ct,{children:[s.jsx(Ne,{value:"all",children:"Все"}),s.jsx(Ne,{value:"admin",children:"Админ"}),s.jsx(Ne,{value:"moderator",children:"Модер."}),s.jsx(Ne,{value:"user",children:"Польз."})]})]}),s.jsx("button",{className:"text-[11px] text-muted-foreground hover:text-primary transition self-end mt-1",type:"button",onClick:()=>{y(),b(!1)},children:"Сбросить"})]})]})]}),s.jsx(z,{asChild:!0,children:s.jsxs(H,{to:"/admin/users/new",className:"flex items-center gap-2",children:[s.jsx(Yi,{className:"h-4 w-4"}),"Добавить пользователя"]})})]})]}),s.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-200 bg-white shadow-sm dark:border-gray-800 dark:bg-gray-950",children:s.jsxs("table",{className:"min-w-full text-left",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:"ID"}),s.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),s.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Статус"}),s.jsx("th",{className:"px-6 py-3 text-right text-sm font-medium text-gray-700 dark:text-gray-300",children:"Действия"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:e.length>0?e.map(R=>s.jsxs(F.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50/50 dark:hover:bg-gray-900/50",children:[s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-900 dark:text-gray-100",children:R.id}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-gray-900 dark:text-gray-100",children:R.email}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:s.jsxs("div",{className:"flex gap-2",children:[R.is_admin?s.jsxs(le,{variant:"default",className:"flex items-center gap-1",children:[s.jsx(Cs,{className:"h-3 w-3"}),s.jsx("span",{children:"Админ"})]}):R.is_moderator?s.jsxs(le,{variant:"secondary",className:"flex items-center gap-1",children:[s.jsx(tr,{className:"h-3 w-3"}),s.jsx("span",{children:"Модератор"})]}):s.jsx(le,{variant:"secondary",children:"Пользователь"}),s.jsx(le,{variant:R.is_active?"default":"destructive",className:"flex items-center gap-1",children:R.is_active?s.jsxs(s.Fragment,{children:[s.jsx(Gf,{className:"h-3 w-3"}),s.jsx("span",{children:"Активен"})]}):s.jsxs(s.Fragment,{children:[s.jsx(Xf,{className:"h-3 w-3"}),s.jsx("span",{children:"Неактивен"})]})})]})}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right text-sm font-medium",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(z,{variant:"outline",size:"sm",asChild:!0,className:"border-gray-300 dark:border-gray-700",children:s.jsxs(H,{to:`/admin/users/${R.id}/edit`,className:"flex items-center gap-1",children:[s.jsx(mn,{className:"h-3 w-3"}),s.jsx("span",{children:"Редактировать"})]})}),s.jsxs(z,{variant:"destructive",size:"sm",onClick:()=>N(R.id),disabled:f===R.id,className:"flex items-center gap-1",children:[f===R.id?s.jsx(ue,{className:"h-3 w-3 animate-spin"}):s.jsx(Ze,{className:"h-3 w-3"}),s.jsx("span",{children:"Удалить"})]})]})})]},R.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"px-6 py-8 text-center text-sm text-gray-500 dark:text-gray-400",children:"Нет зарегистрированных пользователей"})})})]})}),!a&&c&&s.jsx("div",{className:"flex justify-center my-4",children:s.jsx(z,{onClick:()=>l(R=>R+1),disabled:i,children:i?"Загрузка...":"Загрузить ещё"})})]})},tw=()=>{const[e,t]=h.useState([]),[a,n]=h.useState(!0),[i,r]=h.useState(!1),[o,l]=h.useState(1),[c,u]=h.useState(!0),[d,m]=h.useState(""),[p,x]=h.useState(""),[f,v]=h.useState(null),{toast:g}=Oe(),[S,k]=h.useState(void 0),[C,_]=h.useState(""),[T,V]=h.useState(""),[N,y]=h.useState(!1),[w,b]=h.useState(!1),R=async(P=1,D=!1,E)=>{try{D?r(!0):n(!0);const O={page:P};E&&(O.q=E),S&&(O.category=S),N&&(O.min_price=0),C&&(O.min_price=parseFloat(C)),T&&(O.max_price=parseFloat(T));const L=await U.get("/api/items/",{params:O});t($=>D?[...$,...L.data]:L.data),u(L.data.length===20)}catch{g({variant:"destructive",title:"Ошибка",description:"Не удалось загрузить список вещей"})}finally{n(!1),r(!1)}};h.useEffect(()=>{l(1),R(1,!1,p)},[p,S,C,T,N]),h.useEffect(()=>{o!==1&&R(o,!0,p)},[o]);const M=P=>{P.preventDefault(),l(1),t([]),u(!0),x(d)},j=async P=>{if(confirm("Вы уверены, что хотите удалить эту вещь?")){v(P);try{await U.delete(`/api/items/${P}`),t(D=>D.filter(E=>E.id!==P)),g({title:"Успешно",description:"Вещь успешно удалена",className:"border-0 bg-green-500 text-white shadow-lg"})}catch{g({variant:"destructive",title:"Ошибка",description:"Не удалось удалить вещь"})}finally{v(null)}}};return a?s.jsx("div",{className:"flex h-64 items-center justify-center",children:s.jsx(ue,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Управление вещами"}),s.jsxs("form",{onSubmit:M,className:"flex gap-2",children:[s.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:d,onChange:P=>m(P.target.value),className:"border rounded px-2 py-1"}),s.jsx(z,{type:"submit",children:"Поиск"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ra,{open:w,onOpenChange:b,children:[s.jsx(oa,{asChild:!0,children:s.jsx(z,{variant:"outline",children:"Фильтры"})}),s.jsx(fs,{className:"w-64",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[Je&&s.jsxs("div",{children:[s.jsx(ee,{className:"mb-1 block",children:"Категория"}),s.jsxs(ht,{value:S||"all",onValueChange:P=>{k(P==="all"?void 0:P),l(1)},children:[s.jsx(lt,{children:s.jsx(ft,{placeholder:"Все категории"})}),s.jsxs(ct,{children:[s.jsx(Ne,{value:"all",children:"Все категории"}),Object.entries(Je).map(([P,D])=>s.jsx(Ne,{value:P,children:D},P))]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ee,{htmlFor:"only-price-switch",children:"Только с ценой"}),s.jsx(bt,{id:"only-price-switch",checked:N,onCheckedChange:P=>{y(P),l(1)}})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{className:"block",children:"Цена"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"flex-1",children:s.jsx("input",{placeholder:"От",value:C,onChange:P=>{_(P.target.value),l(1)},type:"number",min:"0",className:"border rounded px-2 py-1 w-full"})}),s.jsx("div",{className:"flex-1",children:s.jsx("input",{placeholder:"До",value:T,onChange:P=>{V(P.target.value),l(1)},type:"number",min:"0",className:"border rounded px-2 py-1 w-full"})})]})]})]})})]}),s.jsx(z,{asChild:!0,children:s.jsxs(H,{to:"/admin/items/new",className:"flex items-center gap-2",children:[s.jsx(Yi,{className:"h-4 w-4"}),"Добавить вещь"]})})]})]}),s.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-200 bg-white shadow-sm dark:border-gray-800 dark:bg-gray-950",children:s.jsxs("table",{className:"min-w-full text-left",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:"ID"}),s.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Название"}),s.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Цена"}),s.jsx("th",{className:"px-6 py-3 text-right text-sm font-medium text-gray-700 dark:text-gray-300",children:"Действия"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:e.length>0?e.map(P=>s.jsxs(F.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50/50 dark:hover:bg-gray-900/50",children:[s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-900 dark:text-gray-100",children:P.id}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-gray-900 dark:text-gray-100",children:P.name}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:P.price?`${P.price} ₽`:"-"}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right text-sm font-medium",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(z,{variant:"outline",size:"sm",asChild:!0,className:"border-gray-300 dark:border-gray-700",children:s.jsxs(H,{to:`/admin/items/${P.id}/edit`,className:"flex items-center gap-1",children:[s.jsx(mn,{className:"h-3 w-3"}),s.jsx("span",{children:"Редактировать"})]})}),s.jsxs(z,{variant:"destructive",size:"sm",onClick:()=>j(P.id),disabled:f===P.id,className:"flex items-center gap-1",children:[f===P.id?s.jsx(ue,{className:"h-3 w-3 animate-spin"}):s.jsx(Ze,{className:"h-3 w-3"}),s.jsx("span",{children:"Удалить"})]})]})})]},P.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"px-6 py-8 text-center text-sm text-gray-500 dark:text-gray-400",children:"Нет доступных вещей"})})})]})}),!a&&c&&s.jsx("div",{className:"flex justify-center my-4",children:s.jsx(z,{onClick:()=>l(P=>P+1),disabled:i,children:i?"Загрузка...":"Загрузить ещё"})})]})},sw=()=>{const[e,t]=h.useState([]),[a,n]=h.useState(!0),[i,r]=h.useState(!1),[o,l]=h.useState(1),[c,u]=h.useState(!0),[d,m]=h.useState(""),[p,x]=h.useState(""),[f,v]=h.useState(null),{toast:g}=Oe(),[S,k]=h.useState(void 0),[C,_]=h.useState(""),[T,V]=h.useState(""),[N,y]=h.useState(!1),[w,b]=h.useState(!1),[R,M]=h.useState(void 0),j=Array.from(new Set(e.map(O=>O.style).filter(Boolean))),P=async(O=1,L=!1,$)=>{try{L?r(!0):n(!0);const B={page:O};$&&(B.q=$),R&&(B.category=R),N&&(B.min_price=0),C&&(B.min_price=parseFloat(C)),T&&(B.max_price=parseFloat(T)),S&&S!=="all"&&(B.style=S);const q=await U.get("/api/outfits/",{params:B});t(A=>L?[...A,...q.data]:q.data),u(q.data.length===20)}catch{g({variant:"destructive",title:"Ошибка",description:"Не удалось загрузить список образов"})}finally{n(!1),r(!1)}};h.useEffect(()=>{l(1),P(1,!1,p)},[p,R,C,T,N,S]),h.useEffect(()=>{o!==1&&P(o,!0,p)},[o]);const D=O=>{O.preventDefault(),l(1),t([]),u(!0),x(d)},E=async O=>{if(confirm("Вы уверены, что хотите удалить этот образ?")){v(O);try{await U.delete(`/api/outfits/${O}`),t(L=>L.filter($=>$.id!==O)),g({title:"Успешно",description:"Образ успешно удален",className:"border-0 bg-green-500 text-white shadow-lg"})}catch{g({variant:"destructive",title:"Ошибка",description:"Не удалось удалить образ"})}finally{v(null)}}};return a?s.jsx("div",{className:"flex h-64 items-center justify-center",children:s.jsx(ue,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Управление образами"}),s.jsxs("form",{onSubmit:D,className:"flex gap-2",children:[s.jsx("input",{type:"text",placeholder:"Поиск по названию...",value:d,onChange:O=>m(O.target.value),className:"border rounded px-2 py-1"}),s.jsx(z,{type:"submit",children:"Поиск"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ra,{open:w,onOpenChange:b,children:[s.jsx(oa,{asChild:!0,children:s.jsx(z,{variant:"outline",children:"Фильтры"})}),s.jsx(fs,{className:"w-64",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{children:[s.jsx(ee,{className:"mb-1 block",children:"Категория"}),s.jsxs(ht,{value:R||"all",onValueChange:O=>{M(O==="all"?void 0:O),l(1)},children:[s.jsx(lt,{children:s.jsx(ft,{placeholder:"Все категории"})}),s.jsxs(ct,{children:[s.jsx(Ne,{value:"all",children:"Все категории"}),Object.entries(Je).map(([O,L])=>s.jsx(Ne,{value:O,children:L},O))]})]})]}),s.jsxs("div",{children:[s.jsx(ee,{className:"mb-1 block",children:"Стиль"}),s.jsxs(ht,{value:S||"all",onValueChange:O=>{k(O==="all"?void 0:O),l(1)},children:[s.jsx(lt,{children:s.jsx(ft,{placeholder:"Все стили"})}),s.jsxs(ct,{children:[s.jsx(Ne,{value:"all",children:"Все стили"}),j.map(O=>s.jsx(Ne,{value:O,children:O},O))]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ee,{htmlFor:"only-price-switch",children:"Только с ценой"}),s.jsx(bt,{id:"only-price-switch",checked:N,onCheckedChange:O=>{y(O),l(1)}})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{className:"block",children:"Цена"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"flex-1",children:s.jsx("input",{placeholder:"От",value:C,onChange:O=>{_(O.target.value),l(1)},type:"number",min:"0",className:"border rounded px-2 py-1 w-full"})}),s.jsx("div",{className:"flex-1",children:s.jsx("input",{placeholder:"До",value:T,onChange:O=>{V(O.target.value),l(1)},type:"number",min:"0",className:"border rounded px-2 py-1 w-full"})})]})]})]})})]}),s.jsx(z,{asChild:!0,children:s.jsxs(H,{to:"/admin/outfits/new",className:"flex items-center gap-2",children:[s.jsx(Yi,{className:"h-4 w-4"}),"Добавить образ"]})})]})]}),s.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-200 bg-white shadow-sm dark:border-gray-800 dark:bg-gray-950",children:s.jsxs("table",{className:"min-w-full text-left",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:"ID"}),s.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Название"}),s.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Стиль"}),s.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Цена"}),s.jsx("th",{className:"px-6 py-3 text-right text-sm font-medium text-gray-700 dark:text-gray-300",children:"Действия"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:e.length>0?e.map(O=>s.jsxs(F.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50/50 dark:hover:bg-gray-900/50",children:[s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-900 dark:text-gray-100",children:O.id}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-gray-900 dark:text-gray-100",children:O.name}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:O.style}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:O.total_price?`${O.total_price} ₽`:"-"}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right text-sm font-medium",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(z,{variant:"outline",size:"sm",asChild:!0,className:"border-gray-300 dark:border-gray-700",children:s.jsxs(H,{to:`/admin/outfits/${O.id}/edit`,className:"flex items-center gap-1",children:[s.jsx(mn,{className:"h-3 w-3"}),s.jsx("span",{children:"Редактировать"})]})}),s.jsxs(z,{variant:"destructive",size:"sm",onClick:()=>E(O.id),disabled:f===O.id,className:"flex items-center gap-1",children:[f===O.id?s.jsx(ue,{className:"h-3 w-3 animate-spin"}):s.jsx(Ze,{className:"h-3 w-3"}),s.jsx("span",{children:"Удалить"})]})]})})]},O.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-sm text-gray-500 dark:text-gray-400",children:"Нет доступных образов"})})})]})}),!a&&c&&s.jsx("div",{className:"flex justify-center my-4",children:s.jsx(z,{onClick:()=>l(O=>O+1),disabled:i,children:i?"Загрузка...":"Загрузить ещё"})})]})},aw=()=>{const[e,t]=h.useState(null),[a,n]=h.useState(!0),[i,r]=h.useState(!1),{toast:o}=Oe(),l=async(u=!1)=>{try{u?r(!0):n(!0);const d=await Cf();t(d)}catch{o({variant:"destructive",title:"Ошибка",description:"Не удалось загрузить аналитику"})}finally{n(!1),r(!1)}};h.useEffect(()=>{l()},[]);const c=()=>{l(!0)};return a?s.jsx("div",{className:"flex h-64 items-center justify-center",children:s.jsx(ue,{className:"h-8 w-8 animate-spin text-primary"})}):e?s.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Аналитика товаров"}),s.jsxs("p",{className:"text-muted-foreground",children:["Модератор: ",e.moderator_info.user_name]})]}),s.jsxs(z,{onClick:c,disabled:i,variant:"outline",className:"flex items-center gap-2",children:[i?s.jsx(ue,{className:"h-4 w-4 animate-spin"}):s.jsx(er,{className:"h-4 w-4"}),"Обновить"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx(J,{children:s.jsx(X,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Всего товаров"}),s.jsx("p",{className:"text-3xl font-bold",children:e.overview.total_items})]}),s.jsx(jt,{className:"h-8 w-8 text-blue-500"})]})})}),s.jsx(J,{children:s.jsx(X,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"За неделю"}),s.jsx("p",{className:"text-3xl font-bold",children:e.overview.items_this_week})]}),s.jsx(li,{className:"h-8 w-8 text-green-500"})]})})}),s.jsx(J,{children:s.jsx(X,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Ср. цена"}),s.jsxs("p",{className:"text-3xl font-bold",children:[Math.round(e.price_analysis.average_price).toLocaleString(),"₸"]})]}),s.jsx(Ff,{className:"h-8 w-8 text-purple-500"})]})})}),s.jsx(J,{children:s.jsx(X,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Рост"}),s.jsxs("p",{className:te("text-3xl font-bold",e.recent_activity.growth_rate>0?"text-green-600":"text-red-600"),children:[e.recent_activity.growth_rate>0?"+":"",e.recent_activity.growth_rate,"%"]})]}),s.jsx(Ia,{className:"h-8 w-8 text-orange-500"})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs(J,{children:[s.jsxs(pe,{children:[s.jsx(fe,{children:"Категории товаров"}),s.jsx(Re,{children:"Распределение по категориям"})]}),s.jsx(X,{children:s.jsxs("div",{className:"space-y-3",children:[e.categories.slice(0,8).map((u,d)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500/20 flex items-center justify-center text-xs font-medium",children:d+1}),s.jsx("span",{className:"font-medium",children:u.category})]}),s.jsx(le,{variant:"outline",children:u.count})]},u.category)),e.categories.length===0&&s.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Нет данных о категориях"})]})})]}),s.jsxs(J,{children:[s.jsxs(pe,{children:[s.jsx(fe,{children:"Бренды"}),s.jsx(Re,{children:"Топ брендов в ваших товарах"})]}),s.jsx(X,{children:s.jsxs("div",{className:"space-y-3",children:[e.brands.slice(0,8).map((u,d)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500/20 flex items-center justify-center text-xs font-medium",children:d+1}),s.jsx("span",{className:"font-medium",children:u.brand})]}),s.jsx(le,{variant:"outline",children:u.count})]},u.brand)),e.brands.length===0&&s.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Нет данных о брендах"})]})})]}),s.jsxs(J,{children:[s.jsxs(pe,{children:[s.jsx(fe,{children:"Ценовой анализ"}),s.jsx(Re,{children:"Статистика по ценам товаров"})]}),s.jsx(X,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[Math.round(e.price_analysis.min_price).toLocaleString(),"₸"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Минимальная"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[Math.round(e.price_analysis.average_price).toLocaleString(),"₸"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Средняя"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[Math.round(e.price_analysis.max_price).toLocaleString(),"₸"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Максимальная"})]})]}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Товаров с ценой: ",e.price_analysis.items_with_price," из ",e.overview.total_items]})})]})})]}),s.jsxs(J,{children:[s.jsxs(pe,{children:[s.jsx(fe,{children:"Популярные товары"}),s.jsx(Re,{children:"Товары с наибольшим количеством лайков"})]}),s.jsx(X,{children:s.jsxs("div",{className:"space-y-3",children:[e.popular_items.by_likes.slice(0,5).map((u,d)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-red-500/20 flex items-center justify-center text-xs font-medium",children:d+1}),s.jsx("span",{className:"font-medium truncate max-w-32",children:u.name})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Me,{className:"h-4 w-4 text-red-500"}),s.jsx(le,{variant:"outline",children:u.likes})]})]},u.item_id)),e.popular_items.by_likes.length===0&&s.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Нет данных о популярности"})]})})]})]}),s.jsxs(J,{className:"mt-8",children:[s.jsxs(pe,{children:[s.jsx(fe,{children:"Активность"}),s.jsx(Re,{children:"Статистика активности за последний месяц"})]}),s.jsx(X,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[s.jsx(li,{className:"h-5 w-5 text-blue-500"}),s.jsx("h3",{className:"font-semibold",children:"За неделю"})]}),s.jsx("p",{className:"text-2xl font-bold",children:e.recent_activity.last_week_items}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"товаров добавлено"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[s.jsx(Hf,{className:"h-5 w-5 text-green-500"}),s.jsx("h3",{className:"font-semibold",children:"За месяц"})]}),s.jsx("p",{className:"text-2xl font-bold",children:e.recent_activity.last_month_items}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"товаров добавлено"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[s.jsx(Ia,{className:"h-5 w-5 text-orange-500"}),s.jsx("h3",{className:"font-semibold",children:"Рост"})]}),s.jsxs("p",{className:te("text-2xl font-bold",e.recent_activity.growth_rate>0?"text-green-600":"text-red-600"),children:[e.recent_activity.growth_rate>0?"+":"",e.recent_activity.growth_rate,"%"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"по сравнению с прошлым периодом"})]})]})})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Данные обновлены: ",new Date(e.generated_at).toLocaleString("ru-RU")]})})]}):s.jsx("div",{className:"flex h-64 items-center justify-center",children:s.jsx("p",{className:"text-muted-foreground",children:"Не удалось загрузить аналитику"})})},nw=async()=>(await U.get("/api/system/analytics")).data,iw=async()=>(await U.get("/api/system/health")).data,rw=async()=>(await U.get("/api/system/performance")).data,ow=()=>{const[e,t]=h.useState(null),[a,n]=h.useState(null),[i,r]=h.useState(null),[o,l]=h.useState(!0),[c,u]=h.useState(!1),[d,m]=h.useState("overview"),[p,x]=h.useState(!1),[f,v]=h.useState(!1),{toast:g}=Oe(),S=async(C=!1)=>{var _,T;try{C?u(!0):l(!0),x(!1),v(!1);const[V,N,y]=await Promise.all([nw(),iw(),rw()]);t(V),n(N),r(y)}catch(V){((_=V==null?void 0:V.response)==null?void 0:_.status)===401||((T=V==null?void 0:V.response)==null?void 0:T.status)===403?x(!0):v(!0),g({variant:"destructive",title:"Ошибка",description:"Не удалось загрузить системную аналитику"})}finally{l(!1),u(!1)}};h.useEffect(()=>{S()},[]);const k=()=>{S(!0)};return o?s.jsx("div",{className:"flex h-64 items-center justify-center",children:s.jsx(ue,{className:"h-8 w-8 animate-spin text-primary"})}):p?s.jsx("div",{className:"flex h-64 items-center justify-center",children:s.jsx("p",{className:"text-red-500 text-lg font-semibold",children:"Нет доступа. Войдите как администратор."})}):f?s.jsx("div",{className:"flex h-64 items-center justify-center",children:s.jsx("p",{className:"text-red-500 text-lg font-semibold",children:"Ошибка сервера. Обратитесь к разработчику."})}):!e||!a||!i?s.jsx("div",{className:"flex h-64 items-center justify-center",children:s.jsx("p",{className:"text-muted-foreground",children:"Не удалось загрузить данные"})}):s.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight text-foreground",children:"Системная аналитика"}),s.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Полный анализ системы и мониторинг производительности"})]}),s.jsxs(z,{onClick:k,disabled:c,variant:"outline",className:"flex items-center gap-2 w-full sm:w-auto",children:[c?s.jsx(ue,{className:"h-4 w-4 animate-spin"}):s.jsx(er,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Обновить"}),s.jsx("span",{className:"sm:hidden",children:"Обновить"})]})]}),s.jsxs(J,{className:"border-l-4 border-l-green-500",children:[s.jsx(pe,{children:s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(Cs,{className:"h-5 w-5"}),"Состояние системы"]})}),s.jsx(X,{children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ka,{className:"h-5 w-5 text-blue-500"}),s.jsxs("span",{className:"font-medium text-sm sm:text-base",children:["Пользователей: ",a.users_count]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jt,{className:"h-5 w-5 text-purple-500"}),s.jsxs("span",{className:"font-medium text-sm sm:text-base",children:["Товаров: ",a.items_count]})]})]})})]}),s.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap space-y-1 sm:space-y-0 sm:space-x-1 bg-muted p-1 rounded-lg",children:[s.jsxs("button",{onClick:()=>m("overview"),className:te("flex-1 px-2 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-md transition-colors",d==="overview"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[s.jsx("span",{className:"hidden sm:inline",children:"Обзор"}),s.jsx("span",{className:"sm:hidden",children:"Обзор"})]}),s.jsxs("button",{onClick:()=>m("users"),className:te("flex-1 px-2 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-md transition-colors",d==="users"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[s.jsx("span",{className:"hidden sm:inline",children:"Пользователи"}),s.jsx("span",{className:"sm:hidden",children:"Пользователи"})]}),s.jsxs("button",{onClick:()=>m("content"),className:te("flex-1 px-2 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-md transition-colors",d==="content"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[s.jsx("span",{className:"hidden sm:inline",children:"Контент"}),s.jsx("span",{className:"sm:hidden",children:"Контент"})]}),s.jsxs("button",{onClick:()=>m("performance"),className:te("flex-1 px-2 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-md transition-colors",d==="performance"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[s.jsx("span",{className:"hidden sm:inline",children:"Производительность"}),s.jsx("span",{className:"sm:hidden",children:"Производительность"})]})]}),d==="overview"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[s.jsx(J,{children:s.jsx(X,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Всего пользователей"}),s.jsx("p",{className:"text-xl sm:text-3xl font-bold",children:e.system_info.total_users}),s.jsxs("p",{className:"text-xs sm:text-sm text-green-600",children:["+",e.system_info.new_users_month," за месяц"]})]}),s.jsx(ka,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-500"})]})})}),s.jsx(J,{children:s.jsx(X,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Всего товаров"}),s.jsx("p",{className:"text-xl sm:text-3xl font-bold",children:e.content_stats.total_items}),s.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:[e.content_stats.items_with_price," с ценами"]})]}),s.jsx(jt,{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-500"})]})})}),s.jsx(J,{children:s.jsx(X,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Всего образов"}),s.jsx("p",{className:"text-xl sm:text-3xl font-bold",children:e.content_stats.total_outfits}),s.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:[e.content_stats.public_outfits," публичных"]})]}),s.jsx(wd,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500"})]})})}),s.jsx(J,{children:s.jsx(X,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Активность"}),s.jsx("p",{className:"text-xl sm:text-3xl font-bold",children:e.activity_stats.total_views}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"просмотров"})]}),s.jsx(_f,{className:"h-6 w-6 sm:h-8 sm:w-8 text-orange-500"})]})})})]}),s.jsxs(J,{children:[s.jsxs(pe,{children:[s.jsx(fe,{className:"text-lg sm:text-xl",children:"Активность за последние 7 дней"}),s.jsx(Re,{className:"text-sm",children:"Просмотры и избранное по дням"})]}),s.jsx(X,{children:s.jsx("div",{className:"space-y-4",children:e.daily_activity.reverse().map(C=>s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[s.jsx("span",{className:"font-medium text-sm sm:text-base",children:new Date(C.date).toLocaleDateString("ru-RU")}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vf,{className:"h-4 w-4 text-blue-500"}),s.jsx("span",{className:"text-sm sm:text-base",children:C.views})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Me,{className:"h-4 w-4 text-red-500"}),s.jsx("span",{className:"text-sm sm:text-base",children:C.favorites})]})]})]},C.date))})})]})]}),d==="users"&&s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[s.jsxs(J,{children:[s.jsx(pe,{children:s.jsx(fe,{className:"text-lg sm:text-xl",children:"Статистика пользователей"})}),s.jsx(X,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm sm:text-base",children:"Всего пользователей"}),s.jsx(le,{variant:"outline",className:"text-xs sm:text-sm",children:e.system_info.total_users})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm sm:text-base",children:"Активных пользователей"}),s.jsx(le,{variant:"outline",className:"text-xs sm:text-sm",children:e.system_info.active_users})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm sm:text-base",children:"Модераторов"}),s.jsx(le,{variant:"outline",className:"text-xs sm:text-sm",children:e.system_info.moderators})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm sm:text-base",children:"Администраторов"}),s.jsx(le,{variant:"outline",className:"text-xs sm:text-sm",children:e.system_info.admins})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm sm:text-base",children:"Новых за месяц"}),s.jsx(le,{variant:"outline",className:"text-xs sm:text-sm text-green-600",children:e.system_info.new_users_month})]})]})})]}),s.jsxs(J,{children:[s.jsx(pe,{children:s.jsx(fe,{className:"text-lg sm:text-xl",children:"Статистика модераторов"})}),s.jsx(X,{children:s.jsx("div",{className:"space-y-3",children:e.moderator_stats.map(C=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsx("span",{className:"font-medium text-sm sm:text-base truncate",children:C.name}),C.is_active?s.jsx(Ss,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):s.jsx(Da,{className:"h-4 w-4 text-red-500 flex-shrink-0"})]}),s.jsxs(le,{variant:"outline",className:"text-xs sm:text-sm flex-shrink-0",children:[C.items_count," товаров"]})]},C.user_id))})})]})]})}),d==="content"&&s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[s.jsxs(J,{children:[s.jsx(pe,{children:s.jsx(fe,{className:"text-lg sm:text-xl",children:"Топ категорий"})}),s.jsx(X,{children:s.jsx("div",{className:"space-y-3",children:e.top_categories.slice(0,8).map((C,_)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 rounded-full bg-blue-500/20 flex items-center justify-center text-xs font-medium flex-shrink-0",children:_+1}),s.jsx("span",{className:"font-medium text-sm sm:text-base truncate",children:C.category})]}),s.jsx(le,{variant:"outline",className:"text-xs sm:text-sm flex-shrink-0",children:C.count})]},C.category))})})]}),s.jsxs(J,{children:[s.jsx(pe,{children:s.jsx(fe,{className:"text-lg sm:text-xl",children:"Топ брендов"})}),s.jsx(X,{children:s.jsx("div",{className:"space-y-3",children:e.top_brands.slice(0,8).map((C,_)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 rounded-full bg-green-500/20 flex items-center justify-center text-xs font-medium flex-shrink-0",children:_+1}),s.jsx("span",{className:"font-medium text-sm sm:text-base truncate",children:C.brand})]}),s.jsx(le,{variant:"outline",className:"text-xs sm:text-sm flex-shrink-0",children:C.count})]},C.brand))})})]}),s.jsxs(J,{children:[s.jsx(pe,{children:s.jsx(fe,{className:"text-lg sm:text-xl",children:"Популярные товары"})}),s.jsx(X,{children:s.jsx("div",{className:"space-y-3",children:e.popular_items.slice(0,5).map((C,_)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 rounded-full bg-red-500/20 flex items-center justify-center text-xs font-medium flex-shrink-0",children:_+1}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("span",{className:"font-medium text-sm sm:text-base truncate block",children:C.name}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:C.brand})]})]}),s.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[s.jsx(Me,{className:"h-4 w-4 text-red-500"}),s.jsx(le,{variant:"outline",className:"text-xs sm:text-sm",children:C.likes})]})]},C.id))})})]}),s.jsxs(J,{children:[s.jsx(pe,{children:s.jsx(fe,{className:"text-lg sm:text-xl",children:"Популярные образы"})}),s.jsx(X,{children:s.jsx("div",{className:"space-y-3",children:e.popular_outfits.slice(0,5).map((C,_)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 rounded-full bg-purple-500/20 flex items-center justify-center text-xs font-medium flex-shrink-0",children:_+1}),s.jsx("span",{className:"font-medium text-sm sm:text-base truncate",children:C.name})]}),s.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[s.jsx(Me,{className:"h-4 w-4 text-red-500"}),s.jsx(le,{variant:"outline",className:"text-xs sm:text-sm",children:C.likes})]})]},C.id))})})]})]})}),d==="performance"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[s.jsx(J,{children:s.jsx(X,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Запросов/час"}),s.jsx("p",{className:"text-xl sm:text-3xl font-bold",children:i.requests_per_hour})]}),s.jsx(Ps,{className:"h-6 w-6 sm:h-8 sm:w-8 text-yellow-500"})]})})}),s.jsx(J,{children:s.jsx(X,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Активных пользователей/час"}),s.jsx("p",{className:"text-xl sm:text-3xl font-bold",children:i.active_users_hour})]}),s.jsx(ka,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-500"})]})})}),s.jsx(J,{children:s.jsx(X,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"База данных"}),s.jsx("p",{className:"text-xl sm:text-3xl font-bold",children:a.database==="connected"?"healthy":"disconnected"}),a.database==="connected"&&s.jsxs("span",{className:"text-xs sm:text-sm text-muted-foreground",children:["Соединений: ",i.database_connections]})]}),a.database==="connected"?s.jsx(Cs,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500"}):s.jsx(Cs,{className:"h-6 w-6 sm:h-8 sm:w-8 text-red-500"})]})})}),s.jsx(J,{children:s.jsx(X,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Память"}),s.jsx("p",{className:"text-xl sm:text-3xl font-bold",children:i.memory_usage})]}),s.jsx(La,{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-500"})]})})})]}),s.jsxs(J,{children:[s.jsx(pe,{children:s.jsx(fe,{className:"text-lg sm:text-xl",children:"Статистика активности"})}),s.jsx(X,{children:s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:e.activity_stats.total_views}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Просмотров"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-red-600",children:e.activity_stats.total_favorites}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Избранных товаров"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-green-600",children:e.activity_stats.total_outfit_favorites}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Избранных образов"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-purple-600",children:e.activity_stats.total_comments}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Комментариев"})]})]})})]})]}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:["Данные обновлены: ",new Date(e.generated_at).toLocaleString("ru-RU")]})})]})},lw=async e=>(await U.post("/api/users/",e)).data,cw=async e=>(await U.get(`/api/users/${e}`)).data,dw=async(e,t)=>(await U.patch(`/api/users/${e}`,t)).data,uw={email:"",password:"",is_admin:!1,is_moderator:!1,is_active:!0},_l=()=>{const e=dt(),{id:t}=kt(),{toast:a}=Oe(),n=!!t,[i,r]=h.useState(uw),[o,l]=h.useState(!0),[c,u]=h.useState(!1);h.useEffect(()=>{(async()=>{try{if(n){const f=await cw(Number(t));r({email:f.email,password:"",is_admin:!!f.is_admin,is_moderator:!!f.is_moderator,is_active:!!f.is_active})}}catch{a({variant:"destructive",title:"Ошибка",description:"Не удалось загрузить данные пользователя"})}finally{l(!1)}})()},[t,n,a]);const d=x=>{const{name:f,value:v}=x.target;r(g=>({...g,[f]:v}))},m=x=>{r(f=>({...f,[x]:!f[x]}))},p=async x=>{if(x.preventDefault(),!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)){a({variant:"destructive",title:"Ошибка",description:"Некорректный email"});return}if(!n&&i.password.length<8){a({variant:"destructive",title:"Ошибка",description:"Пароль должен содержать минимум 8 символов"});return}u(!0);try{if(n){const v={email:i.email,password:i.password||void 0,is_admin:i.is_admin,is_moderator:i.is_moderator,is_active:i.is_active};await dw(Number(t),v),a({title:"Успешно",description:"Пользователь успешно обновлен",className:"border-0 bg-green-500 text-white shadow-lg"})}else await lw(i),a({title:"Успешно",description:"Пользователь успешно создан",className:"border-0 bg-green-500 text-white shadow-lg"});e("/admin/users")}catch{a({variant:"destructive",title:"Ошибка",description:"Произошла ошибка при сохранении",className:"shadow-lg"})}finally{u(!1)}};return o?s.jsx("div",{className:"flex h-64 items-center justify-center",children:s.jsx(ue,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"container mx-auto max-w-2xl px-4 py-8",children:[s.jsxs("div",{className:"mb-8 flex items-center gap-4",children:[s.jsx(z,{variant:"ghost",size:"icon",onClick:()=>e("/admin/users"),className:"shrink-0 hover:bg-accent/50",children:s.jsx(un,{className:"h-5 w-5"})}),s.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:n?"Редактирование пользователя":"Создание нового пользователя"})]}),s.jsxs("form",{onSubmit:p,className:"space-y-6",children:[s.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-800 dark:bg-gray-950",children:[s.jsx("h2",{className:"mb-6 text-xl font-semibold text-gray-900 dark:text-gray-50",children:"Основная информация"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(ee,{htmlFor:"email",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email*"}),s.jsx(Z,{id:"email",name:"email",type:"email",value:i.email,onChange:d,required:!0,placeholder:"user@example.com",className:"focus:border-primary focus:ring-2 focus:ring-primary/20"})]}),n?s.jsxs("div",{className:"space-y-3",children:[s.jsx(ee,{htmlFor:"password",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Новый пароль"}),s.jsx(Z,{id:"password",name:"password",type:"password",value:i.password,onChange:d,placeholder:"Оставьте пустым, чтобы не менять",className:"focus:border-primary focus:ring-2 focus:ring-primary/20"})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsx(ee,{htmlFor:"password",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Пароль*"}),s.jsx(Z,{id:"password",name:"password",type:"password",value:i.password,onChange:d,required:!0,placeholder:"••••••••",className:"focus:border-primary focus:ring-2 focus:ring-primary/20"})]})]})]}),s.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-800 dark:bg-gray-950",children:[s.jsx("h2",{className:"mb-6 text-xl font-semibold text-gray-900 dark:text-gray-50",children:"Настройки"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-900/50",children:[s.jsxs("div",{children:[s.jsx(ee,{htmlFor:"is_admin",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Администратор"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Дает полный доступ к панели управления"})]}),s.jsx(bt,{id:"is_admin",checked:i.is_admin,onCheckedChange:()=>m("is_admin"),className:"data-[state=checked]:bg-primary data-[state=unchecked]:bg-gray-200 dark:data-[state=unchecked]:bg-gray-700"})]}),s.jsxs("div",{className:"flex items-center justify-between rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-900/50",children:[s.jsxs("div",{children:[s.jsx(ee,{htmlFor:"is_moderator",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Модератор"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Может создавать товары и управлять своими товарами"})]}),s.jsx(bt,{id:"is_moderator",checked:!!i.is_moderator,onCheckedChange:()=>m("is_moderator"),className:"data-[state=checked]:bg-yellow-500 data-[state=unchecked]:bg-gray-200 dark:data-[state=unchecked]:bg-gray-700"})]}),s.jsxs("div",{className:"flex items-center justify-between rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-900/50",children:[s.jsxs("div",{children:[s.jsx(ee,{htmlFor:"is_active",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Активный"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Позволяет пользователю входить в систему"})]}),s.jsx(bt,{id:"is_active",checked:i.is_active,onCheckedChange:()=>m("is_active"),className:"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-gray-200 dark:data-[state=unchecked]:bg-gray-700"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(z,{type:"button",variant:"outline",onClick:()=>e("/admin/users"),className:"border-gray-300 text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-800",children:"Отмена"}),s.jsxs(z,{type:"submit",disabled:c,className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary shadow-lg",children:[c&&s.jsx(ue,{className:"mr-2 h-4 w-4 animate-spin"}),s.jsx(ds,{className:te("h-4 w-4",!c&&"mr-2")}),c?"Сохранение...":"Сохранить"]})]})]})]})},mw={name:"",brand:"",color:"",clothing_type:"top",image_url:"",description:"",price:void 0,category:"top",article:"",size:"",style:"",collection:""},pw=[{value:"top",label:"Верх (футболки, рубашки, платья, куртки)"},{value:"bottom",label:"Низ (джинсы, юбки, шорты, брюки)"},{value:"footwear",label:"Обувь (кроссовки, туфли, ботинки)"},{value:"accessory",label:"Аксессуары (сумки, часы, очки)"},{value:"fragrance",label:"Ароматы (духи, парфюм)"}],Dl=()=>{const e=dt(),{id:t}=kt(),{toast:a}=Oe(),n=!!t,[i,r]=h.useState(mw),[o,l]=h.useState(!0),[c,u]=h.useState(!1),[d,m]=h.useState([]),[p,x]=h.useState([]),[f,v]=h.useState([]),g=h.useRef(null);h.useEffect(()=>{(async()=>{try{if(n){const y=await ud(Number(t));r({...y,clothing_type:y.category});try{const w=await kf(Number(t));v(w)}catch{}}}catch{a({variant:"destructive",title:"Ошибка",description:"Не удалось загрузить данные о товаре"})}finally{l(!1)}})()},[t,n,a]),h.useEffect(()=>{(async()=>{if(n)try{const y=await lo(Number(t));x(y.map(w=>({size:w.size,color:w.color,sku:w.sku,stock:w.stock,price:w.price})))}catch{}})()},[t,n]);const S=N=>{const{name:y,value:w}=N.target;r(b=>({...b,[y]:w}))},k=(N,y)=>{r(w=>({...w,category:y,clothing_type:y}))},C=N=>{const{name:y,value:w}=N.target;r(b=>({...b,[y]:w===""?void 0:Number(w)}))},_=N=>{if(!N.target.files)return;const y=Array.from(N.target.files);m(y)},T=N=>{m(y=>y.filter((w,b)=>b!==N))},V=async N=>{if(N.preventDefault(),!i.name.trim()){a({variant:"destructive",title:"Ошибка",description:"Название товара обязательно"});return}if(i.price!==void 0&&i.price<=0){a({variant:"destructive",title:"Ошибка",description:"Цена должна быть положительным числом"});return}u(!0);try{let y=null;if(n){const w={...i};await yf(Number(t),w),y=Number(t),a({title:"Успешно",description:"Товар успешно обновлен"})}else{const w=new FormData;Object.entries(i).forEach(([R,M])=>{M!==void 0&&M!==""&&w.append(R,String(M))}),d.forEach(R=>{w.append("images",R)}),y=(await gf(w)).id,a({title:"Успешно",description:"Товар успешно создан"})}if(y&&p.length>0){if(n){const w=await lo(y);await Promise.all(w.map(b=>Nf(y,b.id)))}for(const w of p)await wf(y,w)}e("/admin/items")}catch{a({variant:"destructive",title:"Ошибка",description:"Произошла ошибка при сохранении"})}finally{u(!1)}};return o?s.jsx("div",{className:"flex h-64 items-center justify-center",children:s.jsx(ue,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"container mx-auto max-w-4xl px-4 py-8",children:[s.jsxs("div",{className:"mb-8 flex items-center gap-4",children:[s.jsx(z,{variant:"ghost",size:"icon",onClick:()=>e("/admin/items"),className:"shrink-0 hover:bg-accent/50",children:s.jsx(un,{className:"h-5 w-5"})}),s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n?"Редактирование товара":"Создание нового товара"})]}),s.jsxs("form",{onSubmit:V,className:"space-y-8",children:[s.jsxs("div",{className:"rounded-lg border bg-card p-6 shadow-sm",children:[s.jsx("h2",{className:"mb-6 text-xl font-semibold",children:"Основная информация"}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"name",children:"Название*"}),s.jsx(Z,{id:"name",name:"name",value:i.name,onChange:S,required:!0,placeholder:"Название товара"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"brand",children:"Бренд"}),s.jsx(Z,{id:"brand",name:"brand",value:i.brand||"",onChange:S,placeholder:"Бренд"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"category",children:"Категория товара"}),s.jsxs(ht,{value:i.category,onValueChange:N=>k("category",N),children:[s.jsx(lt,{children:s.jsx(ft,{placeholder:"Выберите категорию"})}),s.jsx(ct,{children:pw.map(N=>s.jsx(Ne,{value:N.value,children:N.label},N.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"price",children:"Цена"}),s.jsx(Z,{id:"price",name:"price",type:"number",value:i.price??"",onChange:C,placeholder:"Цена"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"size",children:"Размер"}),s.jsx(Z,{id:"size",name:"size",value:i.size||"",onChange:S,placeholder:"Размер"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"color",children:"Цвет"}),s.jsx(Z,{id:"color",name:"color",value:i.color||"",onChange:S,placeholder:"Цвет"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"article",children:"Артикул / SKU"}),s.jsx(Z,{id:"article",name:"article",value:i.article||"",onChange:S,placeholder:"Уникальный артикул товара"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"style",children:"Стиль"}),s.jsx(Z,{id:"style",name:"style",value:i.style||"",onChange:S,placeholder:"Классический, спорт-шик, casual..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"collection",children:"Коллекция"}),s.jsx(Z,{id:"collection",name:"collection",value:i.collection||"",onChange:S,placeholder:"Напр. Summer 2024"})]})]})]}),s.jsxs("div",{className:"rounded-lg border bg-card p-6 shadow-sm",children:[s.jsx("h2",{className:"mb-6 text-xl font-semibold",children:"Изображение и описание"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"image_files",children:"Загрузить изображения"}),s.jsxs(Ua,{children:[s.jsx(qa,{asChild:!0,children:s.jsxs(z,{type:"button",variant:"outline",size:"sm",className:"flex items-center gap-2",children:[s.jsx(Vs,{className:"h-4 w-4"}),s.jsx("span",{children:"Загрузить"})]})}),s.jsxs(Ks,{className:"w-40",children:[s.jsxs(Pe,{onSelect:N=>{var y;N.preventDefault(),(y=g.current)==null||y.click()},className:"flex items-center gap-2",children:[s.jsx(Vs,{className:"h-4 w-4"})," Файл"]}),s.jsxs(Pe,{onSelect:N=>{N.preventDefault();const y=prompt("Введите URL изображения:");if(y){if(!/^https?:\/\//.test(y)){a({variant:"destructive",title:"Ошибка",description:"URL должен начинаться с http:// или https://"});return}r(w=>({...w,image_url:y}))}},className:"flex items-center gap-2",children:[s.jsx(kd,{className:"h-4 w-4"})," Ссылка"]})]})]}),s.jsx("input",{id:"image_files",ref:g,name:"image_files",type:"file",accept:"image/*",multiple:!0,onChange:_,className:"hidden"}),s.jsx("span",{className:"text-sm text-muted-foreground block",children:d.length>0?`${d.length} файлов выбрано`:"Файлы не выбраны"})]}),(f.length>0||d.length>0)&&s.jsxs("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4",children:[f.map(N=>s.jsxs("div",{className:"relative group h-40 w-full overflow-hidden rounded-lg border",children:[s.jsx("img",{src:N.image_url,alt:"Изображение товара",className:"h-full w-full object-cover"}),s.jsx("button",{type:"button",onClick:async()=>{if(confirm("Удалить изображение?"))try{await Sf(Number(t),N.id),v(y=>y.filter(w=>w.id!==N.id))}catch{a({variant:"destructive",title:"Ошибка",description:"Не удалось удалить изображение"})}},className:"absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(Ze,{className:"h-6 w-6 text-white"})})]},N.id)),d.map((N,y)=>s.jsxs("div",{className:"relative group h-40 w-full overflow-hidden rounded-lg border",children:[s.jsx("img",{src:URL.createObjectURL(N),alt:`preview-${y}`,className:"h-full w-full object-cover"}),s.jsx("button",{type:"button",onClick:()=>T(y),className:"absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(Ze,{className:"h-6 w-6 text-white"})})]},y))]}),i.image_url&&s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"relative h-48 w-48 overflow-hidden rounded-lg border-2 border-dashed border-muted-foreground/20",children:s.jsx("img",{src:i.image_url,alt:"Предпросмотр",className:"h-full w-full object-contain",onError:N=>{N.currentTarget.style.display="none"}})})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"description",children:"Описание"}),s.jsx(ot,{id:"description",name:"description",value:i.description||"",onChange:S,placeholder:"Подробное описание товара",rows:5,className:"min-h-[120px]"})]})]})]}),s.jsxs("div",{className:"rounded-lg border bg-card p-6 shadow-sm",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Вариации и остатки"}),s.jsxs(le,{variant:"outline",className:"px-3 py-1",children:[p.length," вариаций"]})]}),p.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-muted-foreground/20 p-8 text-center",children:[s.jsx("p",{className:"mb-4 text-muted-foreground",children:"Вариации ещё не добавлены"}),s.jsxs(z,{type:"button",variant:"outline",onClick:()=>x([{size:"",color:"",sku:"",stock:0,price:void 0}]),children:[s.jsx(Ms,{className:"mr-2 h-4 w-4"}),"Добавить вариацию"]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-12 gap-2 font-medium text-sm text-muted-foreground",children:[s.jsx("div",{className:"col-span-3",children:"Размер"}),s.jsx("div",{className:"col-span-2",children:"Цвет"}),s.jsx("div",{className:"col-span-2",children:"SKU"}),s.jsx("div",{className:"col-span-2",children:"Остаток"}),s.jsx("div",{className:"col-span-2",children:"Цена"}),s.jsx("div",{className:"col-span-1"})]}),p.map((N,y)=>s.jsxs("div",{className:"grid grid-cols-12 items-center gap-2",children:[s.jsx(Z,{className:"col-span-3",placeholder:"Размер",value:N.size||"",onChange:w=>{x(b=>{const R=[...b];return R[y].size=w.target.value,R})}}),s.jsx(Z,{className:"col-span-2",placeholder:"Цвет",value:N.color||"",onChange:w=>{x(b=>{const R=[...b];return R[y].color=w.target.value,R})}}),s.jsx(Z,{className:"col-span-2",placeholder:"SKU",value:N.sku||"",onChange:w=>{x(b=>{const R=[...b];return R[y].sku=w.target.value,R})}}),s.jsx(Z,{className:"col-span-2",type:"number",placeholder:"Остаток",value:N.stock??"",onChange:w=>{x(b=>{const R=[...b];return R[y].stock=Number(w.target.value),R})}}),s.jsx(Z,{className:"col-span-2",type:"number",placeholder:"Цена",value:N.price??"",onChange:w=>{x(b=>{const R=[...b];return R[y].price=w.target.value===""?void 0:Number(w.target.value),R})}}),s.jsx(z,{type:"button",variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:()=>x(w=>w.filter((b,R)=>R!==y)),children:s.jsx(Ze,{className:"h-4 w-4"})})]},y)),s.jsxs(z,{type:"button",variant:"outline",onClick:()=>x([...p,{size:"",color:"",sku:"",stock:0,price:void 0}]),children:[s.jsx(Ms,{className:"mr-2 h-4 w-4"}),"Добавить вариацию"]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(z,{type:"button",variant:"outline",onClick:()=>e("/admin/items"),children:"Отмена"}),s.jsx(z,{type:"submit",disabled:c,className:"min-w-32",children:c?s.jsxs(s.Fragment,{children:[s.jsx(ue,{className:"mr-2 h-4 w-4 animate-spin"}),"Сохранение..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ds,{className:"mr-2 h-4 w-4"}),"Сохранить"]})})]})]})]})},hw={name:"",style:"",description:"",top_ids:[],bottom_ids:[],footwear_ids:[],accessories_ids:[],fragrances_ids:[]},Ml=()=>{const e=dt(),{id:t}=kt(),{toast:a}=Oe(),n=!!t,[i,r]=h.useState(hw),[o,l]=h.useState(!0),[c,u]=h.useState(!1);h.useEffect(()=>{(async()=>{try{if(n){const f=await Tm(Number(t));r({name:f.name,style:f.style,description:f.description??"",top_ids:(f.top||[]).map(v=>v.id),bottom_ids:(f.bottom||[]).map(v=>v.id),footwear_ids:(f.footwear||[]).map(v=>v.id),accessories_ids:(f.accessory||[]).map(v=>v.id),fragrances_ids:(f.fragrance||[]).map(v=>v.id)})}}catch{a({variant:"destructive",title:"Ошибка",description:"Не удалось загрузить данные об образе"})}finally{l(!1)}})()},[t,n,a]);const d=x=>{const{name:f,value:v}=x.target;r(g=>({...g,[f]:v}))},m=(x,f)=>{const v=f.split(",").map(g=>g.trim()).filter(Boolean).map(Number);r(g=>({...g,[x]:v}))},p=async x=>{if(x.preventDefault(),!i.name.trim()||!i.style.trim()){a({variant:"destructive",title:"Ошибка",description:"Название и стиль обязательны"});return}if(![i.top_ids,i.bottom_ids,i.footwear_ids,i.accessories_ids,i.fragrances_ids].some(v=>v&&v.length>0)){a({variant:"destructive",title:"Ошибка",description:"Добавьте хотя бы один элемент в образ"});return}u(!0);try{const v={...i};if(n){const g=v;await Am(Number(t),g),a({title:"Успешно",description:"Образ успешно обновлен"})}else await zr(v),a({title:"Успешно",description:"Образ успешно создан"});e("/admin/outfits")}catch{a({variant:"destructive",title:"Ошибка",description:"Произошла ошибка при сохранении"})}finally{u(!1)}};return o?s.jsx("div",{className:"flex h-64 items-center justify-center",children:s.jsx(ue,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"container mx-auto max-w-3xl px-4 py-8",children:[s.jsxs("div",{className:"mb-8 flex items-center gap-4",children:[s.jsx(z,{variant:"ghost",size:"icon",onClick:()=>e("/admin/outfits"),className:"shrink-0 hover:bg-accent/50",children:s.jsx(un,{className:"h-5 w-5"})}),s.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:n?"Редактирование образа":"Создание нового образа"})]}),s.jsxs("form",{onSubmit:p,className:"space-y-6",children:[s.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-sm",children:[s.jsx("h2",{className:"mb-6 text-xl font-semibold text-foreground",children:"Основная информация"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(ee,{htmlFor:"name",className:"text-sm font-medium text-muted-foreground",children:"Название*"}),s.jsx(Z,{id:"name",name:"name",value:i.name,onChange:d,required:!0,placeholder:"Название образа",className:"focus:border-primary focus:ring-1 focus:ring-primary"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ee,{htmlFor:"style",className:"text-sm font-medium text-muted-foreground",children:"Стиль*"}),s.jsx(Z,{id:"style",name:"style",value:i.style,onChange:d,required:!0,placeholder:"Стиль образа",className:"focus:border-primary focus:ring-1 focus:ring-primary"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ee,{htmlFor:"description",className:"text-sm font-medium text-muted-foreground",children:"Описание"}),s.jsx(ot,{id:"description",name:"description",value:i.description||"",onChange:d,placeholder:"Описание образа",rows:4,className:"min-h-[120px] focus:border-primary focus:ring-1 focus:ring-primary"})]})]})]}),s.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-sm",children:[s.jsx("h2",{className:"mb-6 text-xl font-semibold text-foreground",children:"Состав образа"}),s.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:[{key:"top_ids",label:"ID верха"},{key:"bottom_ids",label:"ID низа"},{key:"footwear_ids",label:"ID обуви"},{key:"accessories_ids",label:"ID аксессуаров"},{key:"fragrances_ids",label:"ID ароматов"}].map(x=>s.jsxs("div",{className:"space-y-3",children:[s.jsxs(ee,{htmlFor:x.key,className:"text-sm font-medium text-muted-foreground",children:[x.label," (через запятую)"]}),s.jsx(Z,{id:x.key,value:(i[x.key]??[]).join(", "),onChange:f=>m(x.key,f.target.value),placeholder:"Например: 123, 456, 789",className:"focus:border-primary focus:ring-1 focus:ring-primary"})]},x.key))})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(z,{type:"button",variant:"outline",onClick:()=>e("/admin/outfits"),className:"border-muted-foreground/30 hover:bg-muted/50",children:"Отмена"}),s.jsxs(z,{type:"submit",disabled:c,className:"bg-primary hover:bg-primary/90",children:[c&&s.jsx(ue,{className:"mr-2 h-4 w-4 animate-spin"}),s.jsx(ds,{className:te("h-4 w-4",!c&&"mr-2")}),c?"Сохранение...":"Сохранить"]})]})]})]})},fw=()=>{const{items:e,totalPrice:t,totalItems:a,updateQuantity:n,removeItem:i,clearCart:r}=Qs();return e.length===0?s.jsxs("div",{className:"container mx-auto flex flex-col items-center justify-center gap-4 px-4 py-16 text-muted-foreground",children:[s.jsx(Is,{className:"h-12 w-12"}),s.jsx("p",{children:"Ваша корзина пуста"}),s.jsx(z,{asChild:!0,children:s.jsx(H,{to:"/items",children:"Перейти к товарам"})})]}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"mb-6 font-display text-3xl font-bold tracking-tight",children:"Корзина"}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[s.jsx("div",{className:"lg:col-span-2 space-y-4",children:e.map(o=>s.jsxs(J,{className:"flex flex-col sm:flex-row overflow-hidden",children:[o.image_url&&s.jsx("img",{src:o.image_url,alt:o.name,className:"h-40 w-full sm:w-32 object-cover"}),s.jsxs(X,{className:"flex flex-1 flex-col gap-2 p-4",children:[s.jsx("h3",{className:"font-medium",children:o.name}),(o.size||o.color)&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.size&&s.jsxs("span",{children:["Размер: ",o.size," "]}),o.color&&s.jsxs("span",{children:["Цвет: ",o.color]})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.price.toLocaleString()," ₸"]}),s.jsxs("div",{className:"mt-auto flex items-center gap-2",children:[s.jsx(z,{variant:"ghost",size:"icon",disabled:o.quantity<=1,onClick:()=>o.quantity>1&&n(o.id,o.quantity-1),children:s.jsx(Qi,{className:"h-4 w-4"})}),s.jsx("span",{children:o.quantity}),s.jsx(z,{variant:"ghost",size:"icon",disabled:o.stock!==void 0&&o.quantity>=o.stock,onClick:()=>{o.stock!==void 0&&o.quantity>=o.stock||n(o.id,o.quantity+1)},children:s.jsx(Ms,{className:"h-4 w-4"})}),o.stock!==void 0&&s.jsxs("span",{className:"text-xs text-muted-foreground text-nowrap",children:["из ",o.stock]})]})]}),s.jsxs(dm,{className:"flex items-center justify-between p-4 sm:flex-col sm:justify-center sm:gap-2",children:[s.jsxs("p",{className:"font-semibold",children:[(o.price*o.quantity).toLocaleString()," ₸"]}),s.jsx(z,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-600",onClick:()=>i(o.id),children:s.jsx(Wf,{className:"h-4 w-4"})})]})]},o.id))}),s.jsx(J,{className:"h-fit",children:s.jsxs(X,{className:"p-6 space-y-4",children:[s.jsx("h2",{className:"text-xl font-medium",children:"Итого"}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{children:"Товары"}),s.jsx("span",{children:a})]}),s.jsxs("div",{className:"flex items-center justify-between text-lg font-semibold",children:[s.jsx("span",{children:"Сумма"}),s.jsxs("span",{children:[t.toLocaleString()," ₸"]})]}),s.jsx(z,{className:"w-full",children:"Оформить заказ"}),s.jsx(z,{variant:"outline",className:"w-full",onClick:r,children:"Очистить корзину"})]})})]})]})},xw=()=>{const[e,t]=h.useState([]),[a,n]=h.useState([]),[i,r]=h.useState(!0),[o,l]=h.useState(1),[c,u]=h.useState(1),[d,m]=h.useState(!0),[p,x]=h.useState(!0),f=async(y,w=!1)=>{try{const b=await bf(y);t(R=>w?[...R,...b]:b),m(b.length===20)}catch(b){console.error(b)}},v=async(y,w=!1)=>{try{const b=await Sj(y);n(R=>w?[...R,...b]:b),x(b.length===20)}catch(b){console.error(b)}},g=async()=>{try{await Promise.all([f(1),v(1)])}catch(y){console.error(y)}finally{r(!1)}};h.useEffect(()=>{g()},[]);const S=async()=>{try{await Promise.all([jf(),Cj()]),t([]),n([]),l(1),u(1),m(!0),x(!0)}catch(y){console.error(y)}},k=h.useRef(null),C=h.useCallback(y=>{i||d&&(k.current&&k.current.disconnect(),k.current=new IntersectionObserver(w=>{w[0].isIntersecting&&l(b=>b+1)}),y&&k.current.observe(y))},[i,d]),_=h.useRef(null),T=h.useCallback(y=>{i||p&&(_.current&&_.current.disconnect(),_.current=new IntersectionObserver(w=>{w[0].isIntersecting&&u(b=>b+1)}),y&&_.current.observe(y))},[i,p]);h.useEffect(()=>{o>1&&f(o,!0)},[o]),h.useEffect(()=>{c>1&&v(c,!0)},[c]);const V={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},N={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsx("h1",{className:"font-display text-3xl font-bold tracking-tight",children:"История просмотров"}),(e.length>0||a.length>0)&&s.jsx(z,{variant:"outline",size:"sm",onClick:S,children:"Очистить историю"})]}),i&&s.jsx("p",{className:"py-8 text-center",children:"Загрузка..."}),!i&&e.length===0&&a.length===0&&s.jsxs("div",{className:"flex flex-col items-center py-16 text-muted-foreground",children:[s.jsx(Ma,{className:"mb-4 h-12 w-12 text-muted-foreground"}),s.jsx("p",{children:"История просмотров пуста"})]}),!i&&e.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Товары"}),s.jsx(F.div,{variants:V,initial:"hidden",animate:"visible",className:"mb-10 grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:e.map((y,w)=>s.jsx(F.div,{variants:N,ref:w===e.length-1?C:null,children:s.jsx(J,{className:"group overflow-hidden transition-all hover:shadow-lg",children:s.jsxs(H,{to:`/items/${y.id}`,children:[s.jsx("div",{className:"relative aspect-[3/4] overflow-hidden",children:y.image_url?s.jsx("img",{src:y.image_url,alt:y.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"}):s.jsx("div",{className:"flex h-full w-full items-center justify-center bg-muted",children:s.jsx(Be,{className:"h-10 w-10 text-muted-foreground"})})}),s.jsxs(X,{className:"p-4",children:[s.jsxs("div",{className:"mb-2",children:[y.category&&s.jsx(le,{variant:"outline",className:"mb-2 text-xs capitalize",children:Je[y.category]??y.category}),s.jsx("h3",{className:"font-medium leading-tight",title:y.name,children:y.name}),y.brand&&s.jsx("p",{className:"text-sm text-muted-foreground",children:y.brand})]}),y.price!==null&&y.price!==void 0&&s.jsxs("p",{className:"font-semibold",children:[y.price.toLocaleString()," ₸"]})]})]})})},y.id))})]}),!i&&a.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Образы"}),s.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:a.map((y,w)=>s.jsxs(H,{to:`/outfits/${y.id}`,className:"block rounded-md border p-4 hover:shadow",ref:w===a.length-1?T:null,children:[s.jsx("h3",{className:"text-lg font-medium",children:y.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Стиль: ",y.style]}),y.total_price&&s.jsxs("p",{className:"mt-2 font-semibold",children:[y.total_price,"₸"]})]},y.id))})]})]})};var Gn={exports:{}},Jn,Il;function gw(){if(Il)return Jn;Il=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Jn=e,Jn}var Xn,Fl;function yw(){if(Fl)return Xn;Fl=1;var e=gw();function t(){}function a(){}return a.resetWarningCache=t,Xn=function(){function n(o,l,c,u,d,m){if(m!==e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}n.isRequired=n;function i(){return n}var r={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:a,resetWarningCache:t};return r.PropTypes=r,r},Xn}var Vl;function vw(){return Vl||(Vl=1,Gn.exports=yw()()),Gn.exports}var bw=vw();const xe=Dc(bw),jw=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function is(e,t,a){const n=ww(e),{webkitRelativePath:i}=e,r=typeof t=="string"?t:typeof i=="string"&&i.length>0?i:`./${e.name}`;return typeof n.path!="string"&&zl(n,"path",r),zl(n,"relativePath",r),n}function ww(e){const{name:t}=e;if(t&&t.lastIndexOf(".")!==-1&&!e.type){const n=t.split(".").pop().toLowerCase(),i=jw.get(n);i&&Object.defineProperty(e,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}function zl(e,t,a){Object.defineProperty(e,t,{value:a,writable:!1,configurable:!1,enumerable:!0})}const Nw=[".DS_Store","Thumbs.db"];function kw(e){return $t(this,void 0,void 0,function*(){return Ga(e)&&Sw(e.dataTransfer)?Aw(e.dataTransfer,e.type):Cw(e)?Pw(e):Array.isArray(e)&&e.every(t=>"getFile"in t&&typeof t.getFile=="function")?Tw(e):[]})}function Sw(e){return Ga(e)}function Cw(e){return Ga(e)&&Ga(e.target)}function Ga(e){return typeof e=="object"&&e!==null}function Pw(e){return Mi(e.target.files).map(t=>is(t))}function Tw(e){return $t(this,void 0,void 0,function*(){return(yield Promise.all(e.map(a=>a.getFile()))).map(a=>is(a))})}function Aw(e,t){return $t(this,void 0,void 0,function*(){if(e.items){const a=Mi(e.items).filter(i=>i.kind==="file");if(t!=="drop")return a;const n=yield Promise.all(a.map(Rw));return $l(Lm(n))}return $l(Mi(e.files).map(a=>is(a)))})}function $l(e){return e.filter(t=>Nw.indexOf(t.name)===-1)}function Mi(e){if(e===null)return[];const t=[];for(let a=0;a<e.length;a++){const n=e[a];t.push(n)}return t}function Rw(e){if(typeof e.webkitGetAsEntry!="function")return Bl(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?_m(t):Bl(e,t)}function Lm(e){return e.reduce((t,a)=>[...t,...Array.isArray(a)?Lm(a):[a]],[])}function Bl(e,t){return $t(this,void 0,void 0,function*(){var a;if(globalThis.isSecureContext&&typeof e.getAsFileSystemHandle=="function"){const r=yield e.getAsFileSystemHandle();if(r===null)throw new Error(`${e} is not a File`);if(r!==void 0){const o=yield r.getFile();return o.handle=r,is(o)}}const n=e.getAsFile();if(!n)throw new Error(`${e} is not a File`);return is(n,(a=t==null?void 0:t.fullPath)!==null&&a!==void 0?a:void 0)})}function Ew(e){return $t(this,void 0,void 0,function*(){return e.isDirectory?_m(e):Ow(e)})}function _m(e){const t=e.createReader();return new Promise((a,n)=>{const i=[];function r(){t.readEntries(o=>$t(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(Ew));i.push(l),r()}else try{const l=yield Promise.all(i);a(l)}catch(l){n(l)}}),o=>{n(o)})}r()})}function Ow(e){return $t(this,void 0,void 0,function*(){return new Promise((t,a)=>{e.file(n=>{const i=is(n,e.fullPath);t(i)},n=>{a(n)})})})}var ya={},Ul;function Lw(){return Ul||(Ul=1,ya.__esModule=!0,ya.default=function(e,t){if(e&&t){var a=Array.isArray(t)?t:t.split(",");if(a.length===0)return!0;var n=e.name||"",i=(e.type||"").toLowerCase(),r=i.replace(/\/.*$/,"");return a.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?n.toLowerCase().endsWith(l):l.endsWith("/*")?r===l.replace(/\/.*$/,""):i===l})}return!0}),ya}var _w=Lw();const Yn=Dc(_w);function ql(e){return Iw(e)||Mw(e)||Mm(e)||Dw()}function Dw(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mw(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Iw(e){if(Array.isArray(e))return Ii(e)}function Hl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function Wl(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Hl(Object(a),!0).forEach(function(n){Dm(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Hl(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Dm(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Gs(e,t){return zw(e)||Vw(e,t)||Mm(e,t)||Fw()}function Fw(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mm(e,t){if(e){if(typeof e=="string")return Ii(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ii(e,t)}}function Ii(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Vw(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n=[],i=!0,r=!1,o,l;try{for(a=a.call(e);!(i=(o=a.next()).done)&&(n.push(o.value),!(t&&n.length===t));i=!0);}catch(c){r=!0,l=c}finally{try{!i&&a.return!=null&&a.return()}finally{if(r)throw l}}return n}}function zw(e){if(Array.isArray(e))return e}var $w=typeof Yn=="function"?Yn:Yn.default,Bw="file-invalid-type",Uw="file-too-large",qw="file-too-small",Hw="too-many-files",Ww=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=t.split(","),n=a.length>1?"one of ".concat(a.join(", ")):a[0];return{code:Bw,message:"File type must be ".concat(n)}},Kl=function(t){return{code:Uw,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},Gl=function(t){return{code:qw,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},Kw={code:Hw,message:"Too many files"};function Im(e,t){var a=e.type==="application/x-moz-file"||$w(e,t);return[a,a?null:Ww(t)]}function Fm(e,t,a){if(At(e.size))if(At(t)&&At(a)){if(e.size>a)return[!1,Kl(a)];if(e.size<t)return[!1,Gl(t)]}else{if(At(t)&&e.size<t)return[!1,Gl(t)];if(At(a)&&e.size>a)return[!1,Kl(a)]}return[!0,null]}function At(e){return e!=null}function Gw(e){var t=e.files,a=e.accept,n=e.minSize,i=e.maxSize,r=e.multiple,o=e.maxFiles,l=e.validator;return!r&&t.length>1||r&&o>=1&&t.length>o?!1:t.every(function(c){var u=Im(c,a),d=Gs(u,1),m=d[0],p=Fm(c,n,i),x=Gs(p,1),f=x[0],v=l?l(c):null;return m&&f&&!v})}function Ja(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function va(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function Jl(e){e.preventDefault()}function Jw(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function Xw(e){return e.indexOf("Edge/")!==-1}function Yw(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Jw(e)||Xw(e)}function st(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return t.some(function(l){return!Ja(n)&&l&&l.apply(void 0,[n].concat(r)),Ja(n)})}}function Zw(){return"showOpenFilePicker"in window}function Qw(e){if(At(e)){var t=Object.entries(e).filter(function(a){var n=Gs(a,2),i=n[0],r=n[1],o=!0;return Vm(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(r)||!r.every(zm))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(a,n){var i=Gs(n,2),r=i[0],o=i[1];return Wl(Wl({},a),{},Dm({},r,o))},{});return[{description:"Files",accept:t}]}return e}function eN(e){if(At(e))return Object.entries(e).reduce(function(t,a){var n=Gs(a,2),i=n[0],r=n[1];return[].concat(ql(t),[i],ql(r))},[]).filter(function(t){return Vm(t)||zm(t)}).join(",")}function tN(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function sN(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function Vm(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||e==="application/*"||/\w+\/[-+.\w]+/g.test(e)}function zm(e){return/^.*\.[\w]+$/.test(e)}var aN=["children"],nN=["open"],iN=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],rN=["refKey","onChange","onClick"];function oN(e){return dN(e)||cN(e)||$m(e)||lN()}function lN(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cN(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dN(e){if(Array.isArray(e))return Fi(e)}function Zn(e,t){return pN(e)||mN(e,t)||$m(e,t)||uN()}function uN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $m(e,t){if(e){if(typeof e=="string")return Fi(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Fi(e,t)}}function Fi(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function mN(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n=[],i=!0,r=!1,o,l;try{for(a=a.call(e);!(i=(o=a.next()).done)&&(n.push(o.value),!(t&&n.length===t));i=!0);}catch(c){r=!0,l=c}finally{try{!i&&a.return!=null&&a.return()}finally{if(r)throw l}}return n}}function pN(e){if(Array.isArray(e))return e}function Xl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function ve(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Xl(Object(a),!0).forEach(function(n){Vi(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xl(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Vi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Xa(e,t){if(e==null)return{};var a=hN(e,t),n,i;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function hN(e,t){if(e==null)return{};var a={},n=Object.keys(e),i,r;for(r=0;r<n.length;r++)i=n[r],!(t.indexOf(i)>=0)&&(a[i]=e[i]);return a}var $r=h.forwardRef(function(e,t){var a=e.children,n=Xa(e,aN),i=Um(n),r=i.open,o=Xa(i,nN);return h.useImperativeHandle(t,function(){return{open:r}},[r]),Sp.createElement(h.Fragment,null,a(ve(ve({},o),{},{open:r})))});$r.displayName="Dropzone";var Bm={disabled:!1,getFilesFromEvent:kw,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};$r.defaultProps=Bm;$r.propTypes={children:xe.func,accept:xe.objectOf(xe.arrayOf(xe.string)),multiple:xe.bool,preventDropOnDocument:xe.bool,noClick:xe.bool,noKeyboard:xe.bool,noDrag:xe.bool,noDragEventsBubbling:xe.bool,minSize:xe.number,maxSize:xe.number,maxFiles:xe.number,disabled:xe.bool,getFilesFromEvent:xe.func,onFileDialogCancel:xe.func,onFileDialogOpen:xe.func,useFsAccessApi:xe.bool,autoFocus:xe.bool,onDragEnter:xe.func,onDragLeave:xe.func,onDragOver:xe.func,onDrop:xe.func,onDropAccepted:xe.func,onDropRejected:xe.func,onError:xe.func,validator:xe.func};var zi={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Um(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=ve(ve({},Bm),e),a=t.accept,n=t.disabled,i=t.getFilesFromEvent,r=t.maxSize,o=t.minSize,l=t.multiple,c=t.maxFiles,u=t.onDragEnter,d=t.onDragLeave,m=t.onDragOver,p=t.onDrop,x=t.onDropAccepted,f=t.onDropRejected,v=t.onFileDialogCancel,g=t.onFileDialogOpen,S=t.useFsAccessApi,k=t.autoFocus,C=t.preventDropOnDocument,_=t.noClick,T=t.noKeyboard,V=t.noDrag,N=t.noDragEventsBubbling,y=t.onError,w=t.validator,b=h.useMemo(function(){return eN(a)},[a]),R=h.useMemo(function(){return Qw(a)},[a]),M=h.useMemo(function(){return typeof g=="function"?g:Yl},[g]),j=h.useMemo(function(){return typeof v=="function"?v:Yl},[v]),P=h.useRef(null),D=h.useRef(null),E=h.useReducer(fN,zi),O=Zn(E,2),L=O[0],$=O[1],B=L.isFocused,q=L.isFileDialogActive,A=h.useRef(typeof window<"u"&&window.isSecureContext&&S&&Zw()),Y=function(){!A.current&&q&&setTimeout(function(){if(D.current){var se=D.current.files;se.length||($({type:"closeDialog"}),j())}},300)};h.useEffect(function(){return window.addEventListener("focus",Y,!1),function(){window.removeEventListener("focus",Y,!1)}},[D,q,j,A]);var Q=h.useRef([]),ne=function(se){P.current&&P.current.contains(se.target)||(se.preventDefault(),Q.current=[])};h.useEffect(function(){return C&&(document.addEventListener("dragover",Jl,!1),document.addEventListener("drop",ne,!1)),function(){C&&(document.removeEventListener("dragover",Jl),document.removeEventListener("drop",ne))}},[P,C]),h.useEffect(function(){return!n&&k&&P.current&&P.current.focus(),function(){}},[P,k,n]);var W=h.useCallback(function(K){y?y(K):console.error(K)},[y]),me=h.useCallback(function(K){K.preventDefault(),K.persist(),da(K),Q.current=[].concat(oN(Q.current),[K.target]),va(K)&&Promise.resolve(i(K)).then(function(se){if(!(Ja(K)&&!N)){var Ce=se.length,Ae=Ce>0&&Gw({files:se,accept:b,minSize:o,maxSize:r,multiple:l,maxFiles:c,validator:w}),Ue=Ce>0&&!Ae;$({isDragAccept:Ae,isDragReject:Ue,isDragActive:!0,type:"setDraggedFiles"}),u&&u(K)}}).catch(function(se){return W(se)})},[i,u,W,N,b,o,r,l,c,w]),he=h.useCallback(function(K){K.preventDefault(),K.persist(),da(K);var se=va(K);if(se&&K.dataTransfer)try{K.dataTransfer.dropEffect="copy"}catch{}return se&&m&&m(K),!1},[m,N]),He=h.useCallback(function(K){K.preventDefault(),K.persist(),da(K);var se=Q.current.filter(function(Ae){return P.current&&P.current.contains(Ae)}),Ce=se.indexOf(K.target);Ce!==-1&&se.splice(Ce,1),Q.current=se,!(se.length>0)&&($({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),va(K)&&d&&d(K))},[P,d,N]),et=h.useCallback(function(K,se){var Ce=[],Ae=[];K.forEach(function(Ue){var xs=Im(Ue,b),qt=Zn(xs,2),Nn=qt[0],kn=qt[1],Sn=Fm(Ue,o,r),ua=Zn(Sn,2),Cn=ua[0],Pn=ua[1],Tn=w?w(Ue):null;if(Nn&&Cn&&!Tn)Ce.push(Ue);else{var An=[kn,Pn];Tn&&(An=An.concat(Tn)),Ae.push({file:Ue,errors:An.filter(function(Ym){return Ym})})}}),(!l&&Ce.length>1||l&&c>=1&&Ce.length>c)&&(Ce.forEach(function(Ue){Ae.push({file:Ue,errors:[Kw]})}),Ce.splice(0)),$({acceptedFiles:Ce,fileRejections:Ae,isDragReject:Ae.length>0,type:"setFiles"}),p&&p(Ce,Ae,se),Ae.length>0&&f&&f(Ae,se),Ce.length>0&&x&&x(Ce,se)},[$,l,b,o,r,c,p,x,f,w]),la=h.useCallback(function(K){K.preventDefault(),K.persist(),da(K),Q.current=[],va(K)&&Promise.resolve(i(K)).then(function(se){Ja(K)&&!N||et(se,K)}).catch(function(se){return W(se)}),$({type:"reset"})},[i,et,W,N]),Bt=h.useCallback(function(){if(A.current){$({type:"openDialog"}),M();var K={multiple:l,types:R};window.showOpenFilePicker(K).then(function(se){return i(se)}).then(function(se){et(se,null),$({type:"closeDialog"})}).catch(function(se){tN(se)?(j(se),$({type:"closeDialog"})):sN(se)?(A.current=!1,D.current?(D.current.value=null,D.current.click()):W(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):W(se)});return}D.current&&($({type:"openDialog"}),M(),D.current.value=null,D.current.click())},[$,M,j,S,et,W,R,l]),Br=h.useCallback(function(K){!P.current||!P.current.isEqualNode(K.target)||(K.key===" "||K.key==="Enter"||K.keyCode===32||K.keyCode===13)&&(K.preventDefault(),Bt())},[P,Bt]),Ur=h.useCallback(function(){$({type:"focus"})},[]),qr=h.useCallback(function(){$({type:"blur"})},[]),Hr=h.useCallback(function(){_||(Yw()?setTimeout(Bt,0):Bt())},[_,Bt]),Ut=function(se){return n?null:se},wn=function(se){return T?null:Ut(se)},ca=function(se){return V?null:Ut(se)},da=function(se){N&&se.stopPropagation()},Gm=h.useMemo(function(){return function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},se=K.refKey,Ce=se===void 0?"ref":se,Ae=K.role,Ue=K.onKeyDown,xs=K.onFocus,qt=K.onBlur,Nn=K.onClick,kn=K.onDragEnter,Sn=K.onDragOver,ua=K.onDragLeave,Cn=K.onDrop,Pn=Xa(K,iN);return ve(ve(Vi({onKeyDown:wn(st(Ue,Br)),onFocus:wn(st(xs,Ur)),onBlur:wn(st(qt,qr)),onClick:Ut(st(Nn,Hr)),onDragEnter:ca(st(kn,me)),onDragOver:ca(st(Sn,he)),onDragLeave:ca(st(ua,He)),onDrop:ca(st(Cn,la)),role:typeof Ae=="string"&&Ae!==""?Ae:"presentation"},Ce,P),!n&&!T?{tabIndex:0}:{}),Pn)}},[P,Br,Ur,qr,Hr,me,he,He,la,T,V,n]),Jm=h.useCallback(function(K){K.stopPropagation()},[]),Xm=h.useMemo(function(){return function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},se=K.refKey,Ce=se===void 0?"ref":se,Ae=K.onChange,Ue=K.onClick,xs=Xa(K,rN),qt=Vi({accept:b,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Ut(st(Ae,la)),onClick:Ut(st(Ue,Jm)),tabIndex:-1},Ce,D);return ve(ve({},qt),xs)}},[D,a,l,la,n]);return ve(ve({},L),{},{isFocused:B&&!n,getRootProps:Gm,getInputProps:Xm,rootRef:P,inputRef:D,open:Ut(Bt)})}function fN(e,t){switch(t.type){case"focus":return ve(ve({},e),{},{isFocused:!0});case"blur":return ve(ve({},e),{},{isFocused:!1});case"openDialog":return ve(ve({},zi),{},{isFileDialogActive:!0});case"closeDialog":return ve(ve({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return ve(ve({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return ve(ve({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return ve({},zi);default:return e}}function Yl(){}const xN=({onPhotoSelected:e,currentPhoto:t,className:a=""})=>{const[n,i]=h.useState(!1),{toast:r}=Oe(),o=h.useCallback(async m=>{const p=m[0];if(p){if(!p.type.startsWith("image/")){r({variant:"destructive",title:"Неверный тип файла",description:"Пожалуйста, выберите изображение"});return}if(p.size>10*1024*1024){r({variant:"destructive",title:"Файл слишком большой",description:"Максимальный размер файла - 10MB"});return}i(!0);try{const x=new FormData;x.append("file",p);const{access:f}=Ft(),v={method:"POST",body:x};f&&(v.headers={Authorization:`Bearer ${f}`});const g=await fetch("/api/profile/upload-photo",v);if(!g.ok)throw new Error("Ошибка загрузки файла");const S=await g.json();e(S.photo_url),r({title:"Фото загружено",description:"Ваше фото успешно загружено"})}catch(x){console.error("Ошибка загрузки:",x),r({variant:"destructive",title:"Ошибка загрузки",description:"Не удалось загрузить фото"})}finally{i(!1)}}},[e,r]),{getRootProps:l,getInputProps:c,isDragActive:u}=Um({onDrop:o,accept:{"image/*":[".jpeg",".jpg",".png",".webp"]},maxFiles:1,disabled:n}),d=()=>{e("")};return s.jsxs("div",{className:`space-y-4 ${a}`,children:[s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Ваше фото"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Загрузите свое фото для виртуальной примерки"})]}),t?s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"w-full max-w-sm mx-auto",children:[s.jsx("img",{src:t,alt:"Ваше фото",className:"w-full h-auto max-h-96 object-cover rounded-lg border border-gray-200"}),s.jsx("button",{onClick:d,className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:s.jsx(pn,{size:16})})]}),s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsxs(z,{type:"button",variant:"outline",onClick:()=>{var m;return(m=document.getElementById("photo-input"))==null?void 0:m.click()},className:"w-full",children:[s.jsx(Df,{className:"w-4 h-4 mr-2"}),"Заменить фото"]}),s.jsx("input",{id:"photo-input",type:"file",accept:"image/*",onChange:m=>{var x;const p=(x=m.target.files)==null?void 0:x[0];p&&o([p])},className:"hidden"})]})]}):s.jsxs("div",{...l(),className:`
            border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors
            ${u?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}
            ${n?"opacity-50 cursor-not-allowed":""}
          `,children:[s.jsx("input",{...c()}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:n?s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}):s.jsx(Vs,{className:"w-8 h-8 text-gray-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-base font-medium text-gray-900",children:n?"Загрузка...":"Загрузите свое фото"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:u?"Отпустите файл здесь":"Перетащите файл сюда или нажмите для выбора"})]}),s.jsx("div",{className:"text-xs text-gray-400",children:"Поддерживаются форматы: JPEG, PNG, WebP (до 10MB)"})]})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(es,{className:"w-5 h-5 text-blue-500 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-700",children:[s.jsx("p",{className:"font-medium",children:"Советы для лучшего результата:"}),s.jsxs("ul",{className:"mt-1 space-y-1 text-xs",children:[s.jsx("li",{children:"• Используйте фото в полный рост на светлом фоне"}),s.jsx("li",{children:"• Встаньте прямо, руки по швам"}),s.jsx("li",{children:"• Избегайте слишком широкой или облегающей одежды"}),s.jsx("li",{children:"• Фото должно быть четким и хорошо освещенным"})]})]})]})})]})},gN=()=>{const e=dt(),{toast:t}=Oe(),[a,n]=h.useState({}),[i,r]=h.useState({}),[o,l]=h.useState({}),[c,u]=h.useState(!0),[d,m]=h.useState(!1),[p,x]=h.useState(!1),[f,v]=h.useState(null),[g,S]=h.useState(""),[k,C]=h.useState(""),[_,T]=h.useState(""),[V,N]=h.useState(""),[y,w]=h.useState(""),[b,R]=h.useState([]),M=h.useMemo(()=>{let L=0;return ge.forEach($=>{(o[$.key]||[]).forEach(q=>{typeof q.price=="number"&&(L+=q.price)})}),L},[o]);h.useEffect(()=>{(async()=>{try{const $={},B={},q={};await Promise.all(ge.map(async A=>{const Q=(await Promise.all(A.apiTypes.map(ne=>Vt({category:ne,limit:50})))).flat();$[A.key]=Q,B[A.key]=0,q[A.key]=[]})),n($),r(B),l(q)}catch($){console.error($),t({variant:"destructive",title:"Ошибка",description:"Не удалось загрузить список вещей"})}finally{u(!1)}})()},[t]),h.useEffect(()=>{const L=setTimeout(()=>{(async()=>{if(y.trim().length<2){R([]);return}try{const B=await Vt({q:y.trim(),limit:30});R(B)}catch(B){console.error(B)}})()},400);return()=>clearTimeout(L)},[y]);const j=(L,$)=>{r(B=>{const q=a[L]||[];if(q.length===0)return B;const A=B[L]??0,Y=$==="next"?(A+1)%q.length:(A-1+q.length)%q.length;return{...B,[L]:Y}})},P=L=>{l($=>{var ne;const B=a[L]||[],q=i[L]??0,A=B[q];if(!A)return $;const Q=((ne=$[L])==null?void 0:ne.some(W=>W.id===A.id))??!1?$[L].filter(W=>W.id!==A.id):[...$[L]||[],A];return{...$,[L]:Q}})},D=L=>{const $=ge.find(B=>B.apiTypes.some(q=>q===(L.category||"")));$&&l(B=>{var Y;const A=((Y=B[$.key])==null?void 0:Y.some(Q=>Q.id===L.id))??!1?B[$.key]:[...B[$.key]||[],L];return{...B,[$.key]:A}})},E=async L=>{var $,B,q,A,Y,Q,ne;if(L.preventDefault(),!(!k||!_)){m(!0);try{const W={name:k,style:_,description:V,top_ids:(($=o.top)==null?void 0:$.map(he=>he.id))||[],bottom_ids:((B=o.bottom)==null?void 0:B.map(he=>he.id))||[],footwear_ids:((q=o.footwear)==null?void 0:q.map(he=>he.id))||[],accessories_ids:((A=o.accessory)==null?void 0:A.map(he=>he.id))||[],fragrances_ids:((Y=o.fragrance)==null?void 0:Y.map(he=>he.id))||[],tryon_image_url:f||void 0},me=await zr(W);t({title:"Образ создан",description:"Образ успешно добавлен в коллекцию"}),e(`/outfits/${me.id}`)}catch(W){const me=((ne=(Q=W==null?void 0:W.response)==null?void 0:Q.data)==null?void 0:ne.detail)||"Не удалось создать образ";t({variant:"destructive",title:"Ошибка",description:me})}finally{m(!1)}}},O=async()=>{var $,B;if(!ge.some(q=>(o[q.key]||[]).length>0)){t({variant:"destructive",title:"Нет выбранных предметов",description:"Добавьте хотя бы один предмет для генерации виртуальной примерки."});return}x(!0);try{const q=ge.flatMap(ne=>(o[ne.key]||[]).map(me=>({id:me.id,name:me.name,image_url:me.image_url,category:me.category,price:me.price,brand:me.brand,color:me.color,description:me.description}))),A=ge.reduce((ne,W)=>(ne[W.key]=(o[W.key]||[]).length,ne),{}),Y=Object.entries(A).filter(([ne,W])=>W>0).map(([ne,W])=>{var me;return`${(me=ge.find(he=>he.key===ne))==null?void 0:me.label}: ${W}`}).join(", ");if(t({title:"Начинаем виртуальную примерку",description:`Будет применено по одному предмету из каждой категории: ${Y}`}),!g){t({variant:"destructive",title:"Фото не загружено",description:"Пожалуйста, загрузите свое фото для виртуальной примерки"});return}const Q=await Rj({human_image_url:g,outfit_items:q});Q.success?(v(Q.result_image_url),t({title:"Виртуальная примерка готова",description:"Образ собран из предметов разных категорий"})):t({variant:"destructive",title:"Ошибка генерации",description:Q.message||"Не удалось сгенерировать виртуальную примерку"})}catch(q){console.error(q);const A=((B=($=q==null?void 0:q.response)==null?void 0:$.data)==null?void 0:B.detail)||"Не удалось сгенерировать виртуальную примерку";t({variant:"destructive",title:"Ошибка",description:A})}finally{x(!1)}};return c?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:s.jsx(ue,{className:"h-6 w-6 animate-spin text-black"})}):s.jsx("div",{className:"min-h-screen bg-gray-100 py-8 px-4 sm:px-6 lg:px-8",children:s.jsxs("form",{onSubmit:E,className:"max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-[2fr_1fr] gap-8",children:[s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Создание образа"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Название образа *"}),s.jsx(Z,{value:k,onChange:L=>C(L.target.value),placeholder:"Введите название",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Стиль *"}),s.jsx(Z,{value:_,onChange:L=>T(L.target.value),placeholder:"Кэжуал, деловой, спортивный...",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Описание"}),s.jsx(ot,{value:V,onChange:L=>N(L.target.value),placeholder:"Добавьте описание образа...",rows:4})]})]})]}),s.jsxs("div",{className:"bg-white p-4 rounded-xl border",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(qe,{className:"w-4 h-4 text-muted-foreground"}),s.jsx(Z,{placeholder:"Поиск товара...",value:y,onChange:L=>w(L.target.value),className:"w-full"})]}),s.jsx("div",{className:"space-y-2 max-h-60 overflow-auto",children:b.map(L=>s.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-md",children:[s.jsx("span",{className:"text-sm truncate",children:L.name}),s.jsx(z,{size:"sm",onClick:()=>D(L),children:"Добавить"})]},L.id))})]}),ge.map(L=>{const B=(a[L.key]||[])[i[L.key]],q=o[L.key]||[];return s.jsxs("div",{className:"bg-white p-4 rounded-xl border space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-semibold",children:L.label}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[q.length," выбрано"]})]}),s.jsxs("div",{className:"flex gap-3 items-center",children:[s.jsx(z,{onClick:()=>j(L.key,"prev"),children:"‹"}),s.jsx("div",{className:"flex-1",children:B?s.jsx("div",{className:"text-sm",children:B.name}):s.jsx("div",{className:"text-sm text-muted-foreground",children:"Нет предметов"})}),s.jsx(z,{onClick:()=>j(L.key,"next"),children:"›"}),s.jsx(z,{variant:"outline",onClick:()=>P(L.key),children:B&&q.some(A=>A.id===B.id)?"Убрать":"Добавить"})]}),q.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:q.map(A=>s.jsxs("div",{className:"relative w-10 h-10 border rounded-md",children:[s.jsx("img",{src:A.image_url,alt:A.name,className:"w-full h-full object-cover rounded-md"}),s.jsx("button",{onClick:()=>l(Y=>({...Y,[L.key]:Y[L.key].filter(Q=>Q.id!==A.id)})),className:"absolute -top-1 -right-1 bg-black text-white rounded-full w-4 h-4 text-xs flex items-center justify-center",children:s.jsx(pn,{className:"w-2 h-2"})})]},A.id))})]},L.key)})]}),s.jsxs("div",{className:"sticky top-6 space-y-6",children:[s.jsx("div",{className:"bg-white rounded-2xl border shadow-sm p-4",children:s.jsx(xN,{onPhotoSelected:S,currentPhoto:g,className:""})}),s.jsxs("div",{className:"bg-white rounded-2xl border shadow-sm p-4 flex flex-col items-center",children:[s.jsx("div",{className:"w-full aspect-[3/4] bg-gray-100 rounded overflow-hidden relative",children:f?s.jsx("img",{src:f.startsWith("/")?`${window.location.origin}${f}`:f,className:"object-cover w-full h-full",alt:"Виртуальная примерка",onError:L=>{console.error("Ошибка загрузки изображения виртуальной примерки:",f),L.currentTarget.src="/maneken.jpg"}}):s.jsx("img",{src:"/maneken.jpg",className:"object-cover w-full h-full",alt:"Манекен"})}),s.jsxs("div",{className:"pt-4 text-center space-y-3",children:[s.jsx("div",{className:"text-xs text-muted-foreground",children:"Примерная стоимость"}),s.jsx("div",{className:"text-xl font-bold",children:M>0?`${M.toLocaleString("ru-RU")} ₽`:"—"}),s.jsx(z,{onClick:O,disabled:p||!g,variant:"default",size:"sm",className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white disabled:opacity-50",children:p?s.jsxs(s.Fragment,{children:[s.jsx(ue,{className:"w-4 h-4 animate-spin mr-2"}),"Сборка образа..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Fs,{className:"w-4 h-4 mr-2"}),"Собрать образ"]})}),!g&&s.jsx("div",{className:"text-xs text-muted-foreground text-center",children:"Загрузите фото для активации"}),!ge.some(L=>(o[L.key]||[]).length>0)&&g&&s.jsx("div",{className:"text-xs text-muted-foreground text-center",children:"Добавьте предметы для активации"}),ge.some(L=>(o[L.key]||[]).length>0)&&g&&s.jsx("div",{className:"text-xs text-muted-foreground text-center",children:"Будет применено по одному предмету из каждой категории"})]})]}),s.jsx(z,{type:"submit",disabled:d,className:"w-full uppercase tracking-wide text-sm",children:d?s.jsxs(s.Fragment,{children:[s.jsx(ue,{className:"w-4 h-4 animate-spin mr-2"}),"Сохранение..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ds,{className:"w-4 h-4 mr-2"}),"Создать образ"]})})]})]})})},yN={top:"top_ids",bottom:"bottom_ids",footwear:"footwear_ids",accessory:"accessories_ids",fragrance:"fragrances_ids"},vN=()=>{const{id:e}=kt(),t=dt(),{toast:a}=Oe(),[n,i]=h.useState({}),[r,o]=h.useState({}),[l,c]=h.useState({}),[u,d]=h.useState(!0),[m,p]=h.useState(!1),[x,f]=h.useState(""),[v,g]=h.useState(""),[S,k]=h.useState(""),[C,_]=h.useState(""),[T,V]=h.useState([]),N=h.useMemo(()=>{let M=0;return ge.forEach(j=>{(l[j.key]||[]).forEach(D=>{typeof D.price=="number"&&(M+=D.price)})}),M},[l]);h.useEffect(()=>{(async()=>{if(e)try{const j={},P={};await Promise.all(ge.map(async O=>{const $=(await Promise.all(O.apiTypes.map(B=>Vt({category:B,limit:50})))).flat();j[O.key]=$,P[O.key]=0}));const D=await Tm(Number(e));f(D.name),g(D.style),k(D.description??"");const E={};await Promise.all(ge.map(async O=>{const L=D[O.key];if(!L||L.length===0){E[O.key]=[];return}const $=await Promise.all(L.map(async q=>{try{return await ud(q.id)}catch{return{id:q.id,name:q.name,image_url:q.image_url}}}));E[O.key]=$;const B=new Set(j[O.key].map(q=>q.id));$.forEach(q=>{B.has(q.id)||j[O.key].unshift(q)})})),i(j),o(P),c(E)}catch(j){console.error(j),a({variant:"destructive",title:"Ошибка",description:"Не удалось загрузить данные образа"})}finally{d(!1)}})()},[e,a]),h.useEffect(()=>{const M=setTimeout(()=>{(async()=>{if(C.trim().length<2){V([]);return}try{const P=await Vt({q:C.trim(),limit:30});V(P)}catch(P){console.error(P)}})()},400);return()=>clearTimeout(M)},[C]);const y=(M,j)=>{o(P=>{const D=n[M]||[];if(D.length===0)return P;const E=P[M]??0,O=j==="next"?(E+1)%D.length:(E-1+D.length)%D.length;return{...P,[M]:O}})},w=M=>{c(j=>{var $;const P=n[M]||[],D=r[M]??0,E=P[D];if(!E)return j;const L=(($=j[M])==null?void 0:$.some(B=>B.id===E.id))??!1?j[M].filter(B=>B.id!==E.id):[...j[M]||[],E];return{...j,[M]:L}})},b=M=>{const j=ge.find(P=>P.apiTypes.some(D=>D===(M.category||"")));j&&c(P=>{var O;const E=((O=P[j.key])==null?void 0:O.some(L=>L.id===M.id))??!1?P[j.key]:[...P[j.key]||[],M];return{...P,[j.key]:E}})},R=async M=>{var P,D;if(M.preventDefault(),!e)return;if(!x.trim()||!v.trim()){a({variant:"destructive",title:"Заполните обязательные поля"});return}if(!ge.some(E=>(l[E.key]||[]).length>0)){a({variant:"destructive",title:"Пустой образ",description:"Добавьте хотя бы один предмет"});return}p(!0);try{const E={name:x,style:v,description:S||void 0};ge.forEach(O=>{const L=l[O.key]||[];E[yN[O.key]]=L.map($=>$.id)}),await Am(Number(e),E),a({title:"Образ обновлен",description:"Возвращаемся на страницу образа"}),t(`/outfits/${e}`)}catch(E){console.error(E);const O=((D=(P=E==null?void 0:E.response)==null?void 0:P.data)==null?void 0:D.detail)||"Не удалось обновить образ";a({variant:"destructive",title:"Ошибка",description:O})}finally{p(!1)}};return u?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:s.jsx(ue,{className:"h-6 w-6 animate-spin text-black"})}):s.jsx("div",{className:"min-h-screen bg-gray-100 py-8 px-4 sm:px-6 lg:px-8",children:s.jsxs("form",{onSubmit:R,className:"max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-[2fr_1fr] gap-8",children:[s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Редактирование образа"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Название образа *"}),s.jsx(Z,{value:x,onChange:M=>f(M.target.value),placeholder:"Введите название",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Стиль *"}),s.jsx(Z,{value:v,onChange:M=>g(M.target.value),placeholder:"Кэжуал, деловой, спортивный...",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Описание"}),s.jsx(ot,{value:S,onChange:M=>k(M.target.value),placeholder:"Добавьте описание образа...",rows:4})]})]})]}),s.jsxs("div",{className:"bg-white p-4 rounded-xl border",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(qe,{className:"w-4 h-4 text-muted-foreground"}),s.jsx(Z,{placeholder:"Поиск товара...",value:C,onChange:M=>_(M.target.value),className:"w-full"})]}),s.jsx("div",{className:"space-y-2 max-h-60 overflow-auto",children:T.map(M=>s.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-md",children:[s.jsx("span",{className:"text-sm truncate",children:M.name}),s.jsx(z,{size:"sm",onClick:()=>b(M),children:"Добавить"})]},M.id))})]}),ge.map(M=>{const P=(n[M.key]||[])[r[M.key]],D=l[M.key]||[];return s.jsxs("div",{className:"bg-white p-4 rounded-xl border space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-semibold",children:M.label}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[D.length," выбрано"]})]}),s.jsxs("div",{className:"flex gap-3 items-center",children:[s.jsx(z,{onClick:()=>y(M.key,"prev"),children:"‹"}),s.jsx("div",{className:"flex-1",children:P?s.jsx("div",{className:"text-sm",children:P.name}):s.jsx("div",{className:"text-sm text-muted-foreground",children:"Нет предметов"})}),s.jsx(z,{onClick:()=>y(M.key,"next"),children:"›"}),s.jsx(z,{variant:"outline",onClick:()=>w(M.key),children:P&&D.some(E=>E.id===P.id)?"Убрать":"Добавить"})]}),D.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:D.map(E=>s.jsxs("div",{className:"relative w-10 h-10 border rounded-md",children:[s.jsx("img",{src:E.image_url,alt:E.name,className:"w-full h-full object-cover rounded-md"}),s.jsx("button",{onClick:()=>c(O=>({...O,[M.key]:O[M.key].filter(L=>L.id!==E.id)})),className:"absolute -top-1 -right-1 bg-black text-white rounded-full w-4 h-4 text-xs flex items-center justify-center",children:s.jsx(pn,{className:"w-2 h-2"})})]},E.id))})]},M.key)})]}),s.jsxs("div",{className:"sticky top-6 space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-2xl border shadow-sm p-4 flex flex-col items-center",children:[s.jsxs("div",{className:"w-full aspect-[3/4] bg-gray-100 rounded overflow-hidden relative",children:[s.jsx("img",{src:"/maneken.jpg",className:"object-cover w-full h-full",alt:"Манекен"}),ge.flatMap((M,j)=>(l[M.key]||[]).map((D,E)=>D.image_url?s.jsx("img",{src:D.image_url,alt:D.name,className:"absolute inset-0 w-full h-full object-cover",style:{zIndex:j+E+1}},`${M.key}-${D.id}`):null))]}),s.jsxs("div",{className:"pt-4 text-center",children:[s.jsx("div",{className:"text-xs text-muted-foreground",children:"Примерная стоимость"}),s.jsx("div",{className:"text-xl font-bold",children:N>0?`${N.toLocaleString("ru-RU")} ₽`:"—"})]})]}),s.jsx(z,{type:"submit",disabled:m,className:"w-full uppercase tracking-wide text-sm",children:m?s.jsxs(s.Fragment,{children:[s.jsx(ue,{className:"w-4 h-4 animate-spin mr-2"}),"Сохранение..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ds,{className:"w-4 h-4 mr-2"}),"Сохранить изменения"]})})]})]})})},bN=async e=>(await U.post("/api/catalog/parse",e)).data,Zl=async(e,t=10,a="kz",n)=>{let i=`/api/catalog/parse-simple?query=${encodeURIComponent(e)}&limit=${t}&domain=${a}`;return n!==void 0&&(i+=`&page=${n}`),(await U.post(i)).data},jN=async()=>(await U.post("/api/catalog/test-chain")).data,wN=async(e="jeans",t=5,a="kz")=>(await U.post(`/api/catalog/test-parser?query=${encodeURIComponent(e)}&limit=${t}&domain=${a}`)).data,qm=async e=>(await U.get(`/api/catalog/tasks/${e}/status`)).data,NN=async e=>{await U.delete(`/api/catalog/tasks/${e}`)},kN=async()=>(await U.get("/api/catalog/tasks")).data,Hm=async()=>(await U.get("/api/catalog/stats")).data,Ql=async e=>(await U.get(`/api/catalog/tasks/${e}/result`)).data,ec=async(e,t,a=2e3,n=3e5)=>{const i=Date.now();for(;Date.now()-i<n;){const r=await qm(e);if(t&&t(r),r.state==="SUCCESS"||r.state==="FAILURE")return r;await new Promise(o=>setTimeout(o,a))}throw new Error("Task timeout")},SN=async()=>{try{return await Hm(),!0}catch(e){return console.error("Parsing system health check failed:",e),!1}},CN=()=>{const[e,t]=h.useState(""),[a,n]=h.useState(20),[i,r]=h.useState("kz"),[o,l]=h.useState(null),[c,u]=h.useState([]),[d,m]=h.useState([]),[p,x]=h.useState(null),[f,v]=h.useState("parser"),[g,S]=h.useState(!1),[k,C]=h.useState(1),[_,T]=h.useState(1),[V,N]=h.useState([]),[y,w]=h.useState(!1),{toast:b}=Oe(),R=h.useRef();h.useEffect(()=>(M(),j(),P(),R.current=setInterval(()=>{D(),P()},3e3),()=>{R.current&&clearInterval(R.current)}),[]);const M=async()=>{const A=await SN();l(A),A||b({variant:"destructive",title:"Система парсинга недоступна",description:"Проверьте состояние backend сервиса"})},j=async()=>{try{const A=await Hm();x(A)}catch(A){console.error("Failed to load catalog stats:",A)}},P=async()=>{try{const A=await kN();m(A)}catch(A){console.error("Failed to load active tasks:",A)}},D=async()=>{const A=await Promise.all(c.map(async ne=>{try{const W=await qm(ne.id);return{...ne,status:W}}catch(W){return console.error(`Failed to update task ${ne.id}:`,W),ne}}));u(A);const Y=new Date,Q=A.filter(ne=>ne.status.state==="SUCCESS"||ne.status.state==="FAILURE"?Y.getTime()-ne.startTime.getTime()<3e4:!0);Q.length!==A.length&&u(Q)},E=async A=>{if(!e.trim()&&A!=="test"&&A!=="test-parser"){b({variant:"destructive",title:"Ошибка",description:"Введите поисковый запрос"});return}S(!0);try{let Y;switch(A){case"full":Y=await bN({query:e.trim(),limit:a,domain:i});break;case"simple":Y=await Zl(e.trim(),a,i);break;case"test":Y=await jN();break;case"test-parser":Y=await wN(e.trim()||"jeans",a,i);break}const Q={id:Y.task_id,query:A==="test"?"Test Chain":A==="test-parser"?`Test Parser: ${e.trim()||"jeans"}`:e.trim(),domain:i,limit:a,type:A,status:{task_id:Y.task_id,state:"PENDING"},startTime:new Date};u(ne=>[...ne,Q]),b({title:"Парсинг запущен",description:`Задача ${Y.task_id} добавлена в очередь`,className:"border-0 bg-blue-500 text-white shadow-lg"}),ec(Y.task_id,ne=>{u(W=>W.map(me=>me.id===Y.task_id?{...me,status:ne}:me))}).then(async ne=>{if(ne.state==="SUCCESS"){try{const W=await Ql(Y.task_id);u(me=>me.map(he=>he.id===Y.task_id?{...he,result:W}:he))}catch(W){console.error("Failed to get task result:",W)}b({title:"Парсинг завершен",description:`Задача ${Y.task_id} выполнена успешно`,className:"border-0 bg-green-500 text-white shadow-lg"}),j()}else b({variant:"destructive",title:"Ошибка парсинга",description:`Задача ${Y.task_id} завершилась с ошибкой`})}).catch(ne=>{console.error("Task monitoring error:",ne)})}catch(Y){b({variant:"destructive",title:"Ошибка запуска",description:Y.message||"Не удалось запустить парсинг"})}finally{S(!1)}},O=async()=>{if(!e.trim()||k<1||_<k){b({variant:"destructive",title:"Ошибка",description:"Проверьте поисковый запрос и диапазон страниц"});return}w(!0),N([]);const A=[];for(let Y=k;Y<=_;Y++)try{const Q=await Zl(e.trim(),a,i,Y),ne={id:Q.task_id,query:`${e.trim()} (стр. ${Y})`,domain:i,limit:a,type:"page",status:{task_id:Q.task_id,state:"PENDING"},startTime:new Date};A.push(ne),ec(Q.task_id,W=>{N(me=>me.map(he=>he.id===Q.task_id?{...he,status:W}:he))}).then(async W=>{if(W.state==="SUCCESS")try{const me=await Ql(Q.task_id);N(he=>he.map(He=>He.id===Q.task_id?{...He,result:me}:He))}catch{}})}catch(Q){b({variant:"destructive",title:`Ошибка запуска (стр. ${Y})`,description:Q.message||"Не удалось запустить парсинг"})}N(A),w(!1)},L=async A=>{try{await NN(A),u(Y=>Y.filter(Q=>Q.id!==A)),b({title:"Задача отменена",description:`Задача ${A} была остановлена`,className:"border-0 bg-yellow-500 text-white shadow-lg"})}catch(Y){b({variant:"destructive",title:"Ошибка отмены",description:Y.message||"Не удалось отменить задачу"})}},$=A=>{switch(A){case"PENDING":return s.jsx(Ma,{className:"h-4 w-4 text-yellow-500"});case"PROGRESS":return s.jsx(ue,{className:"h-4 w-4 text-blue-500 animate-spin"});case"SUCCESS":return s.jsx(Ss,{className:"h-4 w-4 text-green-500"});case"FAILURE":return s.jsx(Da,{className:"h-4 w-4 text-red-500"});default:return s.jsx(Kf,{className:"h-4 w-4 text-gray-500"})}},B=A=>{switch(A){case"PENDING":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"PROGRESS":return"bg-blue-100 text-blue-800 border-blue-200";case"SUCCESS":return"bg-green-100 text-green-800 border-green-200";case"FAILURE":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},q=A=>{const Q=Math.floor((new Date().getTime()-A.getTime())/1e3);return Q<60?`${Q}с`:Q<3600?`${Math.floor(Q/60)}м ${Q%60}с`:`${Math.floor(Q/3600)}ч ${Math.floor(Q%3600/60)}м`};return s.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight text-foreground",children:"🚀 Парсер товаров"}),s.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Автоматизированный импорт товаров из каталога Lamoda с ИИ обработкой"})]}),s.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[s.jsx(le,{variant:o===!0?"default":o===!1?"destructive":"secondary",className:"flex items-center gap-1 text-xs sm:text-sm",children:o===!0?s.jsxs(s.Fragment,{children:[s.jsx(Ss,{className:"h-3 w-3"}),s.jsx("span",{className:"hidden sm:inline",children:"Система готова"}),s.jsx("span",{className:"sm:hidden",children:"Готов"})]}):o===!1?s.jsxs(s.Fragment,{children:[s.jsx(Da,{className:"h-3 w-3"}),s.jsx("span",{className:"hidden sm:inline",children:"Система недоступна"}),s.jsx("span",{className:"sm:hidden",children:"Ошибка"})]}):s.jsxs(s.Fragment,{children:[s.jsx(ue,{className:"h-3 w-3 animate-spin"}),s.jsx("span",{className:"hidden sm:inline",children:"Проверка..."}),s.jsx("span",{className:"sm:hidden",children:"Проверка"})]})}),s.jsx(z,{variant:"outline",size:"sm",onClick:()=>{M(),j(),P()},children:s.jsx(er,{className:"h-4 w-4"})})]})]}),p&&s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4",children:[s.jsx(J,{children:s.jsx(X,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Всего товаров"}),s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:p.total_items.toLocaleString()})]}),s.jsx(jt,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-500"})]})})}),s.jsx(J,{children:s.jsx(X,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"За неделю"}),s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:p.recent_items_week.toLocaleString()})]}),s.jsx(Ia,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500"})]})})}),s.jsx(J,{children:s.jsx(X,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Ср. цена"}),s.jsxs("p",{className:"text-lg sm:text-2xl font-bold",children:[Math.round(p.price_range.average).toLocaleString(),"₸"]})]}),s.jsx(La,{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-500"})]})})}),s.jsx(J,{children:s.jsx(X,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Активных задач"}),s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:d.length})]}),s.jsx(Ps,{className:"h-6 w-6 sm:h-8 sm:w-8 text-orange-500"})]})})})]}),s.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap space-y-1 sm:space-y-0 sm:space-x-1 bg-muted p-1 rounded-lg",children:[s.jsxs("button",{onClick:()=>v("parser"),className:te("flex-1 px-2 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-md transition-colors",f==="parser"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[s.jsx("span",{className:"hidden sm:inline",children:"Парсер"}),s.jsx("span",{className:"sm:hidden",children:"Парсер"})]}),s.jsxs("button",{onClick:()=>v("pages"),className:te("flex-1 px-2 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-md transition-colors",f==="pages"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[s.jsx("span",{className:"hidden sm:inline",children:"Парсинг по страницам"}),s.jsx("span",{className:"sm:hidden",children:"Страницы"})]}),s.jsxs("button",{onClick:()=>v("tasks"),className:te("flex-1 px-2 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-md transition-colors",f==="tasks"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[s.jsxs("span",{className:"hidden sm:inline",children:["Задачи (",d.length,")"]}),s.jsx("span",{className:"sm:hidden",children:"Задачи"})]}),s.jsxs("button",{onClick:()=>v("analytics"),className:te("flex-1 px-2 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-md transition-colors",f==="analytics"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[s.jsx("span",{className:"hidden sm:inline",children:"Аналитика"}),s.jsx("span",{className:"sm:hidden",children:"Аналитика"})]})]}),f==="parser"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs(J,{children:[s.jsxs(pe,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(qe,{className:"h-5 w-5"}),"Новый парсинг"]}),s.jsx(Re,{children:"Настройте параметры парсинга и запустите извлечение товаров из Lamoda"})]}),s.jsxs(X,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"query",children:"Поисковый запрос"}),s.jsx(Z,{id:"query",placeholder:"nike кроссовки, платье, джинсы...",value:e,onChange:A=>t(A.target.value),disabled:g})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"domain",children:"Домен"}),s.jsxs(ht,{value:i,onValueChange:A=>r(A),children:[s.jsx(lt,{children:s.jsx(ft,{})}),s.jsxs(ct,{children:[s.jsx(Ne,{value:"kz",children:"🇰🇿 Казахстан (lamoda.kz)"}),s.jsx(Ne,{value:"ru",children:"🇷🇺 Россия (lamoda.ru)"}),s.jsx(Ne,{value:"by",children:"🇧🇾 Беларусь (lamoda.by)"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"limit",children:"Количество товаров"}),s.jsx(Z,{id:"limit",type:"number",min:"1",max:"100",value:a,onChange:A=>n(Number(A.target.value)),disabled:g})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap gap-3 pt-4",children:[s.jsxs(z,{onClick:()=>E("full"),disabled:g||!o,className:"flex items-center gap-2 w-full sm:w-auto",children:[s.jsx(ci,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:g?"Запуск...":"Полный парсинг + ИИ + БД"}),s.jsx("span",{className:"sm:hidden",children:g?"Запуск...":"Полный парсинг"})]}),s.jsxs(z,{variant:"outline",onClick:()=>E("simple"),disabled:g||!o,className:"flex items-center gap-2 w-full sm:w-auto",children:[s.jsx(qe,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Только парсинг"}),s.jsx("span",{className:"sm:hidden",children:"Парсинг"})]}),s.jsxs(z,{variant:"secondary",onClick:()=>E("test"),disabled:g||!o,className:"flex items-center gap-2 w-full sm:w-auto",children:[s.jsx($f,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Тест системы"}),s.jsx("span",{className:"sm:hidden",children:"Тест"})]}),s.jsxs(z,{variant:"outline",onClick:()=>E("test-parser"),disabled:g||!o,className:"flex items-center gap-2 w-full sm:w-auto",children:[s.jsx(Ps,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Тест парсера"}),s.jsx("span",{className:"sm:hidden",children:"Тест парсера"})]})]}),s.jsx("div",{className:"rounded-lg bg-blue-50 p-4 dark:bg-blue-950/20",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(bd,{className:"h-5 w-5 text-blue-500 mt-0.5"}),s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Режимы парсинга:"}),s.jsxs("ul",{className:"mt-1 space-y-1 text-blue-700 dark:text-blue-300",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Полный парсинг:"})," Парсинг → ИИ обработка → Сохранение в БД"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Только парсинг:"})," Извлечение данных без сохранения"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Тест системы:"})," Проверка работоспособности с минимальными данными"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Тест парсера:"})," Проверка извлечения изображений с Lamoda"]})]})]})]})})]})]}),c.length>0&&s.jsxs(J,{children:[s.jsx(pe,{children:s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(ue,{className:"h-5 w-5 animate-spin"}),"Выполняющиеся задачи (",c.length,")"]})}),s.jsx(X,{children:s.jsx("div",{className:"space-y-4",children:c.map(A=>{var Y,Q,ne;return s.jsxs(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"border rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[$(A.status.state),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"font-medium text-sm sm:text-base truncate",children:A.query}),s.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:[A.domain.toUpperCase()," • ",A.limit," товаров • ",q(A.startTime)]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(le,{className:te("text-xs",B(A.status.state)),children:A.status.state}),(A.status.state==="PENDING"||A.status.state==="PROGRESS")&&s.jsx(z,{variant:"outline",size:"sm",onClick:()=>L(A.id),children:s.jsx(qf,{className:"h-3 w-3"})})]})]}),((Y=A.status.meta)==null?void 0:Y.status)&&s.jsx("p",{className:"text-sm text-muted-foreground",children:A.status.meta.status}),((Q=A.status.meta)==null?void 0:Q.progress)!==void 0&&s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 dark:bg-gray-700",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${A.status.meta.progress}%`}})}),A.status.state==="SUCCESS"&&A.status.result&&s.jsxs("div",{className:"text-sm text-green-600 dark:text-green-400",children:["✅ Обработано: ",A.status.result.success_count||0," товаров"]}),A.status.state==="SUCCESS"&&((ne=A.result)==null?void 0:ne.result)&&s.jsxs("div",{className:"mt-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"font-medium text-green-600",children:"Результаты парсинга"}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsxs("span",{children:["Качество: ",(A.result.result.quality_score*100).toFixed(0),"%"]}),s.jsx("span",{children:"•"}),s.jsxs("span",{children:["Время: ",A.result.result.parsing_time.toFixed(1),"с"]})]})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 max-h-96 overflow-y-auto",children:A.result.result.products.slice(0,6).map((W,me)=>s.jsxs("div",{className:"border rounded-lg p-2 sm:p-3 space-y-2 bg-white dark:bg-gray-800",children:[s.jsxs("div",{className:"aspect-square w-full bg-gray-100 dark:bg-gray-700 rounded-md overflow-hidden",children:[W.image_url?s.jsx("img",{src:`/api/catalog/image-proxy?url=${encodeURIComponent(W.image_url)}`,alt:W.name,className:"w-full h-full object-cover",onError:he=>{var et;const He=he.target;He.style.display="none",(et=He.nextElementSibling)==null||et.classList.remove("hidden")}}):null,s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs sm:text-sm hidden",children:"Нет изображения"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-medium text-xs sm:text-sm line-clamp-2",title:W.name,children:W.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:W.brand}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"font-semibold text-xs sm:text-sm",children:[W.price.toLocaleString(),"₸"]}),W.old_price&&W.old_price>W.price&&s.jsxs("span",{className:"text-xs text-red-500 line-through",children:[W.old_price.toLocaleString(),"₸"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Качество:"}),s.jsxs("span",{className:"text-xs font-medium text-green-600",children:[(W.parse_quality*100).toFixed(0),"%"]})]}),W.image_urls&&W.image_urls.length>1&&s.jsxs("p",{className:"text-xs text-blue-600",children:["+",W.image_urls.length-1," изображений"]})]})]},me))}),A.result.result.products.length>6&&s.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["И еще ",A.result.result.products.length-6," товаров..."]})]}),A.status.state==="FAILURE"&&s.jsxs("div",{className:"text-sm text-red-600 dark:text-red-400",children:["❌ Ошибка: ",A.status.traceback||"Неизвестная ошибка"]})]},A.id)})})})]})]}),f==="pages"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs(J,{children:[s.jsxs(pe,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(ci,{className:"h-5 w-5"}),"Парсинг по страницам Lamoda"]}),s.jsx(Re,{children:"Укажите диапазон страниц и получите максимум уникальных товаров с Lamoda. Каждый запуск — новые уникальные товары!"})]}),s.jsxs(X,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"query-pages",children:"Поисковый запрос"}),s.jsx(Z,{id:"query-pages",placeholder:"nike кроссовки, платье, джинсы...",value:e,onChange:A=>t(A.target.value),disabled:y})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"domain-pages",children:"Домен"}),s.jsxs(ht,{value:i,onValueChange:A=>r(A),children:[s.jsx(lt,{children:s.jsx(ft,{})}),s.jsxs(ct,{children:[s.jsx(Ne,{value:"kz",children:"🇰🇿 Казахстан (lamoda.kz)"}),s.jsx(Ne,{value:"ru",children:"🇷🇺 Россия (lamoda.ru)"}),s.jsx(Ne,{value:"by",children:"🇧🇾 Беларусь (lamoda.by)"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"limit-pages",children:"Товаров на страницу"}),s.jsx(Z,{id:"limit-pages",type:"number",min:"1",max:"100",value:a,onChange:A=>n(Number(A.target.value)),disabled:y})]}),s.jsxs("div",{className:"flex gap-2 items-end",children:[s.jsxs("div",{className:"space-y-2 flex-1",children:[s.jsx(ee,{htmlFor:"page-from",children:"Страница с"}),s.jsx(Z,{id:"page-from",type:"number",min:"1",value:k,onChange:A=>C(Number(A.target.value)),disabled:y})]}),s.jsxs("div",{className:"space-y-2 flex-1",children:[s.jsx(ee,{htmlFor:"page-to",children:"по"}),s.jsx(Z,{id:"page-to",type:"number",min:k,value:_,onChange:A=>T(Number(A.target.value)),disabled:y})]})]})]}),s.jsx("div",{className:"pt-4",children:s.jsxs(z,{onClick:O,disabled:y||!o,className:"flex items-center gap-2",children:[s.jsx(Ps,{className:"h-4 w-4"}),y?"Запуск...":"Парсить диапазон страниц"]})})]})]}),V.length>0&&s.jsxs(J,{children:[s.jsx(pe,{children:s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(ue,{className:"h-5 w-5 animate-spin"}),"Прогресс по страницам (",V.length,")"]})}),s.jsx(X,{children:s.jsx("div",{className:"space-y-4",children:V.map(A=>{var Y,Q,ne;return s.jsxs(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"border rounded-lg p-4 space-y-3 bg-gradient-to-br from-blue-50 to-purple-50",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[$(A.status.state),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"font-medium text-sm sm:text-base truncate",children:A.query}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[A.domain.toUpperCase()," • ",A.limit," товаров"]})]})]}),s.jsx(le,{className:te("text-xs",B(A.status.state)),children:A.status.state})]}),((Y=A.status.meta)==null?void 0:Y.status)&&s.jsx("p",{className:"text-sm text-muted-foreground",children:A.status.meta.status}),((Q=A.status.meta)==null?void 0:Q.progress)!==void 0&&s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 dark:bg-gray-700",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${A.status.meta.progress}%`}})}),A.status.state==="SUCCESS"&&((ne=A.result)==null?void 0:ne.result)&&s.jsxs("div",{className:"mt-2 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-green-700 text-sm",children:[s.jsx(Ss,{className:"h-4 w-4"}),s.jsxs("span",{children:["Уникальных товаров: ",A.result.result.success_count]}),s.jsxs("span",{className:"text-muted-foreground",children:["/ Всего: ",A.result.result.total_found]})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 max-h-80 overflow-y-auto",children:A.result.result.products.slice(0,6).map((W,me)=>s.jsxs("div",{className:"border rounded-lg p-2 sm:p-3 space-y-2 bg-white dark:bg-gray-800",children:[s.jsxs("div",{className:"aspect-square w-full bg-gray-100 dark:bg-gray-700 rounded-md overflow-hidden",children:[W.image_url?s.jsx("img",{src:`/api/catalog/image-proxy?url=${encodeURIComponent(W.image_url)}`,alt:W.name,className:"w-full h-full object-cover",onError:he=>{var et;const He=he.target;He.style.display="none",(et=He.nextElementSibling)==null||et.classList.remove("hidden")}}):null,s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs sm:text-sm hidden",children:"Нет изображения"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-medium text-xs sm:text-sm line-clamp-2",title:W.name,children:W.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:W.brand}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"font-semibold text-xs sm:text-sm",children:[W.price.toLocaleString(),"₸"]}),W.old_price&&W.old_price>W.price&&s.jsxs("span",{className:"text-xs text-red-500 line-through",children:[W.price.toLocaleString(),"₸"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Качество:"}),s.jsxs("span",{className:"text-xs font-medium text-green-600",children:[(W.parse_quality*100).toFixed(0),"%"]})]}),W.image_urls&&W.image_urls.length>1&&s.jsxs("p",{className:"text-xs text-blue-600",children:["+",W.image_urls.length-1," изображений"]})]})]},me))}),A.result.result.products.length>6&&s.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["И еще ",A.result.result.products.length-6," товаров..."]})]}),A.status.state==="FAILURE"&&s.jsxs("div",{className:"text-sm text-red-600 dark:text-red-400",children:["❌ Ошибка: ",A.status.traceback||"Неизвестная ошибка"]})]},A.id)})})})]})]}),f==="tasks"&&s.jsxs(J,{children:[s.jsxs(pe,{children:[s.jsxs(fe,{className:"flex items-center gap-2",children:[s.jsx(di,{className:"h-5 w-5"}),"Активные задачи системы"]}),s.jsx(Re,{children:"Список всех выполняющихся задач в Celery"})]}),s.jsx(X,{children:d.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(jt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Нет активных задач"})]}):s.jsx("div",{className:"space-y-3",children:d.map(A=>s.jsx("div",{className:"border rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:A.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Worker: ",A.worker," • Started: ",new Date(A.time_start).toLocaleString()]}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["ID: ",A.task_id]})]}),s.jsx(le,{variant:"outline",children:"Выполняется"})]})},A.task_id))})})]}),f==="analytics"&&p&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[s.jsxs(J,{children:[s.jsxs(pe,{children:[s.jsx(fe,{className:"text-lg sm:text-xl",children:"Топ брендов"}),s.jsx(Re,{className:"text-sm",children:"Самые популярные бренды в каталоге"})]}),s.jsx(X,{children:s.jsx("div",{className:"space-y-3",children:p.top_brands.slice(0,5).map((A,Y)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 rounded-full bg-primary/20 flex items-center justify-center text-xs font-medium flex-shrink-0",children:Y+1}),s.jsx("span",{className:"font-medium text-sm sm:text-base truncate",children:A.brand})]}),s.jsx(le,{variant:"outline",className:"text-xs sm:text-sm flex-shrink-0",children:A.count.toLocaleString()})]},A.brand))})})]}),s.jsxs(J,{children:[s.jsxs(pe,{children:[s.jsx(fe,{className:"text-lg sm:text-xl",children:"Топ категорий"}),s.jsx(Re,{className:"text-sm",children:"Самые популярные категории товаров"})]}),s.jsx(X,{children:s.jsx("div",{className:"space-y-3",children:p.top_categories.slice(0,5).map((A,Y)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 rounded-full bg-green-500/20 flex items-center justify-center text-xs font-medium flex-shrink-0",children:Y+1}),s.jsx("span",{className:"font-medium text-sm sm:text-base truncate",children:A.category})]}),s.jsx(le,{variant:"outline",className:"text-xs sm:text-sm flex-shrink-0",children:A.count.toLocaleString()})]},A.category))})})]})]}),s.jsxs(J,{children:[s.jsxs(pe,{children:[s.jsx(fe,{className:"text-lg sm:text-xl",children:"Ценовой диапазон"}),s.jsx(Re,{className:"text-sm",children:"Статистика по ценам товаров в каталоге"})]}),s.jsx(X,{children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-green-600",children:[Math.round(p.price_range.min).toLocaleString(),"₸"]}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Минимальная цена"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:[Math.round(p.price_range.average).toLocaleString(),"₸"]}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Средняя цена"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-purple-600",children:[Math.round(p.price_range.max).toLocaleString(),"₸"]}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Максимальная цена"})]})]})})]})]})]})},Ya={getShops:async()=>(await U.get("/api/users/moderators")).data,getShopItems:async(e,t=1,a=20,n)=>{const i=new URLSearchParams({page:t.toString(),moderator_id:e.toString()});n&&Object.entries(n).forEach(([o,l])=>{l!=null&&l!==""&&i.append(o,l.toString())});const r=await U.get(`/api/items/?${i}`);return{items:r.data,total:r.headers["x-total-count"]?parseInt(r.headers["x-total-count"]):r.data.length,page:t,limit:a}},getShop:async e=>(await U.get(`/api/users/${e}`)).data},PN=()=>{const[e,t]=h.useState([]),[a,n]=h.useState(!0),[i,r]=h.useState(""),o=async d=>{const m=await Ya.getShops();return d&&d.trim()?m.filter(p=>p.name.toLowerCase().includes(d.toLowerCase())||p.moderator_name.toLowerCase().includes(d.toLowerCase())):m};h.useEffect(()=>{(async()=>{n(!0);try{const m=await o(i);t(m)}catch(m){console.error("Error fetching shops:",m)}finally{n(!1)}})()},[i]);const l=d=>{d.preventDefault()},c={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return a?s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx(ce,{className:"h-9 w-48 mb-4"}),s.jsx(ce,{className:"h-5 w-96"})]}),s.jsx("div",{className:"mb-8",children:s.jsx(ce,{className:"h-10 w-full max-w-md"})}),s.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((d,m)=>s.jsxs(J,{className:"overflow-hidden",children:[s.jsx("div",{className:"aspect-[4/3] animate-pulse bg-muted"}),s.jsx(X,{className:"p-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-5 w-2/3 animate-pulse rounded bg-muted"}),s.jsx("div",{className:"h-4 w-1/2 animate-pulse rounded bg-muted"}),s.jsx("div",{className:"h-4 w-1/3 animate-pulse rounded bg-muted"})]})})]},m))})]}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8",children:[s.jsx("h1",{className:"mb-4 font-display text-3xl font-bold tracking-tight",children:"Магазины"}),s.jsx("p",{className:"text-muted-foreground",children:"Откройте для себя уникальные коллекции от наших модераторов"})]}),s.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"mb-8",children:s.jsxs("form",{onSubmit:l,className:"flex w-full max-w-md items-center gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(qe,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(Z,{placeholder:"Поиск магазинов...",value:i,onChange:d=>r(d.target.value),className:"pl-10"})]}),s.jsx(z,{type:"submit",size:"icon",children:s.jsx(qe,{className:"h-4 w-4"})})]})}),e.length>0?s.jsx(F.div,{variants:c,initial:"hidden",animate:"visible",className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:e.map(d=>s.jsx(F.div,{variants:u,children:s.jsx(J,{className:"group overflow-hidden transition-all hover:shadow-lg border-0 shadow-sm",children:s.jsxs(H,{to:`/shops/${d.moderator_id}/items`,children:[s.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden",children:[d.avatar?s.jsx("img",{src:d.avatar.startsWith("/")?`${window.location.origin}${d.avatar}`:d.avatar,alt:d.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105",onError:m=>{var p;m.currentTarget.style.display="none",(p=m.currentTarget.nextElementSibling)==null||p.classList.remove("hidden")}}):null,s.jsx("div",{className:`flex h-full w-full items-center justify-center bg-gradient-to-br from-primary/20 to-primary/40 ${d.avatar?"hidden":""}`,children:s.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-gradient-to-br from-primary to-primary/80 text-white shadow-lg",children:s.jsx("span",{className:"text-2xl font-bold",children:d.moderator_name.charAt(0).toUpperCase()})})}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 transition-opacity group-hover:opacity-100",children:s.jsxs("div",{className:"absolute bottom-4 left-4 right-4 text-white",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(co,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:d.name})]}),s.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(jt,{className:"h-3 w-3"}),s.jsxs("span",{children:[d.items_count," товаров"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(es,{className:"h-3 w-3"}),s.jsx("span",{children:d.moderator_name})]})]})]})}),s.jsx("div",{className:"absolute top-3 left-3",children:s.jsxs(le,{variant:"secondary",className:"bg-white/90 text-foreground hover:bg-white",children:[s.jsx(ea,{className:"mr-1 h-3 w-3"}),"Магазин"]})})]}),s.jsxs(X,{className:"p-4",children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("h3",{className:"font-medium leading-tight text-lg mb-1",title:d.name,children:d.name}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(es,{className:"h-3 w-3"}),d.moderator_name]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(jt,{className:"h-3 w-3"}),s.jsxs("span",{children:[d.items_count," товаров"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(li,{className:"h-3 w-3"}),s.jsx("span",{children:new Date(d.created_at).toLocaleDateString("ru-RU",{month:"short",year:"numeric"})})]})]}),s.jsx(z,{size:"sm",variant:"ghost",className:"opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(Ji,{className:"h-4 w-4"})})]})]})]})})},d.id))}):s.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},className:"text-center py-16",children:[s.jsx("div",{className:"mx-auto mb-6 flex h-24 w-24 items-center justify-center rounded-full bg-muted",children:s.jsx(co,{className:"h-12 w-12 text-muted-foreground"})}),s.jsx("h3",{className:"mb-2 text-xl font-semibold",children:"Магазины не найдены"}),s.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:i?"Попробуйте изменить поисковый запрос":"В данный момент нет доступных магазинов"})]})]})},TN=()=>{const{moderatorId:e}=kt(),[t,a]=h.useState([]),[n,i]=h.useState(null),[r,o]=h.useState(!0),[l,c]=h.useState(!1),[u,d]=h.useState(""),[m,p]=h.useState(1),[x,f]=h.useState(!0),{isFavorite:v,toggleFavorite:g}=cs(),S=async(y,w)=>{if(!e)return[];const b={};return w!=null&&w!==""&&(b.q=w),(await Ya.getShopItems(parseInt(e),y,20,b)).items};h.useEffect(()=>{(async()=>{if(e)try{const w=await Ya.getShop(parseInt(e));i(w)}catch(w){console.error("Error fetching shop:",w)}})()},[e]),h.useEffect(()=>{o(!0),a([]),f(!0),p(1),S(1,u).then(y=>{a(y),f(y.length===20),o(!1)}).catch(()=>{o(!1)})},[u,e]),h.useEffect(()=>{m!==1&&(c(!0),S(m,u).then(y=>{a(w=>[...w,...y]),f(y.length===20),c(!1)}))},[m,e]);const k=y=>{y.preventDefault(),d(u)},C=h.useRef(null),_=h.useCallback(y=>{r||x&&(C.current&&C.current.disconnect(),C.current=new IntersectionObserver(w=>{w[0].isIntersecting&&p(b=>b+1)}),y&&C.current.observe(y))},[r,x]),T={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},V={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},N=y=>{if(y.variants&&y.variants.length>0){const w=y.variants.map(b=>b.price).filter(b=>typeof b=="number");if(w.length>0)return Math.min(...w)}return y.price??void 0};return r&&!n?s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx(ce,{className:"h-6 w-24 rounded-full mb-4"}),s.jsx(ce,{className:"h-9 w-48 mb-4"}),s.jsx(ce,{className:"h-5 w-96"})]}),s.jsx("div",{className:"mb-8",children:s.jsx(ce,{className:"h-10 w-full max-w-md"})}),s.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:Array.from({length:8}).map((y,w)=>s.jsxs(J,{className:"overflow-hidden",children:[s.jsx("div",{className:"aspect-[3/4] animate-pulse bg-muted"}),s.jsx(X,{className:"p-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-5 w-2/3 animate-pulse rounded bg-muted"}),s.jsx("div",{className:"h-4 w-1/2 animate-pulse rounded bg-muted"}),s.jsx("div",{className:"h-4 w-1/3 animate-pulse rounded bg-muted"})]})})]},w))})]}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-6",children:s.jsx(z,{asChild:!0,variant:"ghost",className:"pl-0 hover:bg-transparent",children:s.jsxs(H,{to:"/shops",className:"flex items-center text-sm text-muted-foreground hover:text-foreground",children:[s.jsx(zt,{className:"mr-1 h-4 w-4"}),"Назад к магазинам"]})})}),n&&s.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"mb-8",children:s.jsx("div",{className:"mb-4",children:s.jsx("h1",{className:"mb-2 font-display text-3xl font-bold tracking-tight",children:n.name})})}),s.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"mb-8",children:s.jsxs("form",{onSubmit:k,className:"flex w-full max-w-md items-center gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(qe,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(Z,{placeholder:"Поиск товаров...",value:u,onChange:y=>d(y.target.value),className:"pl-10"})]}),s.jsx(z,{type:"submit",size:"icon",children:s.jsx(qe,{className:"h-4 w-4"})})]})}),t.length>0?s.jsx(F.div,{variants:T,initial:"hidden",animate:"visible",className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:t.map((y,w)=>{const b=w===t.length-1?{ref:_}:{};return s.jsx(F.div,{variants:V,...b,children:s.jsx(J,{className:"group overflow-hidden transition-all hover:shadow-lg",children:s.jsxs(H,{to:`/shops/${e}/items/${y.id}`,children:[s.jsxs("div",{className:"relative aspect-[3/4] overflow-hidden",children:[y.image_urls&&y.image_urls.length>0?s.jsx(vn,{images:y.image_urls,className:"transition-transform duration-500 group-hover:scale-105"}):s.jsx(Ye,{src:y.image_url,alt:y.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105",fallbackClassName:"h-full w-full"}),s.jsx("div",{className:"absolute top-3 right-3 opacity-0 transition-opacity group-hover:opacity-100",children:s.jsx(z,{size:"icon",variant:"secondary",className:"h-8 w-8 rounded-full",onClick:async R=>{R.preventDefault(),await g(y.id)},children:s.jsx(Me,{className:`h-4 w-4 ${v(y.id)?"fill-primary text-primary":""}`})})})]}),s.jsxs(X,{className:"p-4",children:[s.jsxs("div",{className:"mb-2",children:[y.category&&s.jsx(le,{variant:"outline",className:"mb-2 text-xs capitalize",children:Je[y.category]??y.category}),s.jsx("h3",{className:"font-medium leading-tight",title:y.name,children:y.name}),y.brand&&s.jsx("p",{className:"text-sm text-muted-foreground",children:y.brand})]}),(()=>{const R=N(y);return R!==void 0?s.jsxs("p",{className:"font-semibold",children:[R.toLocaleString()," ₸"]}):null})()]})]})})},y.id)})}):r?null:s.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},className:"text-center py-16",children:[s.jsx("div",{className:"mx-auto mb-6 flex h-24 w-24 items-center justify-center rounded-full bg-muted",children:s.jsx(Be,{className:"h-12 w-12 text-muted-foreground"})}),s.jsx("h3",{className:"mb-2 text-xl font-semibold",children:"Товары не найдены"}),s.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:u?"Попробуйте изменить поисковый запрос":"В данном магазине пока нет товаров"})]}),l&&s.jsx("div",{className:"mt-8 flex justify-center",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Загрузка..."})]})})]})},AN=()=>{const{id:e,moderatorId:t}=kt(),{user:a,isAdmin:n}=Ee(),[i,r]=h.useState(null),[o,l]=h.useState(null),[c,u]=h.useState([]),[d,m]=h.useState(!0),[p,x]=h.useState([]),[f,v]=h.useState(""),[g,S]=h.useState(),{isFavorite:k,toggleFavorite:C}=cs(),{addItem:_}=Qs(),[T,V]=h.useState(null),[N,y]=h.useState(1);h.useEffect(()=>{(async()=>{try{if(!e||!t)return;m(!0);const[P,D,E]=await Promise.all([U.get(`/api/items/${e}`),U.get(`/api/items/${e}/similar`),Ya.getShop(parseInt(t))]);r(P.data),u(D.data),l(E);const O=await Oa(Number(e));x(O)}catch(P){console.error(P)}finally{m(!1)}})()},[e,t]);const w=async()=>{e&&await C(Number(e))},b=async()=>{if(!(!e||!f.trim()))try{const j=await md(Number(e),{content:f,rating:g});x([j,...p]),v(""),S(void 0)}catch(j){console.error(j)}};if(d)return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("div",{className:"mb-6",children:s.jsx(ce,{className:"h-6 w-24 rounded-full"})}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[s.jsx("div",{className:"w-full md:w-1/2",children:s.jsx(ce,{className:"aspect-square rounded-xl"})}),s.jsxs("div",{className:"w-full md:w-1/2 space-y-6",children:[s.jsx(ce,{className:"h-9 w-3/4 rounded-lg"}),s.jsx(ce,{className:"h-5 w-1/2 rounded-lg"}),s.jsx(ce,{className:"h-7 w-1/4 rounded-lg"}),s.jsxs("div",{className:"space-y-4 pt-4",children:[s.jsx(ce,{className:"h-4 w-full rounded-lg"}),s.jsx(ce,{className:"h-4 w-4/5 rounded-lg"}),s.jsx(ce,{className:"h-4 w-3/4 rounded-lg"})]}),s.jsxs("div",{className:"flex gap-4 pt-6",children:[s.jsx(ce,{className:"h-12 flex-1 rounded-lg"}),s.jsx(ce,{className:"h-12 w-12 rounded-lg"})]})]})]})]});if(!i)return s.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},className:"container mx-auto px-4 py-16 text-center",children:[s.jsx(Be,{className:"mx-auto mb-4 h-16 w-16 text-muted-foreground"}),s.jsx("h3",{className:"mb-2 text-2xl font-semibold tracking-tight",children:"Товар не найден"}),s.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"Возможно, товар был удален или перемещен"}),s.jsx(z,{asChild:!0,variant:"outline",className:"rounded-full",children:s.jsxs(H,{to:`/shops/${t}/items`,children:[s.jsx(zt,{className:"mr-2 h-4 w-4"}),"Вернуться в магазин"]})})]});const R=i.variants&&i.variants.length>0?Math.min(...i.variants.map(j=>typeof j.price=="number"?j.price:1/0)):void 0;let M;return(T==null?void 0:T.price)!==void 0&&(T==null?void 0:T.price)!==null?M=T.price:R!==void 0&&R!==1/0?M=R:i.price!==void 0&&i.price!==null&&(M=i.price),s.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},className:"container mx-auto px-4 py-8",children:[s.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-6",children:s.jsx(z,{asChild:!0,variant:"ghost",className:"pl-0 hover:bg-transparent",children:s.jsxs(H,{to:`/shops/${t}/items`,className:"flex items-center text-sm text-muted-foreground hover:text-foreground",children:[s.jsx(zt,{className:"mr-1 h-4 w-4"}),"Назад в магазин"]})})}),o&&s.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"mb-6",children:s.jsx(J,{className:"border-0 shadow-sm",children:s.jsx(X,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ea,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:o.name})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jt,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["Модератор: ",o.moderator_name]})]})]})})})}),s.jsxs("div",{className:"mb-16 flex flex-col md:flex-row gap-8 md:gap-12",children:[s.jsx(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6},className:"w-full md:w-1/2",children:i.image_urls&&i.image_urls.length>0?s.jsx(vn,{images:i.image_urls,className:"rounded-xl shadow-sm",aspectClassName:"aspect-square"}):s.jsx("div",{className:"aspect-square overflow-hidden rounded-xl bg-muted shadow-sm",children:s.jsx(Ye,{src:i.image_url,alt:i.name,className:"h-full w-full object-cover transition-transform duration-500 hover:scale-105",fallbackClassName:"flex aspect-square items-center justify-center rounded-xl bg-muted shadow-sm"})})}),s.jsxs(F.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6},className:"w-full md:w-1/2",children:[s.jsx("div",{className:"mb-4 flex items-center justify-between",children:i.category&&s.jsx(le,{variant:"outline",className:"text-xs capitalize",children:Je[i.category]??i.category})}),s.jsx("h1",{className:"mb-2 text-3xl font-bold tracking-tight",children:i.name}),i.brand&&s.jsx("p",{className:"mb-4 text-lg text-muted-foreground",children:i.brand}),M!==void 0&&s.jsxs("p",{className:"mb-6 text-2xl font-bold",children:[M.toLocaleString(),"₸"]}),(i.color||i.size||i.style||i.collection)&&s.jsxs("div",{className:"mb-6 grid grid-cols-1 sm:grid-cols-2 gap-2",children:[i.color&&s.jsxs("div",{className:"rounded-md bg-muted/80 p-2.5 border border-border/50 w-full sm:max-w-[260px]",children:[s.jsx("p",{className:"mb-1 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Цвет"}),s.jsx("p",{className:"text-sm font-medium leading-tight",children:i.color})]}),i.size&&s.jsxs("div",{className:"rounded-md bg-muted/80 p-2.5 border border-border/50 w-full sm:max-w-[260px]",children:[s.jsx("p",{className:"mb-1 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Размер"}),s.jsx("p",{className:"text-sm font-medium leading-tight",children:i.size})]}),i.style&&s.jsxs("div",{className:"rounded-md bg-muted/80 p-2.5 border border-border/50 w-full sm:max-w-[260px]",children:[s.jsx("p",{className:"mb-1 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Стиль"}),s.jsx("p",{className:"text-sm font-medium leading-tight",children:i.style})]}),i.collection&&s.jsxs("div",{className:"rounded-md bg-muted/80 p-2.5 border border-border/50 w-full sm:max-w-[260px]",children:[s.jsx("p",{className:"mb-1 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Коллекция"}),s.jsx("p",{className:"text-sm font-medium leading-tight",children:i.collection})]})]}),i.variants&&i.variants.length>0&&s.jsxs("div",{className:"mb-6 space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Выберите вариант"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:i.variants.map(j=>{const P=[];j.size&&P.push(j.size),j.color&&P.push(j.color);const D=P.join(" ")||j.sku||String(j.id),E=(T==null?void 0:T.id)===j.id,O=j.stock!==void 0&&j.stock===0;return s.jsxs(z,{type:"button",variant:E?"default":"outline",size:"default",disabled:O,className:`flex flex-col items-start justify-between gap-1 rounded-xl border-2 px-3 py-3 transition-all duration-200 min-h-[84px] ${E?"border-primary shadow-sm":"border-transparent hover:border-muted-foreground/40"} ${O?"opacity-50 cursor-not-allowed":""}`,onClick:()=>{V(j),y(1)},children:[s.jsx("span",{className:"font-medium leading-tight",children:D}),j.price!==void 0&&j.price!==null&&s.jsxs("span",{className:"text-sm text-muted-foreground",children:[j.price.toLocaleString(),"₸"]}),j.stock!==void 0&&s.jsx("span",{className:"text-xs text-muted-foreground",children:j.stock>0?`${j.stock} шт.`:"Нет в наличии"})]},j.id)})}),T&&s.jsxs("div",{className:"flex items-center gap-4 pt-2",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Доступно: ",T.stock??"—"]}),s.jsxs("div",{className:"flex items-center gap-2 bg-muted rounded-lg p-1",children:[s.jsx(z,{variant:"ghost",size:"sm",disabled:N<=1,onClick:()=>y(j=>Math.max(1,j-1)),className:"h-8 w-8 rounded-md",children:s.jsx(Qi,{className:"h-3 w-3"})}),s.jsx("span",{className:"w-6 text-center font-medium",children:N}),s.jsx(z,{variant:"ghost",size:"sm",disabled:T.stock!==void 0&&N>=T.stock,onClick:()=>y(j=>T.stock!==void 0?Math.min(T.stock,j+1):j+1),className:"h-8 w-8 rounded-md",children:s.jsx(Ms,{className:"h-3 w-3"})})]})]})]}),i.description&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"mb-2 font-medium",children:"Описание"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:i.description})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(z,{size:"lg",className:"flex-1 rounded-lg shadow-sm hover:shadow-md transition-shadow",disabled:!T,onClick:()=>{!i||!T||_({id:T.id,item_id:i.id,name:i.name,price:T.price??i.price??0,image_url:i.image_url,size:T.size,color:T.color,quantity:N,stock:T.stock})},children:"Добавить в корзину"}),s.jsx(z,{size:"lg",variant:k(Number(e))?"default":"outline",className:"rounded-lg px-3 shadow-sm hover:shadow-md transition-shadow",onClick:w,children:s.jsx(Me,{className:`h-5 w-5 ${k(Number(e))?"fill-current":""}`,strokeWidth:k(Number(e))?2:1.5})})]})]})]}),c.length>0&&s.jsxs(F.section,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:"mb-16",children:[s.jsx("h2",{className:"mb-6 text-2xl font-bold tracking-tight",children:"Похожие товары"}),s.jsx(F.div,{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:c.map(j=>s.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:s.jsx(J,{className:"group overflow-hidden transition-all hover:shadow-lg border-0 shadow-sm",children:s.jsxs(H,{to:`/shops/${t}/items/${j.id}`,className:"block",children:[s.jsx("div",{className:"relative aspect-[3/4] overflow-hidden",children:j.image_url?s.jsx("img",{src:j.image_url,alt:j.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"}):s.jsx("div",{className:"flex h-full w-full items-center justify-center bg-muted",children:s.jsx(Be,{className:"h-12 w-12 text-muted-foreground"})})}),s.jsxs(X,{className:"p-4",children:[s.jsxs("div",{className:"mb-2",children:[j.category&&s.jsx(le,{variant:"outline",className:"mb-2 text-xs capitalize",children:Je[j.category]??j.category}),s.jsx("h3",{className:"font-medium leading-tight line-clamp-1",title:j.name,children:j.name}),j.brand&&s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:j.brand})]}),(()=>{let P;if(j.variants&&j.variants.length>0){const D=j.variants.map(E=>E.price).filter(E=>typeof E=="number");D.length>0&&(P=Math.min(...D))}return P===void 0&&(P=j.price??void 0),P!==void 0?s.jsxs("p",{className:"font-semibold",children:[P.toLocaleString()," ₸"]}):null})()]})]})})},j.id))})]}),s.jsxs(F.section,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.3},className:"mb-16",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Отзывы"}),s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(Qt,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:p.length})]})]}),s.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"mb-8 rounded-xl border p-6 shadow-sm",children:[s.jsx("h3",{className:"mb-4 text-lg font-medium",children:"Оставить отзыв"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"mb-2 text-sm text-muted-foreground",children:"Ваша оценка"}),s.jsx(ns,{value:g,onChange:S})]}),s.jsx(ot,{placeholder:"Расскажите о вашем опыте использования этого товара...",value:f,onChange:j=>v(j.target.value),rows:4,className:"rounded-lg border-muted"}),s.jsx("div",{className:"flex justify-end",children:s.jsx(z,{onClick:b,disabled:!f.trim(),className:"rounded-lg",children:"Отправить отзыв"})})]})]}),p.length===0?s.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},className:"rounded-xl border p-8 text-center shadow-sm",children:[s.jsx(Qt,{className:"mx-auto mb-4 h-12 w-12 text-muted-foreground"}),s.jsx("h3",{className:"mb-2 text-lg font-medium",children:"Пока нет отзывов"}),s.jsx("p",{className:"text-muted-foreground",children:"Будьте первым, кто оставит отзыв об этом товаре"})]}):s.jsx(F.ul,{className:"space-y-4",children:p.map(j=>s.jsx(F.li,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:s.jsxs(J,{className:"overflow-hidden border-0 shadow-sm",children:[s.jsx(pe,{className:"pb-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:j.user_name??"Пользователь"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(j.created_at).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"})})]}),((a==null?void 0:a.id)===j.user_id||n)&&s.jsx(z,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-600 h-8 w-8 rounded-full",onClick:async()=>{if(e&&confirm("Удалить комментарий?"))try{await hd(Number(e),j.id),x(P=>P.filter(D=>D.id!==j.id))}catch(P){console.error(P)}},children:s.jsx(Ze,{className:"h-4 w-4"})})]})}),s.jsxs(X,{className:"pt-0",children:[j.rating!==void 0&&j.rating!==null&&s.jsx("div",{className:"mb-3",children:s.jsx(ns,{value:j.rating})}),s.jsx("p",{className:"mb-4 whitespace-pre-line text-muted-foreground",children:j.content}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs(z,{variant:"ghost",size:"sm",className:"flex items-center gap-2 rounded-full",onClick:async()=>{if(!(!e||!a))try{await pd(Number(e),j.id);const P=await Oa(Number(e));x(P)}catch(P){console.error(P)}},children:[s.jsx(Me,{className:`h-4 w-4 ${j.likes>0?"fill-primary text-primary":""}`}),s.jsx("span",{children:j.likes})]})})]})]})},j.id))})]})]})};function RN(){const{loading:e}=Ee();return e?null:s.jsx(xf,{children:s.jsx(Pf,{children:s.jsx(Cp,{children:s.jsxs(Pp,{children:[s.jsxs(de,{element:s.jsx(bb,{}),children:[s.jsx(de,{path:"/",element:s.jsx(Fb,{})}),s.jsx(de,{path:"/login",element:s.jsx($b,{})}),s.jsx(de,{path:"/register",element:s.jsx(Bb,{})}),s.jsx(de,{path:"/google/callback",element:s.jsx(qb,{})})]}),s.jsxs(de,{element:s.jsx(aj,{children:s.jsx(Rb,{})}),children:[s.jsx(de,{path:"/home",element:s.jsx(Wb,{})}),s.jsx(de,{path:"/profile",element:s.jsx(Zb,{})}),s.jsx(de,{path:"/settings",element:s.jsx(tj,{})}),s.jsx(de,{path:"/logout",element:s.jsx(sj,{})}),s.jsx(de,{path:"/items",element:s.jsx(bj,{})}),s.jsx(de,{path:"/items/:id",element:s.jsx(jj,{})}),s.jsx(de,{path:"/outfits",element:s.jsx(Ej,{})}),s.jsx(de,{path:"/outfits/new",element:s.jsx(gN,{})}),s.jsx(de,{path:"/outfits/builder",element:s.jsx(Xj,{})}),s.jsx(de,{path:"/outfits/:id",element:s.jsx(Yj,{})}),s.jsx(de,{path:"/outfits/:id/edit",element:s.jsx(vN,{})}),s.jsx(de,{path:"/shops",element:s.jsx(PN,{})}),s.jsx(de,{path:"/shops/:moderatorId/items/:id",element:s.jsx(AN,{})}),s.jsx(de,{path:"/shops/:moderatorId/items",element:s.jsx(TN,{})}),s.jsx(de,{path:"/favorites",element:s.jsx(Zj,{})}),s.jsx(de,{path:"/history",element:s.jsx(xw,{})}),s.jsx(de,{path:"/cart",element:s.jsx(fw,{})}),s.jsxs(de,{element:s.jsx(nj,{children:s.jsx(Qj,{})}),children:[s.jsx(de,{path:"/admin/users",element:s.jsx(yt,{children:s.jsx(ew,{})})}),s.jsx(de,{path:"/admin/users/new",element:s.jsx(yt,{children:s.jsx(_l,{})})}),s.jsx(de,{path:"/admin/users/:id/edit",element:s.jsx(yt,{children:s.jsx(_l,{})})}),s.jsx(de,{path:"/admin/items",element:s.jsx(tw,{})}),s.jsx(de,{path:"/admin/items/new",element:s.jsx(Dl,{})}),s.jsx(de,{path:"/admin/items/:id/edit",element:s.jsx(Dl,{})}),s.jsx(de,{path:"/admin/lamoda-parser",element:s.jsx(yt,{children:s.jsx(CN,{})})}),s.jsx(de,{path:"/admin/outfits",element:s.jsx(yt,{children:s.jsx(sw,{})})}),s.jsx(de,{path:"/admin/outfits/new",element:s.jsx(yt,{children:s.jsx(Ml,{})})}),s.jsx(de,{path:"/admin/outfits/:id/edit",element:s.jsx(yt,{children:s.jsx(Ml,{})})}),s.jsx(de,{path:"/admin/analytics",element:s.jsx(aw,{})}),s.jsx(de,{path:"/admin/system",element:s.jsx(yt,{children:s.jsx(ow,{})})})]})]}),s.jsx(de,{path:"*",element:s.jsx(Xs,{to:"/"})})]})})})})}function EN(){return h.useEffect(()=>{Rf()},[]),s.jsx(cd,{children:s.jsx(RN,{})})}const ie=e=>typeof e=="string",js=()=>{let e,t;const a=new Promise((n,i)=>{e=n,t=i});return a.resolve=e,a.reject=t,a},tc=e=>e==null?"":""+e,ON=(e,t,a)=>{e.forEach(n=>{t[n]&&(a[n]=t[n])})},LN=/###/g,sc=e=>e&&e.indexOf("###")>-1?e.replace(LN,"."):e,ac=e=>!e||ie(e),_s=(e,t,a)=>{const n=ie(t)?t.split("."):t;let i=0;for(;i<n.length-1;){if(ac(e))return{};const r=sc(n[i]);!e[r]&&a&&(e[r]=new a),Object.prototype.hasOwnProperty.call(e,r)?e=e[r]:e={},++i}return ac(e)?{}:{obj:e,k:sc(n[i])}},nc=(e,t,a)=>{const{obj:n,k:i}=_s(e,t,Object);if(n!==void 0||t.length===1){n[i]=a;return}let r=t[t.length-1],o=t.slice(0,t.length-1),l=_s(e,o,Object);for(;l.obj===void 0&&o.length;)r=`${o[o.length-1]}.${r}`,o=o.slice(0,o.length-1),l=_s(e,o,Object),l&&l.obj&&typeof l.obj[`${l.k}.${r}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${r}`]=a},_N=(e,t,a,n)=>{const{obj:i,k:r}=_s(e,t,Object);i[r]=i[r]||[],i[r].push(a)},Za=(e,t)=>{const{obj:a,k:n}=_s(e,t);if(a)return a[n]},DN=(e,t,a)=>{const n=Za(e,a);return n!==void 0?n:Za(t,a)},Wm=(e,t,a)=>{for(const n in t)n!=="__proto__"&&n!=="constructor"&&(n in e?ie(e[n])||e[n]instanceof String||ie(t[n])||t[n]instanceof String?a&&(e[n]=t[n]):Wm(e[n],t[n],a):e[n]=t[n]);return e},Ht=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var MN={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const IN=e=>ie(e)?e.replace(/[&<>"'\/]/g,t=>MN[t]):e;class FN{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const a=this.regExpMap.get(t);if(a!==void 0)return a;const n=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,n),this.regExpQueue.push(t),n}}const VN=[" ",",","?","!",";"],zN=new FN(20),$N=(e,t,a)=>{t=t||"",a=a||"";const n=VN.filter(o=>t.indexOf(o)<0&&a.indexOf(o)<0);if(n.length===0)return!0;const i=zN.getRegExp(`(${n.map(o=>o==="?"?"\\?":o).join("|")})`);let r=!i.test(e);if(!r){const o=e.indexOf(a);o>0&&!i.test(e.substring(0,o))&&(r=!0)}return r},$i=function(e,t){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return e[t];const n=t.split(a);let i=e;for(let r=0;r<n.length;){if(!i||typeof i!="object")return;let o,l="";for(let c=r;c<n.length;++c)if(c!==r&&(l+=a),l+=n[c],o=i[l],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&c<n.length-1)continue;r+=c-r+1;break}i=o}return i},Qa=e=>e&&e.replace("_","-"),BN={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class en{constructor(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,a)}init(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=a.prefix||"i18next:",this.logger=t||BN,this.options=a,this.debug=a.debug}log(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return this.forward(a,"log","",!0)}warn(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return this.forward(a,"warn","",!0)}error(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return this.forward(a,"error","")}deprecate(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return this.forward(a,"warn","WARNING DEPRECATED: ",!0)}forward(t,a,n,i){return i&&!this.debug?null:(ie(t[0])&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[a](t))}create(t){return new en(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new en(this.logger,t)}}var at=new en;class jn{constructor(){this.observers={}}on(t,a){return t.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const i=this.observers[n].get(a)||0;this.observers[n].set(a,i+1)}),this}off(t,a){if(this.observers[t]){if(!a){delete this.observers[t];return}this.observers[t].delete(a)}}emit(t){for(var a=arguments.length,n=new Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(o=>{let[l,c]=o;for(let u=0;u<c;u++)l(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[l,c]=o;for(let u=0;u<c;u++)l.apply(l,[t,...n])})}}class ic extends jn{constructor(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=a,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const a=this.options.ns.indexOf(t);a>-1&&this.options.ns.splice(a,1)}getResource(t,a,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const r=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;t.indexOf(".")>-1?l=t.split("."):(l=[t,a],n&&(Array.isArray(n)?l.push(...n):ie(n)&&r?l.push(...n.split(r)):l.push(n)));const c=Za(this.data,l);return!c&&!a&&!n&&t.indexOf(".")>-1&&(t=l[0],a=l[1],n=l.slice(2).join(".")),c||!o||!ie(n)?c:$i(this.data&&this.data[t]&&this.data[t][a],n,r)}addResource(t,a,n,i){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let l=[t,a];n&&(l=l.concat(o?n.split(o):n)),t.indexOf(".")>-1&&(l=t.split("."),i=a,a=l[1]),this.addNamespaces(a),nc(this.data,l,i),r.silent||this.emit("added",t,a,n,i)}addResources(t,a,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const r in n)(ie(n[r])||Array.isArray(n[r]))&&this.addResource(t,a,r,n[r],{silent:!0});i.silent||this.emit("added",t,a,n)}addResourceBundle(t,a,n,i,r){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},l=[t,a];t.indexOf(".")>-1&&(l=t.split("."),i=n,n=a,a=l[1]),this.addNamespaces(a);let c=Za(this.data,l)||{};o.skipCopy||(n=JSON.parse(JSON.stringify(n))),i?Wm(c,n,r):c={...c,...n},nc(this.data,l,c),o.silent||this.emit("added",t,a,n)}removeResourceBundle(t,a){this.hasResourceBundle(t,a)&&delete this.data[t][a],this.removeNamespaces(a),this.emit("removed",t,a)}hasResourceBundle(t,a){return this.getResource(t,a)!==void 0}getResourceBundle(t,a){return a||(a=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,a)}:this.getResource(t,a)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const a=this.getDataByLanguage(t);return!!(a&&Object.keys(a)||[]).find(i=>a[i]&&Object.keys(a[i]).length>0)}toJSON(){return this.data}}var Km={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,a,n,i){return e.forEach(r=>{this.processors[r]&&(t=this.processors[r].process(t,a,n,i))}),t}};const rc={};class tn extends jn{constructor(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),ON(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=a,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=at.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;const n=this.resolve(t,a);return n&&n.res!==void 0}extractFromKey(t,a){let n=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let r=a.ns||this.options.defaultNS||[];const o=n&&t.indexOf(n)>-1,l=!this.options.userDefinedKeySeparator&&!a.keySeparator&&!this.options.userDefinedNsSeparator&&!a.nsSeparator&&!$N(t,n,i);if(o&&!l){const c=t.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:t,namespaces:ie(r)?[r]:r};const u=t.split(n);(n!==i||n===i&&this.options.ns.indexOf(u[0])>-1)&&(r=u.shift()),t=u.join(i)}return{key:t,namespaces:ie(r)?[r]:r}}translate(t,a,n){if(typeof a!="object"&&this.options.overloadTranslationOptionHandler&&(a=this.options.overloadTranslationOptionHandler(arguments)),typeof a=="object"&&(a={...a}),a||(a={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const i=a.returnDetails!==void 0?a.returnDetails:this.options.returnDetails,r=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,{key:o,namespaces:l}=this.extractFromKey(t[t.length-1],a),c=l[l.length-1],u=a.lng||this.language,d=a.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(d){const _=a.nsSeparator||this.options.nsSeparator;return i?{res:`${c}${_}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(a)}:`${c}${_}${o}`}return i?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(a)}:o}const m=this.resolve(t,a);let p=m&&m.res;const x=m&&m.usedKey||o,f=m&&m.exactUsedKey||o,v=Object.prototype.toString.apply(p),g=["[object Number]","[object Function]","[object RegExp]"],S=a.joinArrays!==void 0?a.joinArrays:this.options.joinArrays,k=!this.i18nFormat||this.i18nFormat.handleAsObject,C=!ie(p)&&typeof p!="boolean"&&typeof p!="number";if(k&&p&&C&&g.indexOf(v)<0&&!(ie(S)&&Array.isArray(p))){if(!a.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const _=this.options.returnedObjectHandler?this.options.returnedObjectHandler(x,p,{...a,ns:l}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(m.res=_,m.usedParams=this.getUsedParamsDetails(a),m):_}if(r){const _=Array.isArray(p),T=_?[]:{},V=_?f:x;for(const N in p)if(Object.prototype.hasOwnProperty.call(p,N)){const y=`${V}${r}${N}`;T[N]=this.translate(y,{...a,joinArrays:!1,ns:l}),T[N]===y&&(T[N]=p[N])}p=T}}else if(k&&ie(S)&&Array.isArray(p))p=p.join(S),p&&(p=this.extendTranslation(p,t,a,n));else{let _=!1,T=!1;const V=a.count!==void 0&&!ie(a.count),N=tn.hasDefaultValue(a),y=V?this.pluralResolver.getSuffix(u,a.count,a):"",w=a.ordinal&&V?this.pluralResolver.getSuffix(u,a.count,{ordinal:!1}):"",b=V&&!a.ordinal&&a.count===0&&this.pluralResolver.shouldUseIntlApi(),R=b&&a[`defaultValue${this.options.pluralSeparator}zero`]||a[`defaultValue${y}`]||a[`defaultValue${w}`]||a.defaultValue;!this.isValidLookup(p)&&N&&(_=!0,p=R),this.isValidLookup(p)||(T=!0,p=o);const j=(a.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&T?void 0:p,P=N&&R!==p&&this.options.updateMissing;if(T||_||P){if(this.logger.log(P?"updateKey":"missingKey",u,c,o,P?R:p),r){const L=this.resolve(o,{...a,keySeparator:!1});L&&L.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let D=[];const E=this.languageUtils.getFallbackCodes(this.options.fallbackLng,a.lng||this.language);if(this.options.saveMissingTo==="fallback"&&E&&E[0])for(let L=0;L<E.length;L++)D.push(E[L]);else this.options.saveMissingTo==="all"?D=this.languageUtils.toResolveHierarchy(a.lng||this.language):D.push(a.lng||this.language);const O=(L,$,B)=>{const q=N&&B!==p?B:j;this.options.missingKeyHandler?this.options.missingKeyHandler(L,c,$,q,P,a):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(L,c,$,q,P,a),this.emit("missingKey",L,c,$,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&V?D.forEach(L=>{const $=this.pluralResolver.getSuffixes(L,a);b&&a[`defaultValue${this.options.pluralSeparator}zero`]&&$.indexOf(`${this.options.pluralSeparator}zero`)<0&&$.push(`${this.options.pluralSeparator}zero`),$.forEach(B=>{O([L],o+B,a[`defaultValue${B}`]||R)})}):O(D,o,R))}p=this.extendTranslation(p,t,a,m,n),T&&p===o&&this.options.appendNamespaceToMissingKey&&(p=`${c}:${o}`),(T||_)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${o}`:o,_?p:void 0):p=this.options.parseMissingKeyHandler(p))}return i?(m.res=p,m.usedParams=this.getUsedParamsDetails(a),m):p}extendTranslation(t,a,n,i,r){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const u=ie(t)&&(n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(u){const p=t.match(this.interpolator.nestingRegexp);d=p&&p.length}let m=n.replace&&!ie(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(m={...this.options.interpolation.defaultVariables,...m}),t=this.interpolator.interpolate(t,m,n.lng||this.language||i.usedLng,n),u){const p=t.match(this.interpolator.nestingRegexp),x=p&&p.length;d<x&&(n.nest=!1)}!n.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(n.lng=this.language||i.usedLng),n.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var p=arguments.length,x=new Array(p),f=0;f<p;f++)x[f]=arguments[f];return r&&r[0]===x[0]&&!n.context?(o.logger.warn(`It seems you are nesting recursively key: ${x[0]} in key: ${a[0]}`),null):o.translate(...x,a)},n)),n.interpolation&&this.interpolator.reset()}const l=n.postProcess||this.options.postProcess,c=ie(l)?[l]:l;return t!=null&&c&&c.length&&n.applyPostProcessor!==!1&&(t=Km.handle(c,t,a,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,i,r,o,l;return ie(t)&&(t=[t]),t.forEach(c=>{if(this.isValidLookup(n))return;const u=this.extractFromKey(c,a),d=u.key;i=d;let m=u.namespaces;this.options.fallbackNS&&(m=m.concat(this.options.fallbackNS));const p=a.count!==void 0&&!ie(a.count),x=p&&!a.ordinal&&a.count===0&&this.pluralResolver.shouldUseIntlApi(),f=a.context!==void 0&&(ie(a.context)||typeof a.context=="number")&&a.context!=="",v=a.lngs?a.lngs:this.languageUtils.toResolveHierarchy(a.lng||this.language,a.fallbackLng);m.forEach(g=>{this.isValidLookup(n)||(l=g,!rc[`${v[0]}-${g}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(l)&&(rc[`${v[0]}-${g}`]=!0,this.logger.warn(`key "${i}" for languages "${v.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),v.forEach(S=>{if(this.isValidLookup(n))return;o=S;const k=[d];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(k,d,S,g,a);else{let _;p&&(_=this.pluralResolver.getSuffix(S,a.count,a));const T=`${this.options.pluralSeparator}zero`,V=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(k.push(d+_),a.ordinal&&_.indexOf(V)===0&&k.push(d+_.replace(V,this.options.pluralSeparator)),x&&k.push(d+T)),f){const N=`${d}${this.options.contextSeparator}${a.context}`;k.push(N),p&&(k.push(N+_),a.ordinal&&_.indexOf(V)===0&&k.push(N+_.replace(V,this.options.pluralSeparator)),x&&k.push(N+T))}}let C;for(;C=k.pop();)this.isValidLookup(n)||(r=C,n=this.getResource(S,g,C,a))}))})}),{res:n,usedKey:i,exactUsedKey:r,usedLng:o,usedNS:l}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,a,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,a,n,i):this.resourceStore.getResource(t,a,n,i)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const a=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&!ie(t.replace);let i=n?t.replace:t;if(n&&typeof t.count<"u"&&(i.count=t.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!n){i={...i};for(const r of a)delete i[r]}return i}static hasDefaultValue(t){const a="defaultValue";for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&a===n.substring(0,a.length)&&t[n]!==void 0)return!0;return!1}}const Qn=e=>e.charAt(0).toUpperCase()+e.slice(1);class oc{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=at.create("languageUtils")}getScriptPartFromCode(t){if(t=Qa(t),!t||t.indexOf("-")<0)return null;const a=t.split("-");return a.length===2||(a.pop(),a[a.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(a.join("-"))}getLanguagePartFromCode(t){if(t=Qa(t),!t||t.indexOf("-")<0)return t;const a=t.split("-");return this.formatLanguageCode(a[0])}formatLanguageCode(t){if(ie(t)&&t.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let i=Intl.getCanonicalLocales(t)[0];if(i&&this.options.lowerCaseLng&&(i=i.toLowerCase()),i)return i}catch{}const a=["hans","hant","latn","cyrl","cans","mong","arab"];let n=t.split("-");return this.options.lowerCaseLng?n=n.map(i=>i.toLowerCase()):n.length===2?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),a.indexOf(n[1].toLowerCase())>-1&&(n[1]=Qn(n[1].toLowerCase()))):n.length===3&&(n[0]=n[0].toLowerCase(),n[1].length===2&&(n[1]=n[1].toUpperCase()),n[0]!=="sgn"&&n[2].length===2&&(n[2]=n[2].toUpperCase()),a.indexOf(n[1].toLowerCase())>-1&&(n[1]=Qn(n[1].toLowerCase())),a.indexOf(n[2].toLowerCase())>-1&&(n[2]=Qn(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let a;return t.forEach(n=>{if(a)return;const i=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(i))&&(a=i)}),!a&&this.options.supportedLngs&&t.forEach(n=>{if(a)return;const i=this.getLanguagePartFromCode(n);if(this.isSupportedCode(i))return a=i;a=this.options.supportedLngs.find(r=>{if(r===i)return r;if(!(r.indexOf("-")<0&&i.indexOf("-")<0)&&(r.indexOf("-")>0&&i.indexOf("-")<0&&r.substring(0,r.indexOf("-"))===i||r.indexOf(i)===0&&i.length>1))return r})}),a||(a=this.getFallbackCodes(this.options.fallbackLng)[0]),a}getFallbackCodes(t,a){if(!t)return[];if(typeof t=="function"&&(t=t(a)),ie(t)&&(t=[t]),Array.isArray(t))return t;if(!a)return t.default||[];let n=t[a];return n||(n=t[this.getScriptPartFromCode(a)]),n||(n=t[this.formatLanguageCode(a)]),n||(n=t[this.getLanguagePartFromCode(a)]),n||(n=t.default),n||[]}toResolveHierarchy(t,a){const n=this.getFallbackCodes(a||this.options.fallbackLng||[],t),i=[],r=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return ie(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&r(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&r(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&r(this.getLanguagePartFromCode(t))):ie(t)&&r(this.formatLanguageCode(t)),n.forEach(o=>{i.indexOf(o)<0&&r(this.formatLanguageCode(o))}),i}}let UN=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],qN={1:e=>+(e>1),2:e=>+(e!=1),3:e=>0,4:e=>e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,5:e=>e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5,6:e=>e==1?0:e>=2&&e<=4?1:2,7:e=>e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,8:e=>e==1?0:e==2?1:e!=8&&e!=11?2:3,9:e=>+(e>=2),10:e=>e==1?0:e==2?1:e<7?2:e<11?3:4,11:e=>e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3,12:e=>+(e%10!=1||e%100==11),13:e=>+(e!==0),14:e=>e==1?0:e==2?1:e==3?2:3,15:e=>e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2,16:e=>e%10==1&&e%100!=11?0:e!==0?1:2,17:e=>e==1||e%10==1&&e%100!=11?0:1,18:e=>e==0?0:e==1?1:2,19:e=>e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3,20:e=>e==1?0:e==0||e%100>0&&e%100<20?1:2,21:e=>e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0,22:e=>e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3};const HN=["v1","v2","v3"],WN=["v4"],lc={zero:0,one:1,two:2,few:3,many:4,other:5},KN=()=>{const e={};return UN.forEach(t=>{t.lngs.forEach(a=>{e[a]={numbers:t.nr,plurals:qN[t.fc]}})}),e};class GN{constructor(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=a,this.logger=at.create("pluralResolver"),(!this.options.compatibilityJSON||WN.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=KN(),this.pluralRulesCache={}}addRule(t,a){this.rules[t]=a}clearCache(){this.pluralRulesCache={}}getRule(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const n=Qa(t==="dev"?"en":t),i=a.ordinal?"ordinal":"cardinal",r=JSON.stringify({cleanedCode:n,type:i});if(r in this.pluralRulesCache)return this.pluralRulesCache[r];let o;try{o=new Intl.PluralRules(n,{type:i})}catch{if(!t.match(/-|_/))return;const c=this.languageUtils.getLanguagePartFromCode(t);o=this.getRule(c,a)}return this.pluralRulesCache[r]=o,o}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(t,a);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(t,a){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,n).map(i=>`${a}${i}`)}getSuffixes(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(t,a);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort((i,r)=>lc[i]-lc[r]).map(i=>`${this.options.prepend}${a.ordinal?`ordinal${this.options.prepend}`:""}${i}`):n.numbers.map(i=>this.getSuffix(t,i,a)):[]}getSuffix(t,a){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(t,n);return i?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i.select(a)}`:this.getSuffixRetroCompatible(i,a):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,a){const n=t.noAbs?t.plurals(a):t.plurals(Math.abs(a));let i=t.numbers[n];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const r=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:r():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?r():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!HN.includes(this.options.compatibilityJSON)}}const cc=function(e,t,a){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,r=DN(e,t,a);return!r&&i&&ie(a)&&(r=$i(e,a,n),r===void 0&&(r=$i(t,a,n))),r},ei=e=>e.replace(/\$/g,"$$$$");class JN{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=at.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(a=>a),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:a,escapeValue:n,useRawValueToEscape:i,prefix:r,prefixEscaped:o,suffix:l,suffixEscaped:c,formatSeparator:u,unescapeSuffix:d,unescapePrefix:m,nestingPrefix:p,nestingPrefixEscaped:x,nestingSuffix:f,nestingSuffixEscaped:v,nestingOptionsSeparator:g,maxReplaces:S,alwaysFormat:k}=t.interpolation;this.escape=a!==void 0?a:IN,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=r?Ht(r):o||"{{",this.suffix=l?Ht(l):c||"}}",this.formatSeparator=u||",",this.unescapePrefix=d?"":m||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=p?Ht(p):x||Ht("$t("),this.nestingSuffix=f?Ht(f):v||Ht(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=S||1e3,this.alwaysFormat=k!==void 0?k:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(a,n)=>a&&a.source===n?(a.lastIndex=0,a):new RegExp(n,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,a,n,i){let r,o,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=x=>{if(x.indexOf(this.formatSeparator)<0){const S=cc(a,c,x,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(S,void 0,n,{...i,...a,interpolationkey:x}):S}const f=x.split(this.formatSeparator),v=f.shift().trim(),g=f.join(this.formatSeparator).trim();return this.format(cc(a,c,v,this.options.keySeparator,this.options.ignoreJSONStructure),g,n,{...i,...a,interpolationkey:v})};this.resetRegExp();const d=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,m=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:x=>ei(x)},{regex:this.regexp,safeValue:x=>this.escapeValue?ei(this.escape(x)):ei(x)}].forEach(x=>{for(l=0;r=x.regex.exec(t);){const f=r[1].trim();if(o=u(f),o===void 0)if(typeof d=="function"){const g=d(t,r,i);o=ie(g)?g:""}else if(i&&Object.prototype.hasOwnProperty.call(i,f))o="";else if(m){o=r[0];continue}else this.logger.warn(`missed to pass in variable ${f} for interpolating ${t}`),o="";else!ie(o)&&!this.useRawValueToEscape&&(o=tc(o));const v=x.safeValue(o);if(t=t.replace(r[0],v),m?(x.regex.lastIndex+=o.length,x.regex.lastIndex-=r[0].length):x.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),t}nest(t,a){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,r,o;const l=(c,u)=>{const d=this.nestingOptionsSeparator;if(c.indexOf(d)<0)return c;const m=c.split(new RegExp(`${d}[ ]*{`));let p=`{${m[1]}`;c=m[0],p=this.interpolate(p,o);const x=p.match(/'/g),f=p.match(/"/g);(x&&x.length%2===0&&!f||f.length%2!==0)&&(p=p.replace(/'/g,'"'));try{o=JSON.parse(p),u&&(o={...u,...o})}catch(v){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,v),`${c}${d}${p}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,c};for(;i=this.nestingRegexp.exec(t);){let c=[];o={...n},o=o.replace&&!ie(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let u=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const d=i[1].split(this.formatSeparator).map(m=>m.trim());i[1]=d.shift(),c=d,u=!0}if(r=a(l.call(this,i[1].trim(),o),o),r&&i[0]===t&&!ie(r))return r;ie(r)||(r=tc(r)),r||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${t}`),r=""),u&&(r=c.reduce((d,m)=>this.format(d,m,n.lng,{...n,interpolationkey:i[1].trim()}),r.trim())),t=t.replace(i[0],r),this.regexp.lastIndex=0}return t}}const XN=e=>{let t=e.toLowerCase().trim();const a={};if(e.indexOf("(")>-1){const n=e.split("(");t=n[0].toLowerCase().trim();const i=n[1].substring(0,n[1].length-1);t==="currency"&&i.indexOf(":")<0?a.currency||(a.currency=i.trim()):t==="relativetime"&&i.indexOf(":")<0?a.range||(a.range=i.trim()):i.split(";").forEach(o=>{if(o){const[l,...c]=o.split(":"),u=c.join(":").trim().replace(/^'+|'+$/g,""),d=l.trim();a[d]||(a[d]=u),u==="false"&&(a[d]=!1),u==="true"&&(a[d]=!0),isNaN(u)||(a[d]=parseInt(u,10))}})}return{formatName:t,formatOptions:a}},Wt=e=>{const t={};return(a,n,i)=>{let r=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(r={...r,[i.interpolationkey]:void 0});const o=n+JSON.stringify(r);let l=t[o];return l||(l=e(Qa(n),i),t[o]=l),l(a)}};class YN{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=at.create("formatter"),this.options=t,this.formats={number:Wt((a,n)=>{const i=new Intl.NumberFormat(a,{...n});return r=>i.format(r)}),currency:Wt((a,n)=>{const i=new Intl.NumberFormat(a,{...n,style:"currency"});return r=>i.format(r)}),datetime:Wt((a,n)=>{const i=new Intl.DateTimeFormat(a,{...n});return r=>i.format(r)}),relativetime:Wt((a,n)=>{const i=new Intl.RelativeTimeFormat(a,{...n});return r=>i.format(r,n.range||"day")}),list:Wt((a,n)=>{const i=new Intl.ListFormat(a,{...n});return r=>i.format(r)})},this.init(t)}init(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=a.interpolation.formatSeparator||","}add(t,a){this.formats[t.toLowerCase().trim()]=a}addCached(t,a){this.formats[t.toLowerCase().trim()]=Wt(a)}format(t,a,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const r=a.split(this.formatSeparator);if(r.length>1&&r[0].indexOf("(")>1&&r[0].indexOf(")")<0&&r.find(l=>l.indexOf(")")>-1)){const l=r.findIndex(c=>c.indexOf(")")>-1);r[0]=[r[0],...r.splice(1,l)].join(this.formatSeparator)}return r.reduce((l,c)=>{const{formatName:u,formatOptions:d}=XN(c);if(this.formats[u]){let m=l;try{const p=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},x=p.locale||p.lng||i.locale||i.lng||n;m=this.formats[u](l,x,{...d,...i,...p})}catch(p){this.logger.warn(p)}return m}else this.logger.warn(`there was no format function for ${u}`);return l},t)}}const ZN=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class QN extends jn{constructor(t,a,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=a,this.services=n,this.languageUtils=n.languageUtils,this.options=i,this.logger=at.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,i.backend,i)}queueLoad(t,a,n,i){const r={},o={},l={},c={};return t.forEach(u=>{let d=!0;a.forEach(m=>{const p=`${u}|${m}`;!n.reload&&this.store.hasResourceBundle(u,m)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?o[p]===void 0&&(o[p]=!0):(this.state[p]=1,d=!1,o[p]===void 0&&(o[p]=!0),r[p]===void 0&&(r[p]=!0),c[m]===void 0&&(c[m]=!0)))}),d||(l[u]=!0)}),(Object.keys(r).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(r),pending:Object.keys(o),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(t,a,n){const i=t.split("|"),r=i[0],o=i[1];a&&this.emit("failedLoading",r,o,a),!a&&n&&this.store.addResourceBundle(r,o,n,void 0,void 0,{skipCopy:!0}),this.state[t]=a?-1:2,a&&n&&(this.state[t]=0);const l={};this.queue.forEach(c=>{_N(c.loaded,[r],o),ZN(c,t),a&&c.errors.push(a),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(u=>{l[u]||(l[u]={});const d=c.loaded[u];d.length&&d.forEach(m=>{l[u][m]===void 0&&(l[u][m]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(t,a,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!t.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:a,fcName:n,tried:i,wait:r,callback:o});return}this.readingCalls++;const l=(u,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const m=this.waitingReads.shift();this.read(m.lng,m.ns,m.fcName,m.tried,m.wait,m.callback)}if(u&&d&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,t,a,n,i+1,r*2,o)},r);return}o(u,d)},c=this.backend[n].bind(this.backend);if(c.length===2){try{const u=c(t,a);u&&typeof u.then=="function"?u.then(d=>l(null,d)).catch(l):l(null,u)}catch(u){l(u)}return}return c(t,a,l)}prepareLoading(t,a){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();ie(t)&&(t=this.languageUtils.toResolveHierarchy(t)),ie(a)&&(a=[a]);const r=this.queueLoad(t,a,n,i);if(!r.toLoad.length)return r.pending.length||i(),null;r.toLoad.forEach(o=>{this.loadOne(o)})}load(t,a,n){this.prepareLoading(t,a,{},n)}reload(t,a,n){this.prepareLoading(t,a,{reload:!0},n)}loadOne(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=t.split("|"),i=n[0],r=n[1];this.read(i,r,"read",void 0,void 0,(o,l)=>{o&&this.logger.warn(`${a}loading namespace ${r} for language ${i} failed`,o),!o&&l&&this.logger.log(`${a}loaded namespace ${r} for language ${i}`,l),this.loaded(t,o,l)})}saveMissing(t,a,n,i,r){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(a)){this.logger.warn(`did not save key "${n}" as the namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend&&this.backend.create){const c={...o,isUpdate:r},u=this.backend.create.bind(this.backend);if(u.length<6)try{let d;u.length===5?d=u(t,a,n,i,c):d=u(t,a,n,i),d&&typeof d.then=="function"?d.then(m=>l(null,m)).catch(l):l(null,d)}catch(d){l(d)}else u(t,a,n,i,l,c)}!t||!t[0]||this.store.addResource(t[0],a,n,i)}}}const dc=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),ie(e[1])&&(t.defaultValue=e[1]),ie(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const a=e[3]||e[2];Object.keys(a).forEach(n=>{t[n]=a[n]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),uc=e=>(ie(e.ns)&&(e.ns=[e.ns]),ie(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),ie(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),ba=()=>{},e1=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(a=>{typeof e[a]=="function"&&(e[a]=e[a].bind(e))})};class Js extends jn{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(super(),this.options=uc(t),this.services={},this.logger=at,this.modules={external:[]},e1(this),a&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,a),this;setTimeout(()=>{this.init(t,a)},0)}}init(){var t=this;let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof a=="function"&&(n=a,a={}),!a.defaultNS&&a.defaultNS!==!1&&a.ns&&(ie(a.ns)?a.defaultNS=a.ns:a.ns.indexOf("translation")<0&&(a.defaultNS=a.ns[0]));const i=dc();this.options={...i,...this.options,...uc(a)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),a.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=a.keySeparator),a.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=a.nsSeparator);const r=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?at.init(r(this.modules.logger),this.options):at.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:typeof Intl<"u"&&(d=YN);const m=new oc(this.options);this.store=new ic(this.options.resources,this.options);const p=this.services;p.logger=at,p.resourceStore=this.store,p.languageUtils=m,p.pluralResolver=new GN(m,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),d&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(p.formatter=r(d),p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new JN(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new QN(r(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",function(x){for(var f=arguments.length,v=new Array(f>1?f-1:0),g=1;g<f;g++)v[g-1]=arguments[g];t.emit(x,...v)}),this.modules.languageDetector&&(p.languageDetector=r(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=r(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new tn(this.services,this.options),this.translator.on("*",function(x){for(var f=arguments.length,v=new Array(f>1?f-1:0),g=1;g<f;g++)v[g-1]=arguments[g];t.emit(x,...v)}),this.modules.external.forEach(x=>{x.init&&x.init(this)})}if(this.format=this.options.interpolation.format,n||(n=ba),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=function(){return t.store[d](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=function(){return t.store[d](...arguments),t}});const c=js(),u=()=>{const d=(m,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(p),n(m,p)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),c}loadResources(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ba;const i=ie(t)?t:this.language;if(typeof t=="function"&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const r=[],o=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(u=>{u!=="cimode"&&r.indexOf(u)<0&&r.push(u)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>o(c)),this.options.preload&&this.options.preload.forEach(l=>o(l)),this.services.backendConnector.load(r,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(l)})}else n(null)}reloadResources(t,a,n){const i=js();return typeof t=="function"&&(n=t,t=void 0),typeof a=="function"&&(n=a,a=void 0),t||(t=this.languages),a||(a=this.options.ns),n||(n=ba),this.services.backendConnector.reload(t,a,r=>{i.resolve(),n(r)}),i}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&Km.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let a=0;a<this.languages.length;a++){const n=this.languages[a];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}changeLanguage(t,a){var n=this;this.isLanguageChangingTo=t;const i=js();this.emit("languageChanging",t);const r=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},o=(c,u)=>{u?(r(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,i.resolve(function(){return n.t(...arguments)}),a&&a(c,function(){return n.t(...arguments)})},l=c=>{!t&&!c&&this.services.languageDetector&&(c=[]);const u=ie(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);u&&(this.language||r(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,d=>{o(d,u)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(t),i}getFixedT(t,a,n){var i=this;const r=function(o,l){let c;if(typeof l!="object"){for(var u=arguments.length,d=new Array(u>2?u-2:0),m=2;m<u;m++)d[m-2]=arguments[m];c=i.options.overloadTranslationOptionHandler([o,l].concat(d))}else c={...l};c.lng=c.lng||r.lng,c.lngs=c.lngs||r.lngs,c.ns=c.ns||r.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||n||r.keyPrefix);const p=i.options.keySeparator||".";let x;return c.keyPrefix&&Array.isArray(o)?x=o.map(f=>`${c.keyPrefix}${p}${f}`):x=c.keyPrefix?`${c.keyPrefix}${p}${o}`:o,i.t(x,c)};return ie(t)?r.lng=t:r.lngs=t,r.ns=a,r.keyPrefix=n,r}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=a.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,r=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const o=(l,c)=>{const u=this.services.backendConnector.state[`${l}|${c}`];return u===-1||u===0||u===2};if(a.precheck){const l=a.precheck(this,o);if(l!==void 0)return l}return!!(this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(n,t)&&(!i||o(r,t)))}loadNamespaces(t,a){const n=js();return this.options.ns?(ie(t)&&(t=[t]),t.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{n.resolve(),a&&a(i)}),n):(a&&a(),Promise.resolve())}loadLanguages(t,a){const n=js();ie(t)&&(t=[t]);const i=this.options.preload||[],r=t.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return r.length?(this.options.preload=i.concat(r),this.loadResources(o=>{n.resolve(),a&&a(o)}),n):(a&&a(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const a=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services&&this.services.languageUtils||new oc(dc());return a.indexOf(n.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;return new Js(t,a)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ba;const n=t.forkResourceStore;n&&delete t.forkResourceStore;const i={...this.options,...t,isClone:!0},r=new Js(i);return(t.debug!==void 0||t.prefix!==void 0)&&(r.logger=r.logger.clone(t)),["store","services","language"].forEach(l=>{r[l]=this[l]}),r.services={...this.services},r.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},n&&(r.store=new ic(this.store.data,i),r.services.resourceStore=r.store),r.translator=new tn(r.services,i),r.translator.on("*",function(l){for(var c=arguments.length,u=new Array(c>1?c-1:0),d=1;d<c;d++)u[d-1]=arguments[d];r.emit(l,...u)}),r.init(i,a),r.translator.options=i,r.translator.backendConnector.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},r}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ie=Js.createInstance();Ie.createInstance=Js.createInstance;Ie.createInstance;Ie.dir;Ie.init;Ie.loadResources;Ie.reloadResources;Ie.use;Ie.changeLanguage;Ie.getFixedT;Ie.t;Ie.exists;Ie.setDefaultNamespace;Ie.hasLoadedNamespace;Ie.loadNamespaces;Ie.loadLanguages;const t1={ru:{translation:{"common.loading":"Загрузка...","outfitBuilder.noOptions":"Нет вариантов"}},en:{translation:{"common.loading":"Loading...","outfitBuilder.noOptions":"No options"}}};Ie.use(qj).init({resources:t1,lng:"ru",fallbackLng:"en",interpolation:{escapeValue:!1}});Rp.createRoot(document.getElementById("root")).render(s.jsx(h.StrictMode,{children:s.jsx(cd,{children:s.jsx(EN,{})})}));
