import{j as e}from"./ui-DmaJfU4R.js";import{r,L as j}from"./router-YsGj19cs.js";import{u as H,W as E,h as P}from"./index-8jId_CL5.js";import{e as T}from"./outfits-5_GSKzeO.js";import{C as L,d as M}from"./card-hWJdfOrY.js";import{B as _}from"./badge-CMy5sMNA.js";import{H as B}from"./heart-DyjZq6UA.js";import{m as v}from"./proxy-OF6tZF67.js";import{S as D}from"./shopping-bag-Din1qLo_.js";import"./vendor-BtP0CW_r.js";import"./utils-CytzSlOG.js";import"./index-BwobEAja.js";import"./createLucideIcon-BcwDLXBm.js";const Z=()=>{const{user:f}=H(),[i,b]=r.useState([]),[c,y]=r.useState([]),[n,N]=r.useState(!0),[d,w]=r.useState(1),[m,C]=r.useState(1),[h,I]=r.useState(!0),[x,O]=r.useState(!0),g=async(t,a=!1)=>{if(f)try{const s=await P(t);b(u=>a?[...u,...s]:s),I(s.length===20)}catch(s){console.error(s)}},p=async(t,a=!1)=>{if(f)try{const s=await T(t);y(u=>a?[...u,...s]:s),O(s.length===20)}catch(s){console.error(s)}};r.useEffect(()=>{(async()=>{try{await Promise.all([g(1),p(1)])}catch(a){console.error(a)}finally{N(!1)}})()},[]);const o=r.useRef(null),R=r.useCallback(t=>{n||h&&(o.current&&o.current.disconnect(),o.current=new IntersectionObserver(a=>{a[0].isIntersecting&&w(s=>s+1)}),t&&o.current.observe(t))},[n,h]),l=r.useRef(null),S=r.useCallback(t=>{n||x&&(l.current&&l.current.disconnect(),l.current=new IntersectionObserver(a=>{a[0].isIntersecting&&C(s=>s+1)}),t&&l.current.observe(t))},[n,x]);r.useEffect(()=>{d>1&&g(d,!0)},[d]),r.useEffect(()=>{m>1&&p(m,!0)},[m]);const k={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},F={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return e.jsxs(e.Fragment,{children:[e.jsxs(E,{children:[e.jsx("title",{children:"Избранное — TRC"}),e.jsx("meta",{name:"description",content:"Ваши избранные товары и образы на платформе TRC. Быстрый доступ к любимым вещам."}),e.jsx("meta",{name:"keywords",content:"избранное, любимое, товары, образы, TRC"}),e.jsx("meta",{property:"og:title",content:"Избранное — TRC"}),e.jsx("meta",{property:"og:description",content:"Ваши избранные товары и образы на платформе TRC."})]}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"mb-6 font-display text-3xl font-bold tracking-tight",children:"Избранное"}),n&&e.jsx("p",{className:"py-8 text-center",children:"Загрузка..."}),!n&&i.length===0&&c.length===0&&e.jsxs("div",{className:"flex flex-col items-center py-16 text-muted-foreground",children:[e.jsx(B,{className:"mb-4 h-12 w-12 text-muted-foreground"}),e.jsx("p",{children:"У вас пока нет избранных товаров или образов"})]}),!n&&i.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Товары"}),e.jsx(v.div,{variants:k,initial:"hidden",animate:"visible",className:"mb-10 grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:i.map((t,a)=>e.jsx(v.div,{variants:F,ref:a===i.length-1?R:null,children:e.jsx(L,{className:"group overflow-hidden transition-all hover:shadow-lg",children:e.jsxs(j,{to:`/items/${t.id}`,children:[e.jsx("div",{className:"relative aspect-[3/4] overflow-hidden",children:t.image_url?e.jsx("img",{src:t.image_url,alt:t.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center bg-muted",children:e.jsx(D,{className:"h-10 w-10 text-muted-foreground"})})}),e.jsxs(M,{className:"p-4",children:[e.jsxs("div",{className:"mb-2",children:[t.category&&e.jsx(_,{variant:"outline",className:"mb-2 text-xs",children:t.category}),e.jsx("h3",{className:"font-medium leading-tight",title:t.name,children:t.name}),t.brand&&e.jsx("p",{className:"text-sm text-muted-foreground",children:t.brand})]}),t.price!==null&&t.price!==void 0&&e.jsxs("p",{className:"font-semibold",children:[t.price.toLocaleString()," ₸"]})]})]})})},t.id))})]}),!n&&c.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Образы"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:c.map((t,a)=>e.jsxs(j,{to:`/outfits/${t.id}`,className:"block rounded-md border p-4 hover:shadow",ref:a===c.length-1?S:null,children:[e.jsx("h3",{className:"text-lg font-medium",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Стиль: ",t.style]}),t.total_price&&e.jsxs("p",{className:"mt-2 font-semibold",children:[t.total_price,"₸"]})]},t.id))})]})]})]})};export{Z as default};
