import{j as e}from"./ui-DmaJfU4R.js";import{r as d}from"./router-YsGj19cs.js";import{B as w}from"./button-CEL2MslA.js";import{C as r,d as a,a as c,b as l,c as n}from"./card-hWJdfOrY.js";import{B as x}from"./badge-CMy5sMNA.js";import{u as k}from"./use-toast-BimaNeed.js";import{i as C}from"./index-Czdh4XVO.js";import{c as f}from"./utils-CytzSlOG.js";import{L as p}from"./loader-circle-yzSCNo-f.js";import{m as S}from"./proxy-OF6tZF67.js";import{R as L}from"./refresh-cw-uUutlnOJ.js";import{P as M}from"./package-Mme0kKEa.js";import{C as u}from"./calendar-CHXi5zfj.js";import{c as N}from"./createLucideIcon-BcwDLXBm.js";import{T as g}from"./trending-up-CrVmSKtv.js";import{H as R}from"./heart-DyjZq6UA.js";import"./vendor-BtP0CW_r.js";import"./index-BwobEAja.js";/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=N("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=N("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Y=()=>{const[s,v]=d.useState(null),[y,m]=d.useState(!0),[o,h]=d.useState(!1),{toast:b}=k(),j=async(t=!1)=>{try{t?h(!0):m(!0);const i=await C();v(i)}catch{b({variant:"destructive",title:"Ошибка",description:"Не удалось загрузить аналитику"})}finally{m(!1),h(!1)}};d.useEffect(()=>{j()},[]);const _=()=>{j(!0)};return y?e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx(p,{className:"h-8 w-8 animate-spin text-primary"})}):s?e.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Аналитика товаров"}),e.jsxs("p",{className:"text-muted-foreground",children:["Модератор: ",s.moderator_info.user_name]})]}),e.jsxs(w,{onClick:_,disabled:o,variant:"outline",className:"flex items-center gap-2",children:[o?e.jsx(p,{className:"h-4 w-4 animate-spin"}):e.jsx(L,{className:"h-4 w-4"}),"Обновить"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(r,{children:e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Всего товаров"}),e.jsx("p",{className:"text-3xl font-bold",children:s.overview.total_items})]}),e.jsx(M,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(r,{children:e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"За неделю"}),e.jsx("p",{className:"text-3xl font-bold",children:s.overview.items_this_week})]}),e.jsx(u,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(r,{children:e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Ср. цена"}),e.jsxs("p",{className:"text-3xl font-bold",children:[Math.round(s.price_analysis.average_price).toLocaleString(),"₸"]})]}),e.jsx(T,{className:"h-8 w-8 text-purple-500"})]})})}),e.jsx(r,{children:e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Рост"}),e.jsxs("p",{className:f("text-3xl font-bold",s.recent_activity.growth_rate>0?"text-green-600":"text-red-600"),children:[s.recent_activity.growth_rate>0?"+":"",s.recent_activity.growth_rate,"%"]})]}),e.jsx(g,{className:"h-8 w-8 text-orange-500"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(r,{children:[e.jsxs(c,{children:[e.jsx(l,{children:"Категории товаров"}),e.jsx(n,{children:"Распределение по категориям"})]}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-3",children:[s.categories.slice(0,8).map((t,i)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500/20 flex items-center justify-center text-xs font-medium",children:i+1}),e.jsx("span",{className:"font-medium",children:t.category})]}),e.jsx(x,{variant:"outline",children:t.count})]},t.category)),s.categories.length===0&&e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Нет данных о категориях"})]})})]}),e.jsxs(r,{children:[e.jsxs(c,{children:[e.jsx(l,{children:"Бренды"}),e.jsx(n,{children:"Топ брендов в ваших товарах"})]}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-3",children:[s.brands.slice(0,8).map((t,i)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500/20 flex items-center justify-center text-xs font-medium",children:i+1}),e.jsx("span",{className:"font-medium",children:t.brand})]}),e.jsx(x,{variant:"outline",children:t.count})]},t.brand)),s.brands.length===0&&e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Нет данных о брендах"})]})})]}),e.jsxs(r,{children:[e.jsxs(c,{children:[e.jsx(l,{children:"Ценовой анализ"}),e.jsx(n,{children:"Статистика по ценам товаров"})]}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[Math.round(s.price_analysis.min_price).toLocaleString(),"₸"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Минимальная"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[Math.round(s.price_analysis.average_price).toLocaleString(),"₸"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Средняя"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[Math.round(s.price_analysis.max_price).toLocaleString(),"₸"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Максимальная"})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Товаров с ценой: ",s.price_analysis.items_with_price," из ",s.overview.total_items]})})]})})]}),e.jsxs(r,{children:[e.jsxs(c,{children:[e.jsx(l,{children:"Популярные товары"}),e.jsx(n,{children:"Товары с наибольшим количеством лайков"})]}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-3",children:[s.popular_items.by_likes.slice(0,5).map((t,i)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-red-500/20 flex items-center justify-center text-xs font-medium",children:i+1}),e.jsx("span",{className:"font-medium truncate max-w-32",children:t.name})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"h-4 w-4 text-red-500"}),e.jsx(x,{variant:"outline",children:t.likes})]})]},t.item_id)),s.popular_items.by_likes.length===0&&e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Нет данных о популярности"})]})})]})]}),e.jsxs(r,{className:"mt-8",children:[e.jsxs(c,{children:[e.jsx(l,{children:"Активность"}),e.jsx(n,{children:"Статистика активности за последний месяц"})]}),e.jsx(a,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(u,{className:"h-5 w-5 text-blue-500"}),e.jsx("h3",{className:"font-semibold",children:"За неделю"})]}),e.jsx("p",{className:"text-2xl font-bold",children:s.recent_activity.last_week_items}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"товаров добавлено"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(H,{className:"h-5 w-5 text-green-500"}),e.jsx("h3",{className:"font-semibold",children:"За месяц"})]}),e.jsx("p",{className:"text-2xl font-bold",children:s.recent_activity.last_month_items}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"товаров добавлено"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(g,{className:"h-5 w-5 text-orange-500"}),e.jsx("h3",{className:"font-semibold",children:"Рост"})]}),e.jsxs("p",{className:f("text-2xl font-bold",s.recent_activity.growth_rate>0?"text-green-600":"text-red-600"),children:[s.recent_activity.growth_rate>0?"+":"",s.recent_activity.growth_rate,"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"по сравнению с прошлым периодом"})]})]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Данные обновлены: ",new Date(s.generated_at).toLocaleString("ru-RU")]})})]}):e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Не удалось загрузить аналитику"})})};export{Y as default};
