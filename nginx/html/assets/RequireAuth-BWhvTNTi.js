import{j as e}from"./ui-DmaJfU4R.js";import{u as m,r as i,N as d}from"./router-YsGj19cs.js";import{u as x}from"./index-Czdh4XVO.js";import{B as o}from"./button-CEL2MslA.js";import{u}from"./use-toast-BimaNeed.js";import{L as f}from"./loader-circle-yzSCNo-f.js";import{C as h}from"./circle-alert-B1ct56S2.js";import{L as p}from"./log-in-DNjD0tPj.js";import"./vendor-BtP0CW_r.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./createLucideIcon-BcwDLXBm.js";const B=({children:n})=>{const l=m(),{user:s,loading:t}=x(),[c,r]=i.useState(!1),{toast:a}=u();return i.useEffect(()=>{!t&&!s&&(r(!0),a({title:"Требуется авторизация",description:"Для доступа к этой странице необходимо войти в систему",variant:"destructive"}))},[s,t,a]),t?e.jsx("div",{className:"flex h-screen items-center justify-center",children:e.jsx(f,{className:"h-12 w-12 animate-spin"})}):s?n:e.jsxs(e.Fragment,{children:[e.jsx(d,{to:"/login",state:{from:l},replace:!0}),c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/90 backdrop-blur-sm",children:e.jsx("div",{className:"mx-4 w-full max-w-md rounded-lg border bg-card p-6 shadow-lg",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[e.jsx(h,{className:"h-12 w-12 text-destructive"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:"Требуется авторизация"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Пожалуйста, войдите в систему для доступа к этой странице"})]}),e.jsxs("div",{className:"mt-4 flex gap-3",children:[e.jsx(o,{variant:"outline",onClick:()=>r(!1),children:"Закрыть"}),e.jsx(o,{asChild:!0,children:e.jsxs("a",{href:"/login",className:"flex items-center",children:[e.jsx(p,{className:"mr-2 h-4 w-4"}),"Войти"]})})]})]})})})]})};export{B as default};
