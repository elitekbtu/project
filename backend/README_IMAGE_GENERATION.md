# Image-to-Image Outfit Generation Setup

## Настройка генерации образов с помощью ИИ

Для работы image-to-image генерации образов необходимо настроить Hugging Face API.

### 1. Получение API ключа Hugging Face

1. Перейдите на [https://huggingface.co/](https://huggingface.co/)
2. Создайте аккаунт или войдите
3. Перейдите в Settings -> Access Tokens
4. Создайте новый токен с правами "Read"
5. Скопируйте токен

### 2. Настройка переменных окружения

Добавьте в ваш файл `.env` следующую переменную:

```env
# Hugging Face API для генерации образов
HUGGINGFACE_API_KEY=hf_your_token_here
```

### 3. Установка зависимостей

Убедитесь, что установлены все необходимые пакеты:

```bash
pip install -r requirements.txt
```

### 4. Как это работает

1. **Загрузка изображений**: Парсер автоматически скачивает изображения товаров в папку `uploads/items/`
2. **Композиция**: Система создает композитное изображение из манекена и изображений товаров
3. **ИИ генерация**: Hugging Face Stable Diffusion преобразует композицию в реалистичный образ
4. **Сохранение**: Сгенерированные образы сохраняются в `uploads/generated_outfits/`

### 5. Доступные модели

- **Stable Diffusion v1.5**: Основная модель для image-to-image
- **ControlNet**: Для точного контроля генерации
- **Inpainting**: Для заполнения областей

### 6. Альтернативы (бесплатные)

Если Hugging Face недоступен, система автоматически создаст placeholder изображение с информацией о товарах.

### 7. Качество генерации

- Использует локальные изображения товаров высокого качества
- Детальные промпты на основе брендов, цветов, материалов
- Учитывает параметры пользователя (рост, вес)
- Стилистические предпочтения по ценовой категории

### 8. Производительность

- Генерация занимает 30-60 секунд
- Размер изображения: 512x1024 пикселей
- Автоматическое сжатие и оптимизация
- Кэширование результатов

### 9. Отладка

Для отладки проверьте логи:

```bash
# Backend логи
docker-compose logs -f backend

# Проверка папок
ls -la uploads/items/
ls -la uploads/generated_outfits/
```

### 10. Ограничения

- Hugging Face Inference API имеет лимиты на бесплатном плане
- Первый запрос может занять больше времени (загрузка модели)
- Не все товары могут иметь локальные изображения

### 11. Улучшения

Для лучшего качества рекомендуется:

1. Использовать Hugging Face Pro для быстрой генерации
2. Настроить собственный Stable Diffusion сервер
3. Добавить больше контрольных точек для разных стилей
4. Использовать ComfyUI для более сложных workflow 